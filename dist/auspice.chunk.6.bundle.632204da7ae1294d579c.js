(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/FaJ":function(e,t){e.exports={version:"2.17.0"}},"1hPQ":function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,n,r,i=c(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={hasError:!1},t}return t=l,r=[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){console.error(e),console.error(t)}},{key:"render",value:function(){return this.state.hasError?this.props.showNothing?null:o.a.createElement("h1",null,"Something went wrong."):this.props.children}}])&&a(t.prototype,n),r&&a(t,r),l}(o.a.Component);t.a=p},"2NuI":function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,i,a,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,a,s],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},"5IUX":function(e,t,n){e.exports=n.p+"4dc6198ec0d867620d300be40d112a10.jpg"},"8b0t":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),o=n.n(r),i=n("17x9"),a=n.n(i),s=n("/MKj"),c=n("vOnD"),l=n("ma3e"),u=n("vec1"),p=function(e){var t=e.sidebarOpen,n=e.mobileDisplay,r=e.handler,i={visibility:n?"visible":t?"hidden":"visible",width:n?60:14,height:n?60:44,position:"absolute",top:n?15:4,left:n?"auto":0,right:n?20:"auto",zIndex:9e3,backgroundColor:n?u.c:u.j,boxShadow:n?"2px 4px 10px 1px rgba(0, 0, 0, 0.15)":"0px 0px 5px 1px rgba(0, 0, 0, 0.2)",cursor:"pointer",padding:0,transition:"top 0.3s ease-out, left 0.3s ease-out, width 0.3s ease-out, height 0.3s ease-out",borderRadius:n?"45px":"0px 6px 6px 0px"},a={visibility:n?"visible":t?"hidden":"visible",position:"absolute",width:30,height:30,top:"50%",left:"50%",lineHeight:"30px",textAlign:"center",transform:"translate(-50%,-50%)",marginLeft:"auto",marginRight:"auto",verticalAlign:"middle",color:n?"#FFFFFF":"#444",fontSize:n?26:12},s=o.a.createElement(l.g,null);return t&&!n?s=o.a.createElement(l.b,null):t||n?t&&n?s=o.a.createElement(l.g,null):!t&&n&&(s=o.a.createElement(l.f,null)):s=o.a.createElement(l.c,null),o.a.createElement("div",{style:i,onClick:r},o.a.createElement("div",{style:a},s))},f=n("LCzB"),h=n("KmX0"),d=n("kJFc"),y=n("6/d+"),m=n("PAHG"),b=n("f3zc"),g=n("vzVy"),v=n("IPqE"),w=n("/FaJ"),M=n("imBb"),j=n.n(M),S=n("X4A8");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T,E=function(e){e||(e=window.event),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},C=function(e,t,n){return o.a.createElement("tr",{key:e},o.a.createElement("th",{style:u.e.item},e),o.a.createElement("td",{style:u.e.item},n?o.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},t):t))},k=function(e){return void 0!==e&&e.startsWith("https_")?e.replace("https_","https:"):void 0!==e&&e.startsWith("http_")?e.replace("http_","http:"):e},D=function(e){var t=e.url,n=e.title,r=e.value;return o.a.createElement("tr",null,o.a.createElement("th",{style:u.e.item},n),o.a.createElement("td",{style:u.e.item},o.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},r)))},N=function(e){var t=e.node,n=Object(S.a)(t),r=Object(S.e)(t),i=Object(S.d)(t,"genbank_accession"),a=Object(S.d)(t,"gisaid_epi_isl");return Object(b.z)(a)?o.a.createElement(o.a.Fragment,null,o.a.createElement(D,{title:"GISAID EPI ISL",value:a.split("_")[2],url:"https://gisaid.org"}),Object(b.z)(i)?o.a.createElement(D,{title:"Genbank accession",value:i,url:"https://www.ncbi.nlm.nih.gov/nuccore/"+i}):null):Object(b.z)(i)?o.a.createElement(D,{title:"Genbank accession",value:i,url:"https://www.ncbi.nlm.nih.gov/nuccore/"+i}):Object(b.z)(n)&&Object(b.z)(r)?o.a.createElement(D,{url:k(r),value:n,title:"Accession"}):Object(b.z)(n)?C("Accession",n):Object(b.z)(r)?o.a.createElement(D,{title:"Strain URL",url:k(r),value:"click here"}):null},I=function(e){var t=e.node,n=e.t,r=Object(S.f)(t);if(!r)return null;var i=[];return r.selection_date&&i.push(o.a.createElement("tr",{key:"seldate"},o.a.createElement("th",null,n("Vaccine selected")),o.a.createElement("td",null,r.selection_date))),r.start_date&&i.push(o.a.createElement("tr",{key:"startdate"},o.a.createElement("th",null,n("Vaccine start date")),o.a.createElement("td",null,r.start_date))),r.end_date&&i.push(o.a.createElement("tr",{key:"enddate"},o.a.createElement("th",null,n("Vaccine end date")),o.a.createElement("td",null,r.end_date))),r.serum&&i.push(o.a.createElement("tr",{key:"serum"},o.a.createElement("th",null,n("Serum strain")),o.a.createElement("td",null))),i},A=function(e){var t=e.node,n=e.t,r=Object(S.c)(t);if(!r)return null;var o=[];return o.push(C(n("Authors"),r.value)),r.title&&"?"!==r.title&&(r.paper_url&&"?"!==r.paper_url?o.push(C(n("Title"),r.title,r.paper_url)):o.push(C(n("Title"),r.title))),r.journal&&"?"!==r.journal&&o.push(C(n("Journal"),r.journal)),1===o.length?o[0]:o},_=function(e){var t=e.children;return o.a.createElement("p",{style:u.e.modalHeading},t)},P=function(e){var t=e.node,n=e.t,r=Object(S.d)(t,"num_date");if(!r)return null;var i=Object(S.d)(t,"num_date",{confidence:!0});return r&&i&&i[0]!==i[1]?o.a.createElement(o.a.Fragment,null,C(n("Inferred collection date"),Object(m.d)(r)),C(n("Date Confidence Interval"),"(".concat(Object(m.d)(i[0]),", ").concat(Object(m.d)(i[1]),")"))):C(n("Collection date"),Object(m.d)(r))},z=function(e){var t=e.node,n=e.trait,r=e.colorings,o=Object(S.d)(t,n),i=o;"number"==typeof o&&(Number.isInteger(o)||(i=Number.parseFloat(o).toPrecision(3)));var a=r&&r[n]&&r[n].title?r[n].title:n;return Object(b.z)(i)?C(a,i):null},R=function(e){var t=e.tip,n=e.goAwayCallback,r=e.colorings,i=e.t;if(!t)return null;var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u.e.panel);a.maxHeight="70%";var s=t.n;return o.a.createElement("div",{style:u.e.modalContainer,onClick:function(){return n(t)}},o.a.createElement("div",{className:"panel",style:a,onClick:function(e){return E(e)}},o.a.createElement(_,null,s.name),o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement(I,{node:s,t:i}),o.a.createElement(P,{node:s,t:i}),o.a.createElement(A,{node:s,t:i}),function(e){if(!e.node_attrs)return[];var t=["author","div","num_date","gisaid_epi_isl","genbank_accession"];return Object.keys(e.node_attrs).filter((function(e){return!t.includes(e)}))}(s).map((function(e){return o.a.createElement(z,{node:s,trait:e,colorings:r,key:e})})),o.a.createElement(N,{node:s}))),o.a.createElement("p",{style:u.e.comment},i("Click outside this box to go back to the tree"))))},B=n("i2e/"),F=n("FmoU"),W=function(e){var t=e.dispatch,n=e.transform,r=e.legendRectSize,i=e.legendSpacing,a=e.legendMaxLength,s=e.rectStroke,c=e.rectFill,l=e.label,p=e.value;return o.a.createElement("g",{transform:n,onMouseEnter:function(){t(Object(d.e)({selectedLegendItem:p}))},onMouseLeave:function(){t(Object(d.e)())}},o.a.createElement("rect",{style:{strokeWidth:2},width:r,height:r,fill:c,stroke:s}),o.a.createElement("text",{x:r+i+5,y:r-i,style:{fontSize:12,fill:u.a,fontFamily:u.b}},o.a.createElement("title",null,l),"string"==typeof l?l.substring(0,a):l))},Y=n("Y6X2");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var o=$(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee={position:"absolute",top:26,borderRadius:4,zIndex:1e3,userSelect:"none"},te=Object(s.b)((function(e){return{colorBy:e.controls.colorBy,colorings:e.metadata.colorings,colorScale:e.controls.colorScale,legendOpen:e.controls.legendOpen}}))(T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(a,e);var t,n,r,i=Z(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"showLegend",value:function(){return void 0!==this.props.legendOpen?this.props.legendOpen:!(this.props.width<600||this.props.colorScale.legendValues.length>32)}},{key:"getSVGHeight",value:function(){if(!this.showLegend())return 18;var e=this.props.colorScale.legendValues.length;return Math.ceil(e/2)*(b.B+b.C)+b.C+20||100}},{key:"getSVGWidth",value:function(){return this.showLegend()?290:this.getTitleWidth()+20}},{key:"getTransformationForLegendItem",value:function(e){var t=this.props.colorScale.legendValues.length,n=Math.ceil(t/2);return"translate("+(145*Math.floor(e/n)+10)+","+e%n*(b.B+b.C)+")"}},{key:"getTitleString",value:function(){if(Object(Y.d)(this.props.colorBy)){var e=Object(Y.a)(this.props.colorBy);return e.aa?"Genotype at ".concat(e.gene," site ").concat(e.positions.join(", ")):"Nucleotide at position ".concat(e.positions.join(", "))}return void 0===this.props.colorings[this.props.colorBy]?"":this.props.colorings[this.props.colorBy].title}},{key:"getTitleWidth",value:function(){return 15+5.3*this.getTitleString().length}},{key:"toggleLegend",value:function(){this.props.dispatch({type:g.L,value:!this.props.legendOpen})}},{key:"legendTitle",value:function(){return o.a.createElement("g",{id:"Title"},o.a.createElement("rect",{width:this.getTitleWidth(),height:"12",fill:"rgba(255,255,255,.85)"}),o.a.createElement("text",{x:this.getTitleOffset(),y:10,style:{fontSize:12,fill:u.a,fontFamily:u.d,backgroundColor:"#fff"}},this.getTitleString()))}},{key:"legendChevron",value:function(){var e=this.showLegend()?-180:0,t=this.getArrowOffset();return o.a.createElement("g",{id:"Chevron",transform:"translate(".concat(t,",0)")},o.a.createElement("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792"},o.a.createElement("rect",{width:"1792",height:"1792",fill:"rgba(255,255,255,.85)"}),o.a.createElement("path",{fill:u.a,style:{transform:"rotate(".concat(e,"deg)"),transformOrigin:"50% 50%",transition:"".concat(b.u,"ms ease-in-out")},d:"M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"})))}},{key:"styleLabelText",value:function(e){if("num_date"===this.props.colorBy){var t=this.props.colorScale.legendValues;if(t[t.length-1]-t[0]>10&&t[t.length-1]-parseInt(e,10)>=10)return parseInt(e,10);var n=q(Object(m.d)(e).split("-"),3),r=n[0],o=n[1];return n[2],"".concat(b.E[o]," ").concat(r)}return e}},{key:"legendItems",value:function(){var e=this,t=this.props.colorScale.legendValues.filter((function(e){return void 0!==e})).map((function(t,n){return o.a.createElement(W,{dispatch:e.props.dispatch,legendRectSize:b.B,legendSpacing:b.C,legendMaxLength:b.A,rectFill:Object(F.e)(e.props.colorScale.scale(t)).brighter([.35]).toString(),rectStroke:Object(F.e)(e.props.colorScale.scale(t)).toString(),transform:e.getTransformationForLegendItem(n),key:t,value:t,label:e.styleLabelText(t),index:n})}));return o.a.createElement("g",{id:"ItemsContainer"},o.a.createElement("rect",{width:"290",height:this.getSVGHeight(),fill:"rgba(255,255,255,.85)"}),o.a.createElement("g",{id:"Items",transform:"translate(0,20)"},t))}},{key:"getStyles",value:function(){return{svgLeft:H(H({},ee),{},{left:5}),svgRight:H(H({},ee),{},{right:5})}}},{key:"getSVGStyle",value:function(){var e=this.getStyles();return this.props.right?e.svgRight:e.svgLeft}},{key:"getArrowOffset",value:function(){return this.props.right?this.getSVGWidth()-20:this.getTitleWidth()}},{key:"getTitleOffset",value:function(){return this.props.right?this.getSVGWidth()-this.getTitleWidth()-15:5}},{key:"render",value:function(){var e=this;return this.props.colorScale?o.a.createElement("svg",{id:"TreeLegendContainer",width:this.getSVGWidth(),height:this.getSVGHeight(),style:this.getSVGStyle()},this.legendItems(),o.a.createElement("g",{id:"TitleAndChevron",onClick:function(){return e.toggleLegend()},style:{cursor:"pointer",textAlign:"right"}},this.legendTitle(),this.legendChevron())):null}}])&&X(t.prototype,n),r&&X(t,r),a}(o.a.Component))||T,ne=n("VIqg"),re=n("N2aK"),oe=n("dPRQ"),ie=function(e){return 1===e["stroke-width"]?0:e["stroke-width"]>6?e["stroke-width"]+6:2*e["stroke-width"]},ae=(n("ncyr"),n("iR1B")),se=function(e){var t=e.n.node_attrs&&e.n.node_attrs.hidden;return t&&("always"===t||"timetree"===t&&"num_date"===e.that.distance||"divtree"===t&&"div"===e.that.distance)?"hidden":"visible"},ce=function(e,t){return e.branchStroke},le=function(e,t,n){if(e){var r="T".concat(e.that.id,"_").concat(e.parent.n.arrayIdx,"_").concat(e.n.arrayIdx),o=e.that.svg.select(Object(re.e)("#branchT",e.n.name));o.empty()||o.style("stroke",n);var i=e.that.svg.select(Object(re.e)("#branchS",e.n.name));if(!i.empty())if(e.branchStroke===e.parent.branchStroke)i.style("stroke",n);else{var a=e.that.svg.select("#".concat(r,"_begin"));a&&a.attr("stop-color",t);var s=e.that.svg.select("#".concat(r,"_end"));s&&s.attr("stop-color",n)}}};var ue=n("ZZ/3");function pe(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he={attrs:{".tip":{r:function(e){return e.r},cx:function(e){return e.xTip},cy:function(e){return e.yTip}},".branch":{},".vaccineCross":{d:function(e){return e.vaccineCross}},".conf":{d:function(e){return e.confLine}}},styles:{".tip":{fill:function(e){return e.fill},stroke:function(e){return e.tipStroke},visibility:function(e){return e.visibility===b.b?"visible":"hidden"}},".conf":{stroke:function(e){return e.branchStroke},"stroke-width":ie},".branch":{"stroke-width":function(e){return e["stroke-width"]+"px"},stroke:function(e){return ce(e)},cursor:function(e){return e.visibility===b.b?"pointer":"default"},visibility:se}}},de=function(e,t){return function(n){he.attrs[e]&&pe(t).filter((function(t){return he.attrs[e][t]})).forEach((function(t){n.attr(t,he.attrs[e][t])})),he.styles[e]&&pe(t).filter((function(t){return he.styles[e][t]})).forEach((function(t){n.style(t,he.styles[e][t])}))}},ye=function(e,t,n,r){e.selectAll(t).filter((function(e){return e.update})).transition().duration(r).call(n),r||Object(oe.d)()},me=n("vBe5"),be=function e(t,n){t.x=t.px+t.branchLength*Math.cos(t.tau+.5*t.w),t.y=t.py+t.branchLength*Math.sin(t.tau+.5*t.w);var r=t.tau;if(!t.terminal)for(var o=0;o<t.children.length;o++){var i=t.children[o];i.w=2*Math.PI*i.leafCount/n,i.tau=r,r+=i.w,i.px=t.x,i.py=t.y,e(i,n)}},ge=n("IzZ+"),ve=function(e){return"aa"===e?"10px":"14px"},we=function(e){return"aa"===e?"500":"700"},Me=function(e,t,n){if("aa"!==e)return"visible";return function(e){return"rect"!==t?"hidden":Object.keys(e.n.branch_attrs.labels).filter((function(e){return"aa"!==e})).length||e.n.tipCount>.05*n?"visible":"hidden"}},je=function(e,t,n){var r=this;this.grid=!1,this.attributes=["r","cx","cy","id","class","d"],this.params={regressionStroke:u.a,regressionWidth:6,majorGridStroke:"#DDD",majorGridWidth:2,minorGridStroke:"#EEE",minorGridWidth:1,tickLabelSize:12,tickLabelFill:u.a,minorTicks:4,orientation:[1,1],margins:{left:30,right:15,top:10,bottom:40},showGrid:!0,fillSelected:"#A73",radiusSelected:5,branchStroke:"#AAA",branchStrokeWidth:2,tipStroke:"#AAA",tipFill:"#CCC",tipStrokeWidth:1,tipRadius:4,fontFamily:u.b,branchLabelKey:!1,branchLabelFont:u.b,branchLabelFill:"#777",branchLabelFontWeight:500,branchLabelPadX:8,branchLabelPadY:5,tipLabels:!0,tipLabelFont:u.b,tipLabelFill:"#555",tipLabelPadX:8,tipLabelPadY:2,mapToScreenDebounceTime:500,tipLabelFontSizeL1:8,tipLabelFontSizeL2:10,tipLabelFontSizeL3:12,tipLabelBreakL1:75,tipLabelBreakL2:50,tipLabelBreakL3:25},this.groups={},this.id=t,this.nodes=e.map((function(e){var t={that:r,n:e,x:0,y:0,terminal:void 0===e.children,inView:void 0===e.inView||e.inView};return e.shell=t,t})),this.numberOfTips=Object(re.c)(this.nodes),Object(re.h)(this.nodes),this.xScale=Object(ne.a)(),this.yScale=Object(ne.a)(),this.zoomNode=this.nodes[n],this.strainToNode={},this.nodes.forEach((function(e){r.strainToNode[e.n.name]=e}))};je.prototype.change=function(e){var t,n,r=e.changeColorBy,o=void 0!==r&&r,i=e.changeVisibility,a=void 0!==i&&i,s=e.changeTipRadii,c=void 0!==s&&s,l=e.changeBranchThickness,u=void 0!==l&&l,p=e.showConfidences,f=void 0!==p&&p,h=e.removeConfidences,d=void 0!==h&&h,y=e.zoomIntoClade,m=void 0!==y&&y,b=e.svgHasChangedDimensions,g=void 0!==b&&b,v=e.animationInProgress,w=void 0!==v&&v,M=e.newDistance,j=void 0===M?void 0:M,S=e.newLayout,L=void 0===S?void 0:S,x=e.updateLayout,O=void 0===x?void 0:x,T=e.newBranchLabellingKey,E=void 0===T?void 0:T,C=e.branchStroke,k=void 0===C?void 0:C,D=e.tipStroke,N=void 0===D?void 0:D,I=e.fill,A=void 0===I?void 0:I,_=e.visibility,P=void 0===_?void 0:_,z=e.tipRadii,R=void 0===z?void 0:z,B=e.branchThickness,F=void 0===B?void 0:B,W=new Set,Y={},V=new Set,G=L,H=500;Date.now()-this.timeLastRenderRequested<1e3&&(H=0),o&&(W.add(".branch").add(".tip").add(".conf"),V.add("stroke").add("fill"),Y.branchStroke=k,Y.tipStroke=N,Y.fill=A),a&&(W.add(".tip").add(".tipLabel"),V.add("visibility").add("cursor"),Y.visibility=P),c&&(W.add(".tip"),V.add("r"),Y.r=R),u&&(W.add(".branch").add(".conf"),V.add("stroke-width"),Y["stroke-width"]=F),(j||L||O||m||g)&&(W.add(".tip").add(".branch.S").add(".branch.T").add(".branch"),W.add(".vaccineCross").add(".vaccineDottedLine").add(".conf"),W.add(".branchLabel").add(".tipLabel"),W.add(".grid").add(".regression"),V.add("cx").add("cy").add("d").add("opacity").add("visibility")),t=this.nodes,n=Y,t.forEach((function(e,t){for(var r in e.update=!1,n){var o=n[r][t];o!==e[r]&&(e[r]=o,e.update=!0)}})),o&&this.updateColorBy(),m&&(this.nodes.forEach((function(e){e.inView=!1,e.update=!0})),this.zoomNode=m.terminal?m.parent:m,Object(re.b)(this.zoomNode,(function(e){e.inView=!0}))),g&&this.nodes.forEach((function(e){e.update=!0})),j&&this.setDistance(j),(j||L||O)&&this.setLayout(L||this.layout),f&&(this.params.confidence=!0),(V.has(["stroke-width"])||j||L||O||m||g||f)&&this.mapToScreen();var U={removeConfidences:d,showConfidences:f,newBranchLabellingKey:E};U.timeSliceHasPotentiallyChanged=a||j,U.hideTipLabels=w,G?this.modifySVGInStages(W,V,H,1e3):this.modifySVG(W,V,H,U),this.timeLastRenderRequested=Date.now()},je.prototype.modifySVG=function(e,t,n,r){var o,i=this,a=[".tip",".vaccineDottedLine",".vaccineCross",".branch"];if(e.has(".branch.S")||e.has(".branch.T")){var s=e.has(".branch");s&&a.splice(a.indexOf(".branch"),1);[".S",".T"].forEach((function(r,a){e.has(".branch".concat(r))&&(o=s?function(e){de(".branch",t)(e),e.attr("d",(function(e){return e.branch[a]}))}:function(e){e.attr("d",(function(e){return e.branch[a]}))},ye(i.svg,".branch".concat(r),o,n))}))}a.forEach((function(r){e.has(r)&&(o=de(r,t),ye(i.svg,r,o,n))})),e.has(".branchLabel")&&this.updateBranchLabels(n),r.hideTipLabels?this.removeTipLabels():e.has(".tipLabel")&&this.updateTipLabels(),e.has(".grid")&&(this.grid&&"unrooted"!==this.layout?this.addGrid():this.hideGrid()),e.has(".regression")&&(this.removeRegression(),"clock"===this.layout&&"num_date"===this.distance&&this.drawRegression()),r.removeConfidences&&this.confidencesInSVG?this.removeConfidence():r.showConfidences&&!this.confidencesInSVG?this.drawConfidence():e.has(".conf")&&this.confidencesInSVG&&(Object(ue.c)(!0,this.distance,this.layout)?(o=de(".conf",t),ye(this.svg,".conf",o,n)):this.removeConfidence()),r.timeSliceHasPotentiallyChanged&&this.showTemporalSlice(),r.newBranchLabellingKey&&(this.removeBranchLabels(),"none"!==r.newBranchLabellingKey&&this.drawBranchLabels(r.newBranchLabellingKey))},je.prototype.modifySVGInStages=function(e,t,n,r){var o=this;e.delete(".tip"),this.hideGrid();var i=0,a=function(){o.drawBranches(),o.params.showGrid&&o.addGrid(),o.svg.selectAll(".tip").remove(),o.updateTipLabels(),o.drawTips(),o.vaccines&&o.drawVaccines(),o.showTemporalSlice(),"clock"===o.layout&&"num_date"===o.distance&&o.drawRegression(),e.has(".branchLabel")&&o.drawBranchLabels(o.params.branchLabelKey)};this.confidencesInSVG=!1,this.svg.selectAll(pe(e).join(", ")).transition().duration(n).style("opacity",0).remove().on("start",(function(){return i++})).on("end",(function(){if(!--i){var e=de(".tip",t);ye(o.svg,".tip",e,r),setTimeout(a,r)}})),this.hideTemporalSlice(),n||Object(oe.d)()},je.prototype.render=function(e,t,n,r,o,i,a,s,c,l,u,p,f,h){var d=this;this.svg=e,this.params=Object.assign(this.params,r),this.callbacks=o,this.vaccines=c?c.map((function(e){return e.shell})):void 0,this.dateRange=h,this.setDistance(n),this.setLayout(t),this.mapToScreen(),this.nodes.forEach((function(e,t){e.branchStroke=l[t],e.tipStroke=u[t],e.fill=p[t],e.visibility=a[t],e["stroke-width"]=i[t],e.r=f?f[t]:d.params.tipRadius})),this.params.showGrid&&(this.addGrid(),this.showTemporalSlice()),this.drawBranches(),this.updateTipLabels(),this.drawTips(),this.params.branchLabelKey&&this.drawBranchLabels(this.params.branchLabelKey),this.vaccines&&this.drawVaccines(),"clock"===this.layout&&"num_date"===this.distance&&this.drawRegression(),this.confidencesInSVG=!1,s&&this.drawConfidence(),this.timeLastRenderRequested=Date.now()},je.prototype.clearSVG=function(){this.svg.selectAll("*").remove()},je.prototype.drawTips=function(){var e=this.params;"tips"in this.groups||(this.groups.tips=this.svg.append("g").attr("id","tips")),this.groups.tips.selectAll(".tip").data(this.nodes.filter((function(e){return e.terminal}))).enter().append("circle").attr("class","tip").attr("id",(function(e){return Object(re.e)("tip",e.n.name)})).attr("cx",(function(e){return e.xTip})).attr("cy",(function(e){return e.yTip})).attr("r",(function(e){return e.r})).on("mouseover",this.callbacks.onTipHover).on("mouseout",this.callbacks.onTipLeave).on("click",this.callbacks.onTipClick).style("pointer-events","auto").style("visibility",(function(e){return e.visibility===b.b?"visible":"hidden"})).style("fill",(function(t){return t.fill||e.tipFill})).style("stroke",(function(t){return t.tipStroke||e.tipStroke})).style("stroke-width",(function(){return e.tipStrokeWidth})).style("cursor","pointer")},je.prototype.drawBranches=function(){var e=this.params;"branchTee"in this.groups||(this.groups.branchTee=this.svg.append("g").attr("id","branchTee")),"clock"===this.layout||"unrooted"===this.layout?this.groups.branchTee.selectAll("*").remove():this.groups.branchTee.selectAll(".branch").data(this.nodes.filter((function(e){return!e.terminal}))).enter().append("path").attr("class","branch T").attr("id",(function(e){return Object(re.e)("branchT",e.n.name)})).attr("d",(function(e){return e.branch[1]})).style("stroke",(function(t){return t.branchStroke||e.branchStroke})).style("stroke-width",(function(t){return t["stroke-width"]||e.branchStrokeWidth})).style("fill","none").style("pointer-events","auto").on("mouseover",this.callbacks.onBranchHover).on("mouseout",this.callbacks.onBranchLeave).on("click",this.callbacks.onBranchClick),this.groups.branchGradientDefs||(this.groups.branchGradientDefs=this.svg.append("defs")),this.groups.branchGradientDefs.selectAll("*").remove(),this.updateColorBy(),"branchStem"in this.groups||(this.groups.branchStem=this.svg.append("g").attr("id","branchStem")),this.groups.branchStem.selectAll(".branch").data(this.nodes).enter().append("path").attr("class","branch S").attr("id",(function(e){return Object(re.e)("branchS",e.n.name)})).attr("d",(function(e){return e.branch[0]})).style("stroke",(function(t){return t.branchStroke?ce(t):e.branchStroke})).style("stroke-linecap","round").style("stroke-width",(function(t){return t["stroke-width"]||e.branchStrokeWidth})).style("visibility",se).style("cursor",(function(e){return e.visibility===b.b?"pointer":"default"})).style("pointer-events","auto").on("mouseover",this.callbacks.onBranchHover).on("mouseout",this.callbacks.onBranchLeave).on("click",this.callbacks.onBranchClick)},je.prototype.drawVaccines=function(){this.vaccines&&this.vaccines.length&&("vaccines"in this.groups||(this.groups.vaccines=this.svg.append("g").attr("id","vaccines")),this.groups.vaccines.selectAll(".vaccineCross").data(this.vaccines).enter().append("path").attr("class","vaccineCross").attr("d",(function(e){return e.vaccineCross})).style("stroke","#333").style("stroke-width",2*this.params.branchStrokeWidth).style("fill","none").style("cursor","pointer").style("pointer-events","auto").on("mouseover",this.callbacks.onTipHover).on("mouseout",this.callbacks.onTipLeave).on("click",this.callbacks.onTipClick))},je.prototype.drawRegression=function(){var e=this.yScale(this.regression.intercept+this.xScale.domain()[0]*this.regression.slope),t=this.yScale(this.regression.intercept+this.xScale.domain()[1]*this.regression.slope),n="M "+this.xScale.range()[0].toString()+" "+e.toString()+" L "+this.xScale.range()[1].toString()+" "+t.toString();"clockRegression"in this.groups||(this.groups.clockRegression=this.svg.append("g").attr("id","clockRegression")),this.groups.clockRegression.append("path").attr("d",n).attr("class","regression").style("fill","none").style("visibility","visible").style("stroke",this.params.regressionStroke).style("stroke-width",this.params.regressionWidth),this.groups.clockRegression.append("text").text(function(e,t){if(t>5)return"rate estimate: ".concat(Object(re.d)(e.slope)," subs per year");return"rate estimate: ".concat(e.slope.toExponential(2)," subs per site per year")}(this.regression,this.yScale.domain()[0])).attr("class","regression").attr("x",this.xScale.range()[1]/2-75).attr("y",this.yScale.range()[0]+50).style("fill",this.params.regressionStroke).style("font-size",this.params.tickLabelSize+8).style("font-weight",400).style("font-family",this.params.fontFamily)},je.prototype.removeRegression=function(){"clockRegression"in this.groups&&this.groups.clockRegression.selectAll("*").remove()},je.prototype.updateColorBy=function(){},je.prototype.setDistance=function(e){this.nodes.forEach((function(e){e.update=!0})),this.distance=e||"div","div"===this.distance?this.nodes.forEach((function(e){e.depth=Object(S.b)(e.n),e.pDepth=Object(S.b)(e.n.parent),e.conf=[e.depth,e.depth]})):this.nodes.forEach((function(e){e.depth=Object(S.d)(e.n,"num_date"),e.pDepth=Object(S.d)(e.n.parent,"num_date"),e.conf=Object(S.d)(e.n,"num_date",{confidence:!0})||[e.depth,e.depth]})),this.vaccines&&this.vaccines.forEach((function(e){e.crossDepth=e.depth}))},je.prototype.setLayout=function(e){void 0!==e&&e===this.layout||this.nodes.forEach((function(e){e.update=!0})),this.layout=void 0===e?"rect":e,"rect"===this.layout?this.rectangularLayout():"clock"===this.layout?this.timeVsRootToTip():"radial"===this.layout?this.radialLayout():"unrooted"===this.layout&&this.unrootedLayout()},je.prototype.rectangularLayout=function(){this.nodes.forEach((function(e){e.y=e.n.yvalue,e.x=e.depth,e.px=e.pDepth,e.py=e.y})),this.vaccines&&this.vaccines.forEach((function(e){e.xCross=e.crossDepth,e.yCross=e.y}))},je.prototype.timeVsRootToTip=function(){this.nodes.forEach((function(e){e.y=Object(S.b)(e.n),e.x=Object(S.d)(e.n,"num_date"),e.px=Object(S.d)(e.n.parent,"num_date"),e.py=Object(S.b)(e.n.parent)})),this.vaccines&&this.vaccines.forEach((function(e){e.xCross=e.x,e.yCross=e.y}));var e=this.numberOfTips,t=this.nodes[0].depth,n=Object(me.e)(this.nodes.filter((function(e){return e.terminal})).map((function(e){return e.y*(e.depth-t)})))/e/(Object(me.e)(this.nodes.filter((function(e){return e.terminal})).map((function(e){return(e.depth-t)*(e.depth-t)})))/e),r=-t*n;this.regression={slope:n,intercept:r}},je.prototype.unrootedLayout=function(){Object(re.a)(this.nodes[0]);var e=this.nodes[0].leafCount;this.nodes.forEach((function(e){e.branchLength=e.depth-e.pDepth})),this.nodes[0].x=0,this.nodes[0].y=0,this.nodes[0].px=0,this.nodes[0].py=0,this.nodes[0].w=2*Math.PI,this.nodes[0].tau=0;for(var t=1.5*Math.PI,n=0;n<this.nodes[0].children.length;n++)this.nodes[0].children[n].px=0,this.nodes[0].children[n].py=0,this.nodes[0].children[n].w=2*Math.PI*this.nodes[0].children[n].leafCount/e,this.nodes[0].children[n].tau=t,t+=this.nodes[0].children[n].w,be(this.nodes[0].children[n],e);this.vaccines&&this.vaccines.forEach((function(e){var t=e.crossDepth-e.depth;e.xCross=e.px+t*Math.cos(e.tau+.5*e.w),e.yCross=e.py+t*Math.sin(e.tau+.5*e.w)}))},je.prototype.radialLayout=function(){var e=this,t=this.numberOfTips,n=this.nodes[0].depth;this.nodes.forEach((function(e){var r=1.9*Math.PI*e.yRange[0]/t,o=1.9*Math.PI*e.yRange[1]/t;e.angle=1.9*Math.PI*e.n.yvalue/t,e.y=(e.depth-n)*Math.cos(e.angle),e.x=(e.depth-n)*Math.sin(e.angle),e.py=e.y*(e.pDepth-n)/(e.depth-n+1e-15),e.px=e.x*(e.pDepth-n)/(e.depth-n+1e-15),e.yCBarStart=(e.depth-n)*Math.cos(r),e.xCBarStart=(e.depth-n)*Math.sin(r),e.yCBarEnd=(e.depth-n)*Math.cos(o),e.xCBarEnd=(e.depth-n)*Math.sin(o),e.smallBigArc=Math.abs(o-r)>1*Math.PI})),this.vaccines&&this.vaccines.forEach((function(t){"div"===e.distance?(t.xCross=t.x,t.yCross=t.y):(t.xCross=(t.crossDepth-n)*Math.sin(t.angle),t.yCross=(t.crossDepth-n)*Math.cos(t.angle))}))},je.prototype.setScales=function(e){var t=parseInt(this.svg.attr("width"),10),n=parseInt(this.svg.attr("height"),10);if("radial"===this.layout||"unrooted"===this.layout){var r=t-(e.left||0)-(e.right||0),o=n-(e.top||0)-(e.top||0),i=Object(me.c)([r,o]),a=r-i,s=o-i;this.xScale.range([.5*a+e.left||0,t-.5*a-(e.right||0)]),this.yScale.range([.5*s+e.top||0,n-.5*s-(e.bottom||0)])}else this.params.orientation[0]>0?this.xScale.range([e.left||0,t-(e.right||0)]):this.xScale.range([t-(e.right||0),e.left||0]),this.params.orientation[1]>0?this.yScale.range([e.top||0,n-(e.bottom||0)]):this.yScale.range([n-(e.bottom||0),e.top||0])},je.prototype.mapToScreen=function(){var e=this,t={left:this.params.margins.left,right:this.params.margins.right,top:this.params.margins.top,bottom:this.params.margins.bottom},n=this.nodes.filter((function(e){return e.terminal})).filter((function(e){return e.inView}));if(n.length<this.params.tipLabelBreakL1){var r=this.params.tipLabelFontSizeL1;n.length<this.params.tipLabelBreakL2&&(r=this.params.tipLabelFontSizeL2),n.length<this.params.tipLabelBreakL3&&(r=this.params.tipLabelFontSizeL3);var o=0;n.forEach((function(e){o<e.n.name.length&&(o=.65*e.n.name.length*r)})),t.right+=o}this.setScales(t);var i=1e6,a=0,s=1e6,c=0;if(this.nodes.filter((function(e){return e.inView})).forEach((function(e){e.x>c&&(c=e.x),e.y>a&&(a=e.y),e.x<s&&(s=e.x),e.y<i&&(i=e.y)})),s===c&&(s-=.005,c+=.005),n.length<30){var l=.05*(a-i);i-=l,a+=l}var u=c-s;if(u<1e-8&&(c=1e-8-s,u=1e-8),"radial"===this.layout||"unrooted"===this.layout){var p=a-i,f=Object(me.b)([p,u]),h=u>p?.5*(u-p):0,d=u<p?.5*(p-u):0;this.xScale.domain([s-d,s+f-d]),this.yScale.domain([i-h,i+f-h])}else"clock"===this.layout?(this.xScale.domain([s,c]),this.yScale.domain([a,i])):(this.xScale.domain([s,c]),this.yScale.domain([i,a]));if(this.nodes.forEach((function(t){t.xTip=e.xScale(t.x),t.yTip=e.yScale(t.y),t.xBase=e.xScale(t.px),t.yBase=e.yScale(t.py),t.rot=180*Math.atan2(t.yTip-t.yBase,t.xTip-t.xBase)/Math.PI})),this.vaccines&&this.vaccines.forEach((function(t){var n=e.xScale(t.xCross),r=e.yScale(t.yCross);t.vaccineCross=" M ".concat(n-6,",").concat(r-6," L ").concat(n+6,",").concat(r+6," M ").concat(n-6,",").concat(r+6," L ").concat(n+6,",").concat(r-6)})),"clock"===this.layout||"unrooted"===this.layout)this.nodes.forEach((function(e){e.branch=[" M "+e.xBase.toString()+","+e.yBase.toString()+" L "+e.xTip.toString()+","+e.yTip.toString(),""]}));else if("rect"===this.layout)this.nodes.forEach((function(t){var n=.5*(t.parent["stroke-width"]-t["stroke-width"])||0,r=[e.yScale(t.yRange[0]),e.yScale(t.yRange[1])];t.branch=[[" M ".concat(t.xBase-n,",").concat(t.yBase," L ").concat(t.xTip,",").concat(t.yTip+.01)],[" M ".concat(t.xTip,",").concat(r[0]," L ").concat(t.xTip,",").concat(r[1])]],e.params.confidence&&(t.confLine=" M ".concat(e.xScale(t.conf[0]),",").concat(t.yBase," L ").concat(e.xScale(t.conf[1]),",").concat(t.yTip))}));else if("radial"===this.layout){var y=this.nodes[0].depth,m=this.nodes.map((function(e){return.5*(e.parent["stroke-width"]-e["stroke-width"])||0}));this.nodes.forEach((function(t){t.cBarStart=e.yScale(t.yRange[0])})),this.nodes.forEach((function(t){t.cBarEnd=e.yScale(t.yRange[1])})),this.nodes.forEach((function(t,n){t.branch=[" M "+(t.xBase-m[n]*Math.sin(t.angle)).toString()+" "+(t.yBase-m[n]*Math.cos(t.angle)).toString()+" L "+t.xTip.toString()+" "+t.yTip.toString(),""],t.terminal||(t.branch[1]=[" M "+e.xScale(t.xCBarStart).toString()+" "+e.yScale(t.yCBarStart).toString()+" A "+(e.xScale(t.depth)-e.xScale(y)).toString()+" "+(e.yScale(t.depth)-e.yScale(y)).toString()+" 0 "+(t.smallBigArc?"1 ":"0 ")+" 1  "+e.xScale(t.xCBarEnd).toString()+","+e.yScale(t.yCBarEnd).toString()])}))}},je.prototype.removeConfidence=function(e){this.confidencesInSVG=!1,"confidenceIntervals"in this.groups&&(e?this.groups.confidenceIntervals.selectAll("*").transition().duration(e).style("opacity",0).remove():this.groups.confidenceIntervals.selectAll("*").remove())},je.prototype.drawConfidence=function(e){var t=this;this.confidencesInSVG=!0,"confidenceIntervals"in this.groups||(this.groups.confidenceIntervals=this.svg.append("g").attr("id","confidenceIntervals")),e?(this.groups.confidenceIntervals.selectAll(".conf").data(this.nodes).enter().call((function(e){return t.drawSingleCI(e,0)})),this.groups.confidenceIntervals.transition().duration(e).style("opacity",.5)):this.groups.confidenceIntervals.selectAll(".conf").data(this.nodes).enter().call((function(e){return t.drawSingleCI(e,.5)}))},je.prototype.drawSingleCI=function(e,t){e.append("path").attr("class","conf").attr("id",(function(e){return Object(re.e)("conf",e.n.name)})).attr("d",(function(e){return e.confLine})).style("stroke",(function(e){return e.branchStroke||"#888"})).style("opacity",t).style("fill","none").style("stroke-width",ie).style("pointer-events","none")},je.prototype.drawBranchLabels=function(e){var t=this;this.params.branchLabelKey=e;var n=ve(e),r=we(e),o=Me(e,this.layout,this.zoomNode.n.tipCount);"branchLabels"in this.groups||(this.groups.branchLabels=this.svg.append("g").attr("id","branchLabels")),this.groups.branchLabels.selectAll(".branchLabel").data(this.nodes.filter((function(t){return t.n.branch_attrs&&t.n.branch_attrs.labels&&t.n.branch_attrs.labels[e]}))).enter().append("text").attr("class","branchLabel").attr("x",(function(e){return e.xTip+(t.params.orientation[0]>0?-5:5)})).attr("y",(function(e){return e.yTip-t.params.branchLabelPadY})).style("text-anchor",this.params.orientation[0]>0?"end":"start").style("visibility",o).style("fill",this.params.branchLabelFill).style("font-family",this.params.branchLabelFont).style("font-weight",r).style("font-size",n).text((function(t){return t.n.branch_attrs.labels[e]}))},je.prototype.removeBranchLabels=function(){"branchLabels"in this.groups&&this.groups.branchLabels.selectAll("*").remove()},je.prototype.updateBranchLabels=function(e){var t=this,n=Me(this.params.branchLabelKey,this.layout,this.zoomNode.n.tipCount),r=ve(this.params.branchLabelKey),o=we(this.params.branchLabelKey);this.groups.branchLabels.selectAll(".branchLabel").transition().duration(e).attr("x",(function(e){return e.xTip-5})).attr("y",(function(e){return e.yTip-t.params.branchLabelPadY})).style("visibility",n).style("font-weight",o).style("font-size",r),e||Object(oe.d)()},je.prototype.updateTipLabels=function(e){var t=this;"tipLabels"in this.groups?this.groups.tipLabels.selectAll("*").remove():this.groups.tipLabels=this.svg.append("g").attr("id","tipLabels");var n=this.callbacks.tipLabel,r=this.params.tipLabelPadX,o=this.params.tipLabelPadY,i=this.nodes.filter((function(e){return e.terminal})).filter((function(e){return e.inView})),a=i.filter((function(e){return e.visibility===b.b}));if(a.length<this.params.tipLabelBreakL1){var s=this.params.tipLabelFontSizeL1;i.length<this.params.tipLabelBreakL3?s=this.params.tipLabelFontSizeL3:i.length<this.params.tipLabelBreakL2&&(s=this.params.tipLabelFontSizeL2),window.setTimeout((function(){t.groups.tipLabels.selectAll(".tipLabel").data(a).enter().append("text").attr("x",(function(e){return e.xTip+r})).attr("y",(function(e){return e.yTip+o})).text((function(e){return n(e)})).attr("class","tipLabel").style("font-size",s.toString()+"px").style("visibility",(function(e){return e.visibility===b.b?"visible":"hidden"}))}),e)}},je.prototype.removeTipLabels=function(){"tipLabels"in this.groups&&this.groups.tipLabels.selectAll("*").remove()},je.prototype.hideGrid=ge.d,je.prototype.addGrid=ge.a,je.prototype.showTemporalSlice=ge.f,je.prototype.hideTemporalSlice=ge.e;var Se=je;function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Te=function(e){var t=e.name,n=e.value,r=e.padBelow,i=void 0!==r&&r;return o.a.createElement("div",{style:{paddingBottom:i?"15px":"10px"},key:t},o.a.createElement("span",{style:{fontWeight:"500"}},t+" "),n?Array.isArray(n)?n.map((function(e){return o.a.createElement("div",{key:e,style:{fontWeight:"300",marginLeft:"0em"}},e)})):o.a.createElement("span",{style:{fontWeight:"300"}},n):null)},Ee=function(e){var t=e.name;return o.a.createElement("div",{style:u.e.tooltipHeading},t)},Ce=function(e){var t=e.node,n=e.t,r=[],i=Object(S.b)(t),a=Object(S.d)(t,"num_date");if(i&&r.push(o.a.createElement(Te,{name:n("Divergence")+":",value:Object(re.d)(i),key:"div"})),void 0!==a){var s=Object(m.d)(a),c=Object(S.d)(t,"num_date",{confidence:!0});if(c&&c[0]!==c[1]){r.push(o.a.createElement(Te,{name:n("Inferred Date")+":",value:s,key:"inferredDate"}));var l=[Object(m.d)(c[0]),Object(m.d)(c[1])];l[0]!==l[1]&&r.push(o.a.createElement(Te,{name:n("Date Confidence Interval")+":",value:"(".concat(l[0],", ").concat(l[1],")"),key:"dateConf"}))}else r.push(o.a.createElement(Te,{name:n("Date")+":",value:s,key:"date"}))}return r},ke=function(e){var t=e.node,n=e.colorBy,r=e.colorByConfidence,i=e.colorScale,a=e.colorings;if("num_date"===n)return null;if(Object(Y.d)(n)){var s=Object(Y.a)(n),c=s.aa?"Amino Acid at ".concat(s.gene," site ").concat(s.positions.join(", "),":"):"Nucleotide at pos ".concat(s.positions.join(", "),":");return o.a.createElement(Te,{name:c,value:Object(ae.g)(t,i)})}if("author"===n){var l=Object(S.c)(t);return l?o.a.createElement(o.a.Fragment,null,l.title?o.a.createElement(Te,{name:"Title:",value:l.title}):null,l.journal?o.a.createElement(Te,{name:"Journal:",value:l.journal}):null):null}var u=a&&a[n]&&a[n].title?a[n].title:n,p=function(){var e=Object(S.d)(t,n);return Object(b.z)(e)?o.a.createElement(Te,{name:"".concat(u,":"),value:e}):null};if(!0===r){var f=Object(S.d)(t,n,{confidence:!0});if(!f)return console.error("couldn't find confidence vals for ",n),null;if(!t.hasChildren&&1===Object.keys(f).length&&Object.values(f)[0]>.99)return p();var h=Object.keys(f).filter((function(e){return Object(b.z)(e)})).sort((function(e,t){return f[e]>f[t]?-1:1})).slice(0,4).map((function(e){return"".concat(e," (").concat((100*f[e]).toFixed(0),"%)")}));return h.length?o.a.createElement(Te,{name:"".concat(u," (confidence):"),value:h}):null}return p()},De=function(e){var t=e.node,n=e.t;if(!t.branch_attrs||!t.branch_attrs.mutations)return null;var r=[],i=t.branch_attrs.mutations;if(i.nuc&&i.nuc.length){var a=function(e){return"-"===e.slice(-1)||"-"===e.slice(0,1)},s=function(e){return"N"===e.slice(-1)||"N"===e.slice(0,1)},c=i.nuc.filter((function(e){return!a(e)&&!s(e)})),l=c.length,u=c.slice(0,Math.min(9,l)).join(", ");l>9&&(u+=" + "+n("{{x}} more",{x:l-9})),0!==l&&r.push(o.a.createElement(Te,{name:n("Nucleotide mutations")+":",value:u,key:"nuc"}));var p=i.nuc.filter((function(e){return a(e)})).length;p&&r.push(o.a.createElement(Te,{name:"".concat(n("Gaps"),' ("-"):'),value:p,key:"gaps"}));var f=i.nuc.filter((function(e){return s(e)})).length;f&&r.push(o.a.createElement(Te,{name:"Ns:",value:f,key:"Ns"}))}else r.push(o.a.createElement(Te,{name:n("No nucleotide mutations"),value:"",key:"nuc"}));var h,d=Object.keys(i).filter((function(e){return"nuc"!==e})),y={},m=!1,b=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=xe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(d);try{for(b.s();!(h=b.n()).done;){var g=h.value,v=i[g].filter((function(e){return!e.endsWith("X")}));v.length&&(y[g]=v,m=!0)}}catch(e){b.e(e)}finally{b.f()}if(m){var w=[];Object.keys(y).forEach((function(e,t){if(t<7){var r=e+":  "+y[e].slice(0,Math.min(3,y[e].length)).join(", ");y[e].length>3&&(r+=" + "+n("{{x}} more",{x:y[e].length-3})),w.push(r)}else 7===t&&w.push("(".concat(n("protein mutations truncated"),")"))})),r.push(o.a.createElement(Te,{name:n("AA mutations")+":",value:w,key:"aa"}))}else i.nuc&&i.nuc.length&&r.push(o.a.createElement(Te,{name:n("No amino acid mutations"),key:"aa"}));return r},Ne=function(e){var t=e.node,n=e.t,r=Le(1===t.fullTipCount?[n("Branch leading to"),t.name]:[n("Number of descendants")+":",t.fullTipCount],2),i=r[0],a=r[1];return o.a.createElement(Te,{name:i,value:a,padBelow:!0})},Ie=function(e){var t=e.node,n=e.t,r=Object(S.f)(t);if(!r)return null;var i=[];return r.selection_date&&i.push(o.a.createElement(Te,{name:n("Vaccine selected")+":",value:r.selection_date,key:"seldate"})),r.start_date&&i.push(o.a.createElement(Te,{name:n("Vaccine start date")+":",value:r.start_date,key:"startdate"})),r.end_date&&i.push(o.a.createElement(Te,{name:n("Vaccine end date")+":",value:r.end_date,key:"enddate"})),r.serum&&i.push(o.a.createElement(Te,{name:n("Serum strain"),key:"serum"})),i},Ae=function(e){var t=e.node,n=[],r=Object(S.c)(t);r&&n.push(o.a.createElement(Te,{name:"Author:",value:r.value,key:"author"}));var i=Object(S.d)(t,"gisaid_epi_isl");if(Object(b.z)(i)){var a=i.split("_")[2];n.push(o.a.createElement(Te,{name:"GISAID EPI ISL:",value:a,key:"gisaid_epi_isl"}))}return n},_e=function(e){var t=e.node,n=e.panelDims,r=e.children,i=-1===t.shell.that.params.orientation[0]?n.width/2+n.spaceBetweenTrees+t.shell.xTip:t.shell.xTip,a=t.shell.yTip,s={container:{position:"absolute",width:200,padding:"10px",borderRadius:10,zIndex:1e3,pointerEvents:"none",fontFamily:u.e.panel.fontFamily,fontSize:14,lineHeight:1,fontWeight:u.e.panel.fontWeight,color:u.e.panel.color,backgroundColor:u.e.panel.backgroundColor,wordWrap:"break-word",wordBreak:"break-word"}};return i<.6*n.width?s.container.left=i+10:s.container.right=n.width-i+10,a<.55*n.height?s.container.top=a+40:s.container.bottom=n.height-a+10,o.a.createElement("div",{style:s.container},o.a.createElement("div",{className:"tooltip",style:u.e.tooltip},r))},Pe=function(e){var t=e.children;return o.a.createElement("div",{style:u.e.comment},t)},ze=function(e){var t=e.hovered,n=e.colorBy,r=e.colorByConfidence,i=e.colorScale,a=e.panelDims,s=e.colorings,c=e.t;if(!t)return null;var l=t.d.n,u=Object(re.f)(l);return o.a.createElement(_e,{node:l,panelDims:a},".tip"===t.type?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ee,{name:l.name}),o.a.createElement(Ie,{node:l,t:c}),o.a.createElement(De,{node:l,t:c}),o.a.createElement(Ce,{node:l,t:c}),o.a.createElement(ke,{node:l,colorBy:n,colorByConfidence:r,colorScale:i,colorings:s}),o.a.createElement(Ae,{node:l}),o.a.createElement(Pe,null,c("Click on tip to display more info"))):o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne,{node:l,t:c}),o.a.createElement(De,{node:l,t:c}),o.a.createElement(Ce,{node:l,t:c}),o.a.createElement(ke,{node:l,colorBy:n,colorByConfidence:r,colorScale:i,colorings:s}),o.a.createElement(Pe,null,u===l.arrayIdx?c("Click to zoom out to parent clade"):c("Click to zoom into clade"))))},Re=function(e,t,n,r){var o={},i={},a=e?n.tree:n.treeToo,s=e?r.tree:r.treeToo;if(t.dateRange=[r.dateMinNumeric,r.dateMaxNumeric],a.selectedStrain&&!s.selectedStrain&&(i.selectedTip=null,i.hovered=null),!s.nodeColorsVersion||a.nodeColorsVersion===s.nodeColorsVersion&&r.colorByConfidence===n.colorByConfidence||(o.changeColorBy=!0,o.branchStroke=Object(ae.a)(s,r.colorByConfidence,r.colorBy),o.tipStroke=s.nodeColors,o.fill=s.nodeColors.map((function(e){return Object(F.e)(e).brighter([.65]).toString()}))),s.visibilityVersion&&a.visibilityVersion!==s.visibilityVersion&&(o.changeVisibility=!0,o.visibility=s.visibility),s.tipRadiiVersion&&a.tipRadiiVersion!==s.tipRadiiVersion&&(o.changeTipRadii=!0,o.tipRadii=s.tipRadii),a.branchThicknessVersion!==s.branchThicknessVersion&&(o.changeBranchThickness=!0,o.branchThickness=s.branchThickness),n.distanceMeasure!==r.distanceMeasure&&(o.newDistance=r.distanceMeasure),n.selectedBranchLabel!==r.selectedBranchLabel&&(o.newBranchLabellingKey=r.selectedBranchLabel),!1===r.temporalConfidence.display||!1===r.temporalConfidence.on?o.removeConfidences=!0:!0===r.temporalConfidence.display&&!0===r.temporalConfidence.on&&(o.showConfidences=!0),n.layout!==r.layout&&(o.newLayout=r.layout),a.idxOfInViewRootNode!==s.idxOfInViewRootNode){var c=t.nodes[s.idxOfInViewRootNode];o.zoomIntoClade=c,i.selectedBranch=0===s.idxOfInViewRootNode?null:c,i.selectedTip=null,i.hovered=null,"unrooted"===r.layout&&(o.updateLayout=!0)}n.width===r.width&&n.height===r.height||(o.svgHasChangedDimensions=!0),e&&n.showTreeToo!==r.showTreeToo&&(o.svgHasChangedDimensions=!0);var l=Object.keys(o).length;return l&&(o.animationInProgress="Pause"===r.animationPlayPauseButton,t.change(o)),[!!Object.keys(i).length&&i,l]},Be=function(e){e.visibility===b.b&&((1===e.that.params.orientation[0]?this.state.tree:this.state.treeToo).svg.select(Object(re.e)("#tip",e.n.name)).attr("r",(function(e){return e.r+4})),this.setState({hovered:{d:e,type:".tip"}}))},Fe=function(e){if(e.visibility===b.b&&!this.props.narrativeMode){this.setState({hovered:null,selectedTip:e});var t=1===e.that.params.orientation[0]?{treeIdx:e.n.arrayIdx}:{treeTooIdx:e.n.arrayIdx};this.props.dispatch(Object(d.f)({tipSelected:t,cladeSelected:this.props.tree.selectedClade}))}},We=function(e){if(e.visibility===b.b){if(function(e){e&&le(e,Object(ae.e)(e.parent.branchStroke),Object(ae.e)(e.branchStroke))}(e),this.props.temporalConfidence.exists&&this.props.temporalConfidence.display&&!this.props.temporalConfidence.on){var t=1===e.that.params.orientation[0]?this.state.tree:this.state.treeToo;"confidenceIntervals"in t.groups||(t.groups.confidenceIntervals=t.svg.append("g").attr("id","confidenceIntervals")),t.groups.confidenceIntervals.selectAll(".conf").data([e]).enter().call((function(e){return t.drawSingleCI(e,.5)}))}this.setState({hovered:{d:e,type:".branch"}})}},Ye=function(e){if(e.visibility===b.b&&!this.props.narrativeMode){var t,n,r=[void 0,void 0];if(e.n.branch_attrs&&void 0!==e.n.branch_attrs.labels&&(n=Object.keys(e.n.branch_attrs.labels).filter((function(e){return"aa"!==e}))),n&&n.length){var o=this.props.tree.availableBranchLabels;n.sort((function(e,t){return o.indexOf(e)-o.indexOf(t)}));var i=n[0];t="".concat(i,":").concat(e.n.branch_attrs.labels[i])}var a=Object(re.f)(e.n)===e.n.arrayIdx?Object(re.g)(e.n,this.props.distanceMeasure).arrayIdx:e.n.arrayIdx;1===e.that.params.orientation[0]?r[0]=a:r[1]=a,this.props.dispatch(Object(d.f)({root:r,cladeSelected:t}))}},Ve=function(e){(function(e){e&&le(e,e.parent.branchStroke,e.branchStroke)}(e),this.props.temporalConfidence.exists&&this.props.temporalConfidence.display&&!this.props.temporalConfidence.on)&&(1===e.that.params.orientation[0]?this.state.tree:this.state.treeToo).removeConfidence();this.state.hovered&&this.setState({hovered:null})},Ge=function(e){var t=1===e.that.params.orientation[0]?this.state.tree:this.state.treeToo;this.state.selectedTip||t.svg.select(Object(re.e)("#tip",e.n.name)).attr("r",(function(e){return e.r})),this.state.hovered&&this.setState({hovered:null})},He=function(e){(1===e.that.params.orientation[0]?this.state.tree:this.state.treeToo).svg.select(Object(re.e)("#tip",e.n.name)).attr("r",(function(e){return e.r})),this.setState({selectedTip:null,hovered:null}),this.props.dispatch(Object(d.f)({tipSelected:{clear:!0},cladeSelected:this.props.tree.selectedClade}))},Ue=n("AKWm"),qe=(n("sQjb"),function(e,t,n,r){var o=t?e.domRefs.mainTree:e.domRefs.secondTree,i=t?r.tree:r.treeToo;i.loaded?n.render(Object(Ue.a)(o),r.layout,r.distanceMeasure,{grid:!0,confidence:r.temporalConfidence.display,branchLabelKey:r.selectedBranchLabel,orientation:t?[1,1]:[-1,1],tipLabels:!0,showTipLabels:!0},{onTipHover:Be.bind(e),onTipClick:Fe.bind(e),onBranchHover:We.bind(e),onBranchClick:Ye.bind(e),onBranchLeave:Ve.bind(e),onTipLeave:Ge.bind(e),tipLabel:function(e){return e.n.name}},i.branchThickness,i.visibility,r.temporalConfidence.on,i.vaccines,Object(ae.a)(i,r.colorByConfidence,r.colorBy),i.nodeColors,i.nodeColors.map((function(e){return Object(F.e)(e).brighter([.65]).toString()})),i.tipRadii,[r.dateMinNumeric,r.dateMaxNumeric]):console.warn("can't run renderTree (not loaded)")});function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(a,e);var t,n,r,i=et(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={left:0,top:31,lookup:void 0,drawn:!1},t.timeout=!1,t}return t=a,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.width!==e.width||this.props.height!==e.height||this.props.leftTreeName!==e.leftTreeName||this.props.rightTreeName!==e.rightTreeName}},{key:"drawLines",value:function(e){e||(e=this.props);var t=e.lookup.length>750?.25:e.lookup.length>100?.5:1;Object(Ue.a)(this.d3ref).selectAll("*").remove();var n=function(e){return function(t){var n=e.leftNodes[t[0]].shell,r=e.rightNodes[t[1]].shell;return"M ".concat(n.xTip,",").concat(n.yTip," H ").concat(e.width/2-e.spaceBetweenTrees/2," L ").concat(e.width/2+e.spaceBetweenTrees/2,",").concat(r.yTip," H ").concat(e.width/2+e.spaceBetweenTrees/2+r.xTip)}}(e);Object(Ue.a)(this.d3ref).selectAll(".tangleLine").data(e.lookup).enter().append("path").attr("class","tangleLine").attr("d",n).attr("stroke-width",t).attr("stroke",(function(t){return e.colors[t[0]]})).attr("fill","none")}},{key:"componentWillReceiveProps",value:function(e){!this.state.drawn&&e.rightNodes[0].shell&&(this.drawLines(e),this.setState({drawn:!0}))}},{key:"componentDidMount",value:function(){!this.state.drawn&&this.props.rightNodes[0].shell&&(this.drawLines(this.props),this.setState({drawn:!0}))}},{key:"componentDidUpdate",value:function(e){this.props.width===e.width&&this.props.height===e.height||(this.timeout?window.clearTimeout(this.timeout):Object(Ue.a)(this.d3ref).selectAll(".tangleLine").remove(),this.timeout=window.setTimeout(this.drawLines.bind(this),1e3))}},{key:"render",value:function(){var e=this,t={position:"absolute",top:5,zIndex:100,fontSize:16,color:"#000",fontWeight:500},n=[this.props.width/2-this.props.spaceBetweenTrees/2,this.props.width/2+this.props.spaceBetweenTrees/2];return o.a.createElement("div",{id:"TangleContainer"},o.a.createElement("div",{id:"MainTreeTitle",style:Je(Je({},t),{},{left:n[0],transform:"translateX(-100%)"})},this.props.leftTreeName),o.a.createElement("div",{id:"SecondTreeTitle",style:Je(Je({},t),{},{left:n[1]})},this.props.rightTreeName),o.a.createElement("div",{id:"TangleSvgContainer",style:{position:"absolute",left:this.state.left,top:this.state.top,zIndex:100,pointerEvents:"none"}},o.a.createElement("svg",{id:"Tangle",style:{cursor:"default",width:this.props.width,height:this.props.height},ref:function(t){e.d3ref=t}})))}}])&&Ke(t.prototype,n),r&&Ke(t,r),a}(o.a.Component),ot=n("1hPQ"),it=function(e,t){for(var n=0,r=0,o=0,i=0,a=0,s=0,c=0;c<t.nodes.length;c++){var l=t.nodes[c].n;if(!l.children&&e.strainToNode[l.name]){var u=e.strainToNode[l.name].n.yvalue,p=l.yvalue;n++,r+=u,o+=p,i+=Math.pow(u,2),a+=Math.pow(p,2),s+=u*p}}return i/=n,a/=n,((s/=n)-(r/=n)*(o/=n))/Math.sqrt((i-Math.pow(r,2))*(a-Math.pow(o,2)))},at=function(e,t){!function(e,t){for(var n=it(e,t),r=0;r<t.nodes.length;r++){var o=t.nodes[r],i=o.n;if(o.children){for(var a=i,s=function(){var e=a.children[0];a.children.forEach((function(t){t.yvalue<e.yvalue&&(e=t)})),a=e};a.hasChildren;)s();var c=a.yvalue-1;o.children.reverse(),i.children.reverse(),Object(re.i)(o,c);var l=it(e,t);n>l?(o.children.reverse(),i.children.reverse(),Object(re.i)(o,c)):n=l}}}(e,t),Object(re.h)(t.nodes)};function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bt(e);if(t){var o=bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yt(this,n)}}function yt(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?mt(e):t}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(a,e);var t,n,r,i=dt(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),gt(mt(t=i.call(this,e)),"getStyles",(function(){var e=0!==t.props.tree.idxOfInViewRootNode||0!==t.props.treeToo.idxOfInViewRootNode;return{resetTreeButton:{zIndex:100,position:"absolute",right:5,top:0,cursor:e?"pointer":"auto",color:e?u.a:u.f}}})),t.domRefs={mainTree:void 0,secondTree:void 0},t.tangleRef=void 0,t.state={hover:null,selectedBranch:null,selectedTip:null,tree:null,treeToo:null},t.clearSelectedTip=He.bind(mt(t)),t.redrawTree=function(){t.props.dispatch(Object(d.f)({root:[0,0]}))},t}return t=a,(n=[{key:"setUpAndRenderTreeToo",value:function(e,t){t.treeToo=new Se(e.treeToo.nodes,"RIGHT",e.treeToo.idxOfInViewRootNode),b.g&&at(t.tree,t.treeToo),qe(this,!1,t.treeToo,e)}},{key:"componentDidMount",value:function(){if(this.props.tree.loaded){var e={};e.tree=new Se(this.props.tree.nodes,"LEFT",this.props.tree.idxOfInViewRootNode),qe(this,!0,e.tree,this.props),this.props.showTreeToo&&this.setUpAndRenderTreeToo(this.props,e),this.setState(e)}}},{key:"componentDidUpdate",value:function(e){var t={},n=!1,r=ut(Re(!0,this.state.tree,e,this.props),2),o=r[0],i=r[1];if(o&&(t=o),e.showTreeToo!==this.props.showTreeToo)this.props.showTreeToo?(this.state.treeToo&&this.state.treeToo.clearSVG(),t.tree=this.state.tree,this.setUpAndRenderTreeToo(this.props,t),this.tangleRef&&this.tangleRef.drawLines()):t.treeToo=null;else if(this.state.treeToo){var a=ut(Re(!1,this.state.treeToo,e,this.props),2);a[0],n=a[1]}this.tangleRef&&(i||n)&&this.tangleRef.drawLines(),Object.keys(t).length&&this.setState(t)}},{key:"renderTreeDiv",value:function(e){var t=this,n=e.width,r=e.height,i=e.mainTree;return o.a.createElement("svg",{id:i?"MainTree":"SecondTree",style:{pointerEvents:"auto",cursor:"default",userSelect:"none"},width:n,height:r,ref:function(e){i?t.domRefs.mainTree=e:t.domRefs.secondTree=e}})}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.getStyles(),r=this.props.showTreeToo?(this.props.width-100)/2:this.props.width;return o.a.createElement(h.a,{center:!0,title:t("Phylogeny")},o.a.createElement(ot.a,null,o.a.createElement(te,{width:this.props.width})),o.a.createElement(ze,{hovered:this.state.hovered,colorBy:this.props.colorBy,colorByConfidence:this.props.colorByConfidence,colorScale:this.props.colorScale,colorings:this.props.metadata.colorings,panelDims:{width:this.props.width,height:this.props.height,spaceBetweenTrees:100},t:t}),o.a.createElement(R,{goAwayCallback:this.clearSelectedTip,tip:this.state.selectedTip,colorings:this.props.metadata.colorings,t:t}),this.props.showTangle&&this.state.tree&&this.state.treeToo?o.a.createElement(rt,{ref:function(t){e.tangleRef=t},width:this.props.width,height:this.props.height,lookup:this.props.treeToo.tangleTipLookup,leftNodes:this.props.tree.nodes,rightNodes:this.props.treeToo.nodes,colors:this.props.tree.nodeColors,cVersion:this.props.tree.nodeColorsVersion,vVersion:this.props.tree.visibilityVersion,metric:this.props.distanceMeasure,spaceBetweenTrees:100,leftTreeName:this.props.tree.name,rightTreeName:this.props.showTreeToo}):null,this.renderTreeDiv({width:r,height:this.props.height,mainTree:!0}),this.props.showTreeToo?o.a.createElement("div",{id:"treeSpacer",style:{width:100}}):null,this.props.showTreeToo?this.renderTreeDiv({width:r,height:this.props.height,mainTree:!1}):null,this.props.narrativeMode?null:o.a.createElement("button",{style:lt(lt({},u.o),n.resetTreeButton),onClick:this.redrawTree},t("Reset Layout")))}}])&&ft(t.prototype,n),r&&ft(t,r),a}(o.a.Component),wt=Object(f.a)()(vt);function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||St(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=St(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function St(e,t){if(e){if("string"==typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(e,t):void 0}}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xt,Ot=function(e){return Object.prototype.hasOwnProperty.call(e,"paper_url")&&!e.paper_url.endsWith("/")&&"?"!==e.paper_url},Tt="text/plain;charset=utf-8;",Et="text/tab-separated-values;charset=utf-8;",Ct="image/svg+xml;charset=utf-8",kt=function(e,t,n){var r=new Blob([n],{type:t}),o=document.createElement("a"),i=URL.createObjectURL(r);o.setAttribute("href",i),o.setAttribute("download",e),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},Dt=function(e,t,n,r,o,i){var a,s={},c=["Strain"],l=jt(n.entries());try{var u=function(){var e=Mt(a.value,2),t=e[0],n=e[1];if(n.hasChildren)return"continue";if(o&&i&&(i[t]!==b.b||!n.inView))return"continue";if(s[n.name]={Strain:n.name},!n.node_attrs)return"continue";var r,l=["author","div","num_date","vaccine","accession"],u=jt(Object.keys(n.node_attrs).filter((function(e){return!l.includes(e)})));try{for(u.s();!(r=u.n()).done;){var p=r.value;c.includes(p)||c.push(p);var f=Object(S.d)(n,p);f&&("string"==typeof f?s[n.name][p]=f:"number"==typeof f&&(s[n.name][p]=parseFloat(f).toFixed(2)))}}catch(e){u.e(e)}finally{u.f()}var h=Object(S.d)(n,"num_date");if(h){var d="Collection Data";c.includes(d)||c.push(d);var y=Object(S.d)(n,"num_date",{confidence:!0});y&&y[0]!==y[1]?s[n.name][d]="".concat(Object(m.d)(h)," (").concat(Object(m.d)(y[0])," - ").concat(Object(m.d)(y[1]),")"):s[n.name][d]=Object(m.d)(h)}var g=Object(S.c)(n);if(g){c.includes("Author")||c.push("Author"),s[n.name].Author=g.value,Ot(g)&&(s[n.name].Author+=" (".concat(g.paper_url,")"))}var v=Object(S.f)(n);if(v&&v.selection_date){var w="Vaccine Selection Date";c.includes(w)||c.push(w),s[n.name][w]=v.selection_date}var M=Object(S.a)(n);if(M){c.includes("Accession")||c.push("Accession"),s[n.name].Accession=M}};for(l.s();!(a=l.n()).done;)u()}catch(e){l.e(e)}finally{l.f()}for(var p=[c.map((function(e){return r&&r[e]&&r[e].title?r[e].title:e})).join("\t")],f=0,h=Object.values(s);f<h.length;f++){var d,y=h[f],g=[],v=jt(c);try{for(v.s();!(d=v.n()).done;){var w=d.value;g.push(y[w]||"")}}catch(e){v.e(e)}finally{v.f()}p.push(g.join("\t"))}var M="".concat(t).concat(o?"_selected_":"_","metadata.tsv");kt(M,Et,p.join("\n")),e(Object(B.b)({message:"Metadata exported to ".concat(M)}))},Nt=function(e,t,n,r){var o=r?t+"_timetree.nwk":t+"_tree.nwk",i=r?"TimeTree":"Tree";kt(o,Tt,function(e,t){return function e(n,r){var o="";if(n.hasChildren){var i=[];n.children.forEach((function(r){var o=e(r,t?Object(S.d)(n,"num_date"):Object(S.b)(n));i.push(o)})),o+="("+i.join(",")+")"+n.name+":",o+=(t?Object(S.d)(n,"num_date"):Object(S.b)(n))-r}else{var a=n.name+":";o+=a+=(t?Object(S.d)(n,"num_date"):Object(S.b)(n))-r}return o}(e,0)+";"}(n,r)),e(Object(B.b)({message:i+" written to "+o}))},It=function(e){var t=e.match(/^(<.+?>)(.+)<\/.+?>$/);if(t){var n=t[1].match(/width.+?([0-9.]+).+height.+?([0-9.]+)/);if(n){var r=t[1].match(/viewBox="([0-9-]+)\s([0-9-]+)\s([0-9-]+)\s([0-9-]+)"/);return{x:0,y:0,viewbox:r?r.slice(1):void 0,width:parseFloat(n[1]),height:parseFloat(n[2]),inner:t[2]}}}},At=function(e,t,n){var r='<svg id="'.concat(t,'" width="').concat(n.width,'" height="').concat(n.height,'" x="').concat(n.x,'" y="').concat(n.y,'">');e.push(r),e.push(n.inner),e.push("</svg>")},_t=function(e,t,n,r,o,i){var a=[],s={tree:void 0,map:void 0,entropy:void 0,frequencies:void 0};if(-1!==n.indexOf("tree")){try{s.tree=It((new XMLSerializer).serializeToString(document.getElementById("MainTree"))),s.treeLegend=It((new XMLSerializer).serializeToString(document.getElementById("TreeLegendContainer")))}catch(e){s.tree=void 0,a.push("tree"),console.error("Tree SVG save error:",e)}if(s.tree&&document.getElementById("SecondTree"))try{s.secondTree=It((new XMLSerializer).serializeToString(document.getElementById("SecondTree"))),document.getElementById("Tangle")&&(s.tangle=It((new XMLSerializer).serializeToString(document.getElementById("Tangle"))))}catch(e){a.push("second tree / tanglegram"),console.error("Second Tree / tanglegram SVG save error:",e)}}if(-1!==n.indexOf("entropy"))try{s.entropy=It((new XMLSerializer).serializeToString(document.getElementById("d3entropyParent"))),s.entropy.inner=s.entropy.inner.replace(/<text/g,'<text class="txt"'),s.entropy.inner='<style>.txt { font-family: "Lato", "Helvetica Neue", "Helvetica", "sans-serif"; }</style>'.concat(s.entropy.inner)}catch(e){s.entropy=void 0,a.push("entropy"),console.error("Entropy SVG save error:",e)}if(-1!==n.indexOf("frequencies"))try{s.frequencies=It((new XMLSerializer).serializeToString(document.getElementById("d3frequenciesSVG")))}catch(e){s.frequencies=void 0,a.push("frequencies"),console.error("Frequencies SVG save error:",e)}-1!==n.indexOf("map")&&i&&(s.map={x:0,y:0,viewbox:void 0,width:parseFloat(i.mapDimensions.x),height:parseFloat(i.mapDimensions.y),inner:i.mapSvg});var c=[],l=function(e,t,n){var r=0,o=0;for(var i in e.secondTree&&(e.secondTree.x=100+e.tree.width,e.tree.width+=100+e.secondTree.width),e.tree&&e.map?"grid"===t?(r=e.tree.width+50+e.map.width,o=Math.max(e.tree.height,e.map.height),e.map.x=e.tree.width+50):(r=Math.max(e.tree.width,e.map.width),o=e.tree.height+50+e.map.height,e.map.y=e.tree.height+50):e.tree?(r=e.tree.width,o=e.tree.height):e.map&&(r=e.map.width,o=e.map.height),e.entropy&&(r<e.entropy.width?r=e.entropy.width:e.entropy.x=(r-e.entropy.width)/2,o?(e.entropy.y=o+50,o+=50+e.entropy.height):o=e.entropy.height),e.frequencies&&(r<e.frequencies.width?r=e.frequencies.width:e.frequencies.x=(r-e.frequencies.width)/2,o?(e.frequencies.y=o+50,o+=50+e.frequencies.height):o=e.frequencies.height),e)e[i]&&(e[i].x+=50,e[i].y+=50);o+=100;var a=36*n+20;return{width:r+=100,height:o+=a,padding:50,textY:o-a,textHeight:a}}(s,r,o.length);for(var u in c.push('<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="'.concat(l.width,'" height="').concat(l.height,'">')),s)s[u]&&At(c,u,s[u]);c.push('<foreignObject x="'.concat(l.padding,'" y="').concat(l.height-l.textHeight,'" height="').concat(l.textHeight,'" width="').concat(l.width-2*l.padding,'">')),o.forEach((function(e){c.push('<p xmlns="http://www.w3.org/1999/xhtml" style="font-family:lato,sans-serif;">'),c.push(e),c.push("</p>")})),c.push("</foreignObject>"),c.push("</svg>"),kt(t+".svg",Ct,c.join("\n")),a.length?e(Object(B.d)({message:"Vector image saved",details:"Saved to ".concat(t,".svg, however there were errors with ").concat(a.join(", "))})):e(Object(B.b)({message:"Vector image saved",details:t+".svg"}))},Pt=function(e,t,n,r,o){-1!==n.indexOf("map")?window.L.getMapSvg(_t.bind(void 0,e,t,n,r,o)):_t(e,t,n,r,o,void 0)},zt=function(e){var t=e.theme,n=e.selected,r=e.width,i=n?t.selectedColor:t.unselectedColor;return o.a.createElement("svg",{width:r,height:r+5},o.a.createElement("g",{transform:"translate(0,2)"},o.a.createElement("svg",{width:r,height:r,viewBox:"16 19 27 22"},o.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)"},o.a.createElement("polyline",{id:"Path-3",stroke:i,points:"2.94117647 12.8571429 2.94117647 18.6083984 17.8459616 18.6083984 17.8459616 16.0260882 24.870031 16.0260882"}),o.a.createElement("polyline",{id:"Path-4",stroke:i,points:"17.8500004 18.5714286 17.8500004 20 25.0119374 20"}),o.a.createElement("polyline",{id:"Path-5",stroke:i,points:"2.94117647 12.8571429 3.00303284 7.21191058 10.2360102 7.11220045 10.4159559 2.99881623 17.1561911 2.93803403 17.1561911 0 24.313534 0"}),o.a.createElement("polyline",{id:"Path-6",stroke:i,points:"17.1599998 2.85714286 17.1599998 4.28571429 24.512941 4.28571429"}),o.a.createElement("path",{d:"M0,12.8571429 L2.94117647,12.8571429",id:"Path-6",stroke:i}),o.a.createElement("polyline",{id:"Path-7",stroke:i,points:"10.2941176 7.14285714 10.2941176 11.4285714 24.5454676 11.4285714"})))))},Rt=function(e){var t=e.theme,n=e.selected,r=e.width,i=n?t.selectedColor:t.unselectedColor;return o.a.createElement("svg",{width:r,height:r+5},o.a.createElement("g",{transform:"translate(0,6)"},o.a.createElement("svg",{width:r,height:r,viewBox:"0 0 30 30 "},o.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},o.a.createElement("rect",{fill:"none",stroke:i,x:"1",y:"1",width:"14",height:"17"}),o.a.createElement("rect",{fill:"none",stroke:i,x:"15",y:"1",width:"14",height:"17"}),o.a.createElement("rect",{fill:"none",stroke:i,x:"1",y:"18",width:"28",height:"8"})))))};function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qt(e);if(t){var o=qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ht(this,n)}}function Ht(e,t){return!t||"object"!==Bt(t)&&"function"!=typeof t?Ut(e):t}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qt,Xt=Object(c.d)(zt),Jt=Object(c.d)(Rt),Zt=Object(c.d)((function(e){var t=e.theme,n=e.selected,r=e.width,i=n?t.selectedColor:t.unselectedColor;return o.a.createElement("svg",{width:r,height:r+5},o.a.createElement("g",{transform:"translate(0,7)"},o.a.createElement("svg",{width:r,height:r,viewBox:"0 0 30 30 "},o.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("line",{stroke:i,x1:"3.3",y1:"3.8",x2:"27.7",y2:"3.8"}),o.a.createElement("line",{stroke:i,x1:"3.3",y1:"9.2",x2:"27.7",y2:"9.2"}),o.a.createElement("line",{stroke:i,x1:"3.3",y1:"14.5",x2:"27.7",y2:"14.5"}),o.a.createElement("line",{stroke:i,x1:"3.3",y1:"19.9",x2:"27.7",y2:"19.9"}),o.a.createElement("line",{stroke:i,x1:"3.3",y1:"25.2",x2:"27.7",y2:"25.2"})))))})),Kt={nextstrain:{author:"Hadfield et al",title:"Nextstrain: real-time tracking of pathogen evolution",year:"2018",journal:"Bioinformatics",href:"https://doi.org/10.1093/bioinformatics/bty407"},treetime:{author:"Sagulenko et al",title:"TreeTime: Maximum-likelihood phylodynamic analysis",journal:"Virus Evolution",year:"2017",href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5758920/"},titers:{author:"Neher et al",titleJournalYear:"Prediction, dynamics, and visualization of antigenic phenotypes of seasonal influenza viruses",journal:"PNAS",year:"2016",href:"http://www.pnas.org/content/113/12/E1701.abstract"}},$t=Object(s.b)((function(e){return{browserDimensions:e.browserDimensions.browserDimensions,show:e.controls.showDownload,colorBy:e.controls.colorBy,metadata:e.metadata,entropy:e.entropy,mutType:e.controls.mutType,tree:e.tree,nodes:e.tree.nodes,visibleStateCounts:e.tree.visibleStateCounts,filters:e.controls.filters,visibility:e.tree.visibility,panelsToDisplay:e.controls.panelsToDisplay,panelLayout:e.controls.panelLayout}}))(xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(a,e);var t,n,r,i=Gt(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).getStyles=function(e,t){return{behind:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"all",zIndex:2e3,backgroundColor:"rgba(80, 80, 80, .20)",display:"flex",justifyContent:"center",alignItems:"center",wordWrap:"break-word",wordBreak:"break-word"},title:{fontWeight:500,fontSize:32,marginTop:"20px",marginBottom:"20px"},secondTitle:{fontWeight:500,marginTop:"0px",marginBottom:"20px"},modal:{marginLeft:200,marginTop:130,width:e-400,height:t-260,borderRadius:2,backgroundColor:"rgba(250, 250, 250, 1)",overflowY:"auto"},break:{marginBottom:"10px"}}},t.dismissModal=t.dismissModal.bind(Ut(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this;j.a.bind("d",(function(){Pt(e.props.dispatch,e.getFilePrefix(),e.props.panelsToDisplay,e.props.panelLayout,e.makeTextStringsForSVGExport())}))}},{key:"getRelevantPublications",value:function(){var e=[Kt.nextstrain,Kt.treetime];return-1!==["cTiter","rb","ep","ne"].indexOf(this.props.colorBy)&&e.push(Kt.titers),e}},{key:"formatPublications",value:function(e){return o.a.createElement("span",null,o.a.createElement("ul",null,e.map((function(e){return o.a.createElement("li",{key:e.href},o.a.createElement("a",{href:e.href,target:"_blank",rel:"noreferrer noopener"},e.author,", ",e.title,", ",o.a.createElement("i",null,e.journal)," (",e.year,")"))}))))}},{key:"getFilePrefix",value:function(){return"nextstrain_"+window.location.pathname.replace(/^\//,"").replace(/:/g,"-").replace(/\//g,"_")}},{key:"makeTextStringsForSVGExport",value:function(){var e=[];e.push(this.props.metadata.title),e.push("Last updated ".concat(this.props.metadata.updated));var t=window.location.href.replace(/&/g,"&amp;");return e.push('Downloaded from <a href="'.concat(t,'">').concat(t,"</a> on ").concat((new Date).toLocaleString())),e.push(this.createSummaryWrapper()),e.push(""),e.push("".concat(this.props.t("Data usage part 1"),' A full list of sequence authors is available via <a href="https://nextstrain.org">nextstrain.org</a>.')),e.push("Visualizations are licensed under CC-BY."),e.push("Relevant publications:"),this.getRelevantPublications().forEach((function(t){e.push('<a href="'.concat(t.href,'">').concat(t.author,", ").concat(t.title,", ").concat(t.journal," (").concat(t.year,")</a>"))})),e}},{key:"getNumUniqueAuthors",value:function(e){var t=e.map((function(e){return Object(S.c)(e)})).filter((function(e){return e&&e.value}));return new Set(t.map((function(e){return e.value}))).size}},{key:"downloadButtons",value:function(){var e=this,t=Pn(this.props.nodes,this.props.tree.visibility),n=this.getNumUniqueAuthors(this.props.nodes),r=this.getFilePrefix(),i=[["Tree","Phylogenetic tree in Newick format with branch lengths in units of divergence.",o.a.createElement(Xt,{width:25,selected:!0}),function(){return Nt(e.props.dispatch,r,e.props.nodes[0],!1)}],["TimeTree","Phylogenetic tree in Newick format with branch lengths measured in years.",o.a.createElement(Xt,{width:25,selected:!0}),function(){return Nt(e.props.dispatch,r,e.props.nodes[0],!0)}],["All Metadata (TSV)","Per-sample metadata for all samples in the dataset (n = ".concat(this.props.metadata.mainTreeNumTips,")."),o.a.createElement(Zt,{width:25,selected:!0}),function(){return Dt(e.props.dispatch,r,e.props.nodes,e.props.metadata.colorings,!1,null)}]];if(t>0&&i.push(["Selected Metadata (TSV)","Per-sample metadata for strains which are currently displayed (n = ".concat(t,"/").concat(this.props.metadata.mainTreeNumTips,")."),o.a.createElement(Zt,{width:25,selected:!0}),function(){return Dt(e.props.dispatch,r,e.props.nodes,e.props.metadata.colorings,!0,e.props.tree.visibility)}]),function(e){for(var t=0;t<e.nodes.length;t++)if(Object(S.c)(e.nodes[t]))return!0;return!1}(this.props.tree)&&i.push(["Author Metadata (TSV)","Metadata for all samples in the dataset (n = ".concat(this.props.metadata.mainTreeNumTips,") grouped by their ").concat(n," authors."),o.a.createElement(Zt,{width:25,selected:!0}),function(){return function(e,t,n){var r=[];r.push(["Author","n (strains)","publication title","journal","publication URL","strains"].join("\t"));var o=t+"_authors.tsv",i={};n.nodes.filter((function(e){return!e.hasChildren})).forEach((function(e){var t=Object(S.c)(e);t&&(i[t.value]?(i[t.value].count+=1,i[t.value].strains.push(e.name)):i[t.value]={author:t.value,title:t.title||"unknown",journal:t.journal||"unknown",url:Ot(t)?t.paper_url:"unknown",count:1,strains:[e.name]})})),Object.values(i).forEach((function(e){r.push([e.author,e.count,e.title,e.journal,e.url,e.strains.join(",")].join("\t"))})),kt(o,Et,r.join("\n")),e(Object(B.b)({message:"Author metadata exported",details:o}))}(e.props.dispatch,r,e.props.tree)}]),this.props.entropy.loaded){var a="The data behind the diversity panel";a+=" showing ".concat(this.props.entropy.showCounts?"a count of changes across the tree":"normalised shannon entropy"),a+="nuc"===this.props.mutType?" per nucleotide.":" per codon.",t!==this.props.metadata.mainTreeNumTips&&(a+=" Restricted to strains which are currently displayed (n = ".concat(t,"/").concat(this.props.metadata.mainTreeNumTips,").")),i.push(["Genetic diversity data (TSV)",a,o.a.createElement(Zt,{width:25,selected:!0}),function(){return function(e,t,n,r){var o="nuc"===r?["base"]:["gene\tposition"];o[0]+=n.showCounts?"\tevents":"\tentropy",n.bars.forEach((function(e){"nuc"===r?o.push("".concat(e.x,"\t").concat(e.y)):o.push("".concat(e.prot,"\t").concat(e.codon,"\t").concat(e.y))}));var i="".concat(t,"_diversity.tsv");kt(i,Et,o.join("\n")),e(Object(B.b)({message:"Diversity data exported to ".concat(i)}))}(e.props.dispatch,r,e.props.entropy,e.props.mutType)}])}i.push(["Screenshot (SVG)","Screenshot of the current nextstrain display in SVG format; CC-BY licensed.",o.a.createElement(Jt,{width:25,selected:!0}),function(){return Pt(e.props.dispatch,r,e.props.panelsToDisplay,e.props.panelLayout,e.makeTextStringsForSVGExport())}]);var s=Object.assign({},u.g,{backgroundColor:"rgba(0,0,0,0)",paddingLeft:"10px",color:"white",minWidth:"300px",textAlign:"left"}),c={fontStyle:"italic",fontSize:"14px",color:"lightgray"};return o.a.createElement("div",{style:{display:"block",justifyContent:"space-around",marginLeft:"25px",width:"100%"}},o.a.createElement("div",{style:{width:"100%"}},i.map((function(e){return o.a.createElement("div",{key:e[0],onClick:e[3],style:{cursor:"pointer"}},e[2],o.a.createElement("button",{style:s,name:e[0]},e[0]),o.a.createElement("div",{style:{display:"inline-block",height:"30px",verticalAlign:"top",paddingTop:"6px"}},o.a.createElement("label",{style:c,htmlFor:e[0]},e[1])))}))))}},{key:"dismissModal",value:function(){this.props.dispatch({type:g.x})}},{key:"createSummaryWrapper",value:function(){return zn(this.props.metadata.mainTreeNumTips,this.props.nodes,this.props.filters,this.props.visibility,this.props.visibleStateCounts,void 0,this.props.t)}},{key:"render",value:function(){var e=this.props.t;if(!this.props.show)return null;var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){Wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u.e.panel);t.width=.66*this.props.browserDimensions.width,t.maxWidth=t.width,t.maxHeight=.66*this.props.browserDimensions.height,t.fontSize=14,t.lineHeight=1.4;var n=this.props.metadata;return o.a.createElement("div",{style:u.e.modalContainer,onClick:this.dismissModal},o.a.createElement("div",{style:t,onClick:function(e){return E(e)}},o.a.createElement("p",{style:u.e.topRightMessage},"(",e("click outside this box to return to the app"),")"),o.a.createElement("div",{style:u.e.modalSubheading},n.title," (",e("last updated")," ",n.updated,")"),o.a.createElement("div",null,this.createSummaryWrapper()),o.a.createElement("div",{style:u.e.break})," "+e("A full list of sequence authors is available via the TSV files below"),o.a.createElement("div",{style:u.e.break}),mn({},{preamble:{fontWeight:300},acknowledgments:{fontWeight:300}}),o.a.createElement("div",{style:u.e.modalSubheading},e("Data usage policy")),e("Data usage part 1")+" "+e("Data usage part 2"),o.a.createElement("div",{style:u.e.modalSubheading},e("Please cite the authors who contributed genomic data (where relevant), as well as")+":"),this.formatPublications(this.getRelevantPublications()),o.a.createElement("div",{style:u.e.modalSubheading},e("Download data"),":"),this.downloadButtons()))}}])&&Yt(t.prototype,n),r&&Yt(t,r),a}(o.a.Component))||xt,en=Object(f.a)()($t),tn=n("Nf4T");function nn(e,t){if(window.location.pathname.includes("inrb-drc"))return o.a.createElement("div",null,o.a.createElement("div",null,"This work is made possible by the open sharing of genetic data by research groups."),o.a.createElement("div",{className:"acknowledgments"},"These sequences were generated by the Democratic Republic of the Congo Sequencing Consortium led by the Institut National de Recherche Biomédicales (INRB), Kinshasa, DRC, partnered with the United States Army Medical Reseach Insititute of Infectious Diseases (USAMRIID), Maryland, USA; University of Nebraska Medical Center (UNMC), Nebraska, USA; Institut Pasteur de Dakar, Dakar, Senegal; TransVIHMI, Institut de Recherche pour le Développement (IRD), Institut National de la Santé et de la Recherche Médicale (INSERM), Université de Montpellier, Montpellier, France."),o.a.createElement("div",{className:"acknowledgments"},"These data were shared with the Ministry of Health of the DRC, and with the public via this ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://virological.org/t/drc-2018-viral-genome-characterization/230"},"virological.org")," post, which is continually updated. If you intend to use these sequences prior to publication, please contact Drs. Muyembe-Tamfum and Ahuka to coordinate."));if(!window.location.pathname.includes("community")){if(window.location.pathname.includes("ebola"))return function(e){return o.a.createElement("div",null,e,o.a.createElement("div",{className:"acknowledgments"},"Special thanks to Nick Loman, Matt Cotten, Ian Goodfellow and Paul Kellam for spearheading data sharing efforts during the outbreak. For a more complete phylogeographic analysis of these data see ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://dx.doi.org/10.1038/nature22040"},"Dudas et al"),". Curated data used in the paper are available at ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://github.com/ebov/space-time"},"github.com/ebov/space-time"),". The animation shown here was inspired by ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://youtu.be/eWnIhWUpQiQ"},"a work")," by ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://bedford.io/team/gytis-dudas/"},"Gytis Dudas"),"."))}(t);if(window.location.pathname.includes("zika"))return function(e){return o.a.createElement("div",null,e,o.a.createElement("div",{className:"acknowledgments"},"Special thanks to Nick Loman, Nathan Grubaugh, Kristof Theys, Nuno Faria, Kristian Andersen, Andrew Rambaut and Karl Erlandson for data sharing, comments and suggestions."))}(t);if(window.location.pathname.includes("mumps"))return function(e){return o.a.createElement("div",null,e,o.a.createElement("div",{className:"acknowledgments"},"Special thanks to Duah Alkam, Piroon Jenjaroenpun , Thidathip Wongsurawat, Zulema Udaondo, Preecha Patumcharoenpol, Michael Robeson, Dirk Haselow, William Mason, Intawat Nookaew, David Ussery, Se-Ran Jun, Jennifer Gardy, Shirlee Wohl, Jeff Joy, Patrick Stapleton, Nathan Yozwiak, Hayden Metsky, Agatha Jassem, Louise Moncla, Gytis Dudas and Pardis Sabeti for data sharing, comments and suggestions."))}(t);if(window.location.pathname.includes("lassa"))return function(e){return o.a.createElement("div",{className:"acknowledgments"},"This work is made possible by the open sharing of genetic data by research groups, including these groups currently collecting Lassa sequences:",o.a.createElement("p",null),o.a.createElement("a",{href:"http://acegid.org/"},"Christian Happi"),", ",o.a.createElement("a",{href:"https://www.sabetilab.org/"},"Pardis Sabeti"),", ",o.a.createElement("a",{href:"https://www.sabetilab.org/katherine-siddle/"},"Katherine Siddle")," and colleagues, whose data was shared via ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://virological.org/t/new-lassa-virus-genomes-from-nigeria-2015-2016/191"},"this viroligical.org post. "),"If you intend to use these sequences prior to publication, please contact them directly to coordinate. ",o.a.createElement("span",{className:"link",onClick:function(){return e(Object(d.a)("set","authors",["Odia_et_al"]))}},"Click here")," here to see these sequences in isolation.",o.a.createElement("p",null),"The Irrua specialist Teaching Hospital (ISTH) and Institute for Lassa Fever Research and Control (ILFRC), Irrua, Edo State, Nigeria;\n        The Bernhard-Nocht Institute for Tropical Medicine (BNITM), Hamburg, Germany;\n        Public Health England (PHE);\n        African Center of Excellence for Genomics of Infectious Disease (ACEGID ), Redeemer’s University, Ede, Nigeria;\n        Broad Institute of MIT and Harvard University (Cambridge, MA, USA).\n        For further details, including conditions of reuse, please contact ",o.a.createElement("a",{href:"mailto:epogbaini@yahoo.com"},"Ephraim Epogbaini"),", ",o.a.createElement("a",{href:"http://www.who.int/blueprint/about/stephan-gunther/en/"},"Stephan Günther")," and ",o.a.createElement("a",{href:"https://rega.kuleuven.be/cev/ecv/lab-members/PhilippeLemey.html"},"Philippe Lemey"),". Their data was first shared via ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://virological.org/t/2018-lasv-sequencing-continued/192/8"},"this viroligical.org post"),", which is continually updated. ",o.a.createElement("span",{className:"link",onClick:function(){return e(Object(d.a)("set","authors",["ISTH-BNITM-PHE"]))}},"Click here")," here to see these sequences in isolation.")}(e);if(window.location.pathname.includes("WNV/NA"))return function(e){return o.a.createElement("div",{className:"acknowledgments"},"This work is possible due to the groups who have made their data openly available for analysis -\n        with a special thanks to Nikos Gurfield, Saran Grewal, Chris Barker, Ying Fang and the Andersen Lab for making ",o.a.createElement("a",{href:"https://andersen-lab.com/secrets/data/west-nile-genomics/"},"their data")," available ahead of publication. ","We also thank Simon Dellicour, Sebastian Lequime, Bram Vrancken, Philippe Lemey, Karthik Gangavarapu, Nate Matteson, Sharada Saraf\n        and Nathan Grubaugh for curating the original dataset; and Zhe Zheng and Anderson Brito helping with the updates\n        The data is being maintained by ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://bedford.io/team/james-hadfield/"},"James Hadfield")," and ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://grubaughlab.com"},"Nathan Grubaugh's lab."),o.a.createElement("p",null),"Our goal is to promote sequencing and sharing of West Nile virus genomes to improve our understanding of virus spread and evolution.\n        To aid in this effort, Nathan Grubaugh, Ryan Smith, and Kristian Andersen have initiated a large study,\n        including >70 collaborators from >30 US states, to sequence ~4,000 West Nile virus genomes from across the country: ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://westnile4k.org/"},"WestNile 4K.")," Their website includes a complete list of collaborators and information on how to join the project.\n      To conduct such an ambitious sequencing project, they adapted their highly multiplexed PCR approach for ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.nature.com/articles/nprot.2017.066"},"Zika virus sequencing")," on the Illumina and Minion platforms for West Nile Virus circulating in North America. Their ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://grubaughlab.com/open-science/amplicon-sequencing/"},"sequencing protocol and primers")," are free to use.\n        If you have any questions about West Nile virus sequencing, or if you have unpublished data that you would like to share, please email ",o.a.createElement("a",{href:"emailto:grubaughlab@gmail.com"},"grubaughlab@gmail.com"),".",o.a.createElement("p",null),"All data shown here are coding-complete genomes.",o.a.createElement("p",null),"WNV is split into three phenotypically relevant strains - NY99, WN02 and SW03 (",o.a.createElement("span",{className:"link",onClick:function(){return e(Object(tn.a)("wnv_strain"))}},"click here")," to colour the tree by this). These strains are defined by these mutations (click to change the colouring of the tree):",o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"link",onClick:function(){return e(Object(tn.a)(Object(Y.c)({gene:"env",positions:[159]})))}},"env-V159A")," designates the switch from NY99 (the original sequence) to WN02."),o.a.createElement("li",null,o.a.createElement("span",{className:"link",onClick:function(){return e(Object(tn.a)(Object(Y.c)({gene:"NS4A",positions:[85]})))}},"NS4A-A85T")," designates the switch from WN02 to SW03 (WN02 displaced NY99; WN02 and SW03 co-circulate).")))}(e);if(window.location.pathname.includes("h7n9"))return o.a.createElement("div",{className:"acknowledgments"},"We thank the ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://gisaid.org"},"GISAID Initiative")," for enabling genomic surveillance of influenza and for providing a critical data sharing platform, and all of the groups who contribute to it.");if(window.location.pathname.includes("flu"))return o.a.createElement("div",null,o.a.createElement("div",{className:"acknowledgments"},"We thank the ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://gisaid.org"},"GISAID Initiative")," and the ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://www.who.int/influenza/gisrs_laboratory/en/"},"GISRS Network")," for critical surveillance efforts and open data sharing. Titer data used in antigenic analysis was generated by the ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.cdc.gov/flu/"},"Influenza Division at the US Centers for Disease Control and Prevention"),", the ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://www.crick.ac.uk/research/worldwide-influenza-centre"},"Worldwide Influenza Centre at the Francis Crick Institute"),", the ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"http://www.vidrl.org.au/"},"Victorian Infectious Diseases Reference Laboratory at the Australian Peter Doherty Institute for Infection and Immunity")," and the ",o.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.niid.go.jp/niid/en/flu-e.html"},"Influenza Virus Research Center at the Japan National Institute of Infectious Diseases"),"."),o.a.createElement("div",{className:"acknowledgments"},"Special thanks to Jackie Katz, Dave Wentworth, Becky Garten, Vivien Dugan, Xiyan Xu, Elizabeth Neuhaus, Sujatha Seenu, John McCauley, Rod Daniels, Vicki Gregory, Kanta Subbarao, Ian Barr, Aeron Hurt, Takato Odagiri, Shinji Watanabe, Tomoko Kuwahara, Michael Lässig, Marta Łuksza, Richard Reeve, Colin Russell, Sebastian Maurer-Stroh and Peter Bogner for feedback and advice. This analysis represents an updated frontend to the Nextflu informatic pipeline, originally available at nextflu.org."),o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement("div",{style:{flex:5}}),o.a.createElement("a",{key:5,href:"https://gisaid.org",target:"_blank",rel:"noreferrer noopener",style:{display:"flex",flexDirection:"column",justifyContent:"center"}},o.a.createElement("img",{alt:"gisaid-logo",width:"120",src:n("tL8e")})),o.a.createElement("div",{style:{flex:1}}),o.a.createElement("a",{key:6,href:"http://www.who.int/influenza/gisrs_laboratory/en/",target:"_blank",rel:"noreferrer noopener"},o.a.createElement("img",{alt:"gisrs-logo",width:"120",src:n("5IUX")})),o.a.createElement("div",{style:{flex:5}})))}return o.a.createElement("div",null,t)}function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return an(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fn(e);if(t){var o=fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pn(this,n)}}function pn(e,t){return!t||"object"!==rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hn=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,"oCt4"))})),dn=o.a.createElement("span",{style:{marginLeft:10,marginRight:10}},"•"),yn=c.c.div.withConfig({displayName:"footer__FooterStyles",componentId:"n42vt4-0"})(["margin-left:30px;padding-bottom:30px;font-family:",";font-size:15px;font-weight:300;color:rgb(136,136,136);line-height:1.4;h1{font-weight:700;font-size:2.2em;margin:0.2em 0;}h2{font-weight:600;font-size:2em;margin:0.2em 0;}h3{font-weight:500;font-size:1.8em;margin:0.2em 0;}h4{font-weight:500;font-size:1.6em;margin:0.1em 0;}h5{font-weight:500;font-size:1.4em;margin:0.1em 0;}h6{font-weight:500;font-size:1.2em;margin:0.1em 0;}pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px;}pre code{padding:0;margin:0;overflow:visible;font-size:100%;line-height:inherit;word-wrap:normal;background-color:initial;border:0;}p code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px;}.line{margin-top:20px;margin-bottom:20px;border-bottom:1px solid #CCC;}.finePrint{font-size:14px;}.acknowledgments{margin-top:10px;}.filterList{margin-top:10px;line-height:1.0;}.imageContainer{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;}img{margin-left:30px;margin-right:30px;margin-top:2px;margin-bottom:2px;}"],u.b),mn=function(e,t){if(e.description)return o.a.createElement(r.Suspense,{fallback:o.a.createElement("div",null)},o.a.createElement(hn,{className:"acknowledgments",mdstring:e.description}));var n=o.a.createElement("div",null,"This work is made possible by the open sharing of genetic data by research groups from all over the world. We gratefully acknowledge their contributions.");return"nextstrain.org"===window.location.hostname?nn(t,n):o.a.createElement("div",null,n)},bn=function(e,t,n,r){var o=-1===t[n].indexOf(r)?"add":"remove";e(Object(d.a)(o,n,[r]))},gn=function(e,t,n,r,i,a){var s=-1!==t[n].indexOf(r);return s&&a?o.a.createElement("div",{key:r,style:{display:"inline-block"}},o.a.createElement("div",{className:"boxed-item-icon",onClick:function(){bn(e,t,n,r)},role:"button",tabIndex:0},"×"),o.a.createElement("div",{className:"boxed-item active-with-icon"},i)):s?o.a.createElement("div",{className:"boxed-item active-clickable",key:r,onClick:function(){bn(e,t,n,r)},role:"button",tabIndex:0},i):o.a.createElement("div",{className:"boxed-item inactive",key:r,onClick:function(){bn(e,t,n,r)},role:"button",tabIndex:0},i)},vn=Object(s.b)((function(e){return{tree:e.tree,totalStateCounts:e.tree.totalStateCounts,metadata:e.metadata,colorOptions:e.metadata.colorOptions,browserDimensions:e.browserDimensions.browserDimensions,activeFilters:e.controls.filters}}))(Qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(a,e);var t,n,r,i=un(a);function a(){return sn(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"shouldComponentUpdate",value:function(e){if(this.props.tree.version!==e.tree.version||this.props.browserDimensions!==e.browserDimensions)return!0;if(Object.keys(this.props.activeFilters)!==Object.keys(e.activeFilters))return!0;if(Object.keys(this.props.activeFilters).length>0){var t,n=on(this.props.activeFilters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.props.activeFilters[r]!==e.activeFilters[r])return!0}}catch(e){n.e(e)}finally{n.f()}}return!1}},{key:"displayFilter",value:function(e){var t,n,r,i,a=this,s=this.props.t,c=this.props.totalStateCounts[e],l=this.props.metadata.colorings[e]?this.props.metadata.colorings[e].title:e;return o.a.createElement("div",null,s("Filter by {{filterTitle}}",{filterTitle:l}),this.props.activeFilters[e].length?(t=this.props.dispatch,n=[e],r="inlineRight",i=s("Clear {{filterName}} filter",{filterName:e}),o.a.createElement("div",{className:"".concat(r," boxed-item active-clickable"),style:{paddingLeft:"5px",paddingRight:"5px",display:"inline-block"},onClick:function(){n.forEach((function(e){return t(Object(d.a)("set",e,[]))}))}},i)):null,o.a.createElement("div",{className:"filterList"},o.a.createElement(v.a,{wrap:"wrap",justifyContent:"flex-start",alignItems:"center"},Array.from(c.keys()).filter((function(e){return Object(b.z)(e)})).sort().map((function(t){var n=o.a.createElement("span",null,"".concat(t," (").concat(c.get(t),")"));return gn(a.props.dispatch,a.props.activeFilters,e,t,n,!1)})))))}},{key:"getUpdated",value:function(){var e=this.props.t;return this.props.metadata.updated?o.a.createElement("span",null,e("Data updated")," ",this.props.metadata.updated):null}},{key:"downloadDataButton",value:function(){var e=this,t=this.props.t;return o.a.createElement("button",{style:Object.assign({},u.g,{backgroundColor:"rgba(0,0,0,0)",color:u.h,margin:0,padding:0}),onClick:function(){e.props.dispatch({type:g.U})}},o.a.createElement(l.e,null),o.a.createElement("span",{style:{position:"relative"}}," "+t("Download data")))}},{key:"getCitation",value:function(){return o.a.createElement("span",null,"Nextstrain: ",o.a.createElement("a",{href:Kt.nextstrain.href,target:"_blank",rel:"noopener noreferrer"},Kt.nextstrain.author,", ",o.a.createElement("i",null,Kt.nextstrain.journal)," (".concat(Kt.nextstrain.year,")")))}},{key:"render",value:function(){var e=this;if(!this.props.metadata||!this.props.tree.nodes)return null;var t=this.props.width-30;return o.a.createElement(yn,null,o.a.createElement("div",{style:{width:t}},o.a.createElement("div",{className:"line"}),mn(this.props.metadata,this.props.dispatch),o.a.createElement("div",{className:"line"}),Object.keys(this.props.activeFilters).map((function(t){return o.a.createElement("div",{key:t},e.displayFilter(t),o.a.createElement("div",{className:"line"}))})),o.a.createElement(v.a,{className:"finePrint"},this.getUpdated(),dn,this.downloadDataButton(),dn,"Auspice v"+w.version),o.a.createElement("div",{style:{height:"3px"}}),o.a.createElement(v.a,{className:"finePrint"},this.getCitation())))}}])&&cn(t.prototype,n),r&&cn(t,r),a}(o.a.Component))||Qt,wn=Object(f.a)()(vn),Mn=n("9Koi"),jn={avatar:{marginRight:5,marginBottom:2},byline:{fontFamily:u.d,fontSize:15,marginLeft:2,marginTop:5,marginBottom:5,fontWeight:500,color:"#555",lineHeight:1.4,verticalAlign:"middle"},bylineWeight:{fontFamily:u.d,fontSize:15,fontWeight:500}};function Sn(e,t){var n=t.buildUrl;if("string"==typeof n){var r=n.match(/(https?:\/\/)?(www\.)?github.com\/([^/]+)/);if(r)return o.a.createElement("img",{style:jn.avatar,alt:"avatar",width:"28",src:"https://github.com/".concat(r[3],".png?size=200")})}return null}function Ln(e,t){var n;return Object.prototype.hasOwnProperty.call(t,"maintainers")&&(n=t.maintainers,Array.isArray(n)&&n.length)?o.a.createElement("span",null,e("Maintained by")+" ",n.map((function(e,t){return o.a.createElement(o.a.Fragment,{key:e.name},e.url?o.a.createElement(xn,{url:e.url},e.name):e.name,t===n.length-1?"":t===n.length-2?" and ":", ")})),"."):null}function xn(e){var t=e.url,n=e.children;return o.a.createElement("a",{style:jn.bylineWeight,rel:"noopener noreferrer",href:t,target:"_blank"},n)}var On,Tn=function(e){var t=e.width,n=e.metadata,r=Object(Mn.a)().t;return"nextstrain.org"!==window.location.hostname&&"dev.nextstrain.org"!==window.location.hostname||!window.location.pathname.startsWith("/ncov")?o.a.createElement("div",{width:t,style:jn.byline},Sn(r,n),function(e,t){if(Object.prototype.hasOwnProperty.call(t,"buildUrl")){var n=t.buildUrl;if("string"==typeof n&&(n.startsWith("https://")||n.startsWith("http://")||n.startsWith("www.")))return o.a.createElement("span",null,e("Built with")," ",o.a.createElement(xn,{url:n},n.replace(/^(http[s]?:\/\/)/,"").replace(/^www\./,"").replace(/^github.com\//,"")),". ")}return null}(r,n),Ln(r,n)):o.a.createElement("div",{width:t,style:jn.byline},Sn(r,n),Ln(r,n),n.buildUrl&&o.a.createElement("span",null," Enabled by data from ",o.a.createElement("img",{src:"https://www.gisaid.org/fileadmin/gisaid/img/schild.png",alt:"gisaid-logo",width:"65"})))};function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=In(e);if(t){var o=In(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nn(this,n)}}function Nn(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var An={country:"countries",authors:"authors"},_n=function(e){var t="number"==typeof e?Object(m.d)(e):e,n=t.split("-");return 3===n.length?"".concat(b.E[n[1]]," ").concat(n[0]):t},Pn=function(e,t){var n=0;return e.forEach((function(e,r){e.hasChildren||t[r]!==b.b||(n+=1)})),n},zn=function(e,t,n,r,o,i,a){var s=Pn(t,r),c=Object(y.c)(t,r),l="";l+="divOnly"!==i&&s>0?a("Showing {{x}} of {{y}} genomes sampled between {{from}} and {{to}}",{x:s,y:e,from:_n(c[0]),to:_n(c[1])}):a("Showing {{x}} of {{y}} genomes",{x:s,y:e}),l+=".";var u=[];Object.keys(n).forEach((function(e){var t=Object.keys(o[e]).length;t&&u.push("".concat(t," ").concat(function(e,t){return 1===t?"authors"===e&&(e="author"):(e in An&&(e=An[e]),"s"!==e.slice(-1).toLowerCase()&&(e+="s")),e=e.replace(/_/g," ")}(e,t)))}));var p=a("Comprising"),f=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.prefix,o=void 0===r?void 0:r,i=n.suffix,a=void 0===i?void 0:i,s=n.capatalise,c=void 0===s||s,l=n.fullStop,u=void 0===l||l;return e.length?(t=1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1],o&&(t=o+" "+t),a&&(t+=" "+a),c&&(t=t.charAt(0).toUpperCase()),u&&(t+="."),t+" "):""}(u,{prefix:p,capatalise:!1});return f.length?l+=" ".concat(f):l.endsWith(".")?l+=" ":l+=". ",l},Rn=Object(s.b)((function(e){return{browserDimensions:e.browserDimensions.browserDimensions,filters:e.controls.filters,animationPlayPauseButton:e.controls.animationPlayPauseButton,metadata:e.metadata,nodes:e.tree.nodes,visibleStateCounts:e.tree.visibleStateCounts,totalStateCounts:e.tree.totalStateCounts,visibility:e.tree.visibility,selectedStrain:e.tree.selectedStrain,selectedClade:e.tree.selectedClade,dateMin:e.controls.dateMin,dateMax:e.controls.dateMax,absoluteDateMin:e.controls.absoluteDateMin,absoluteDateMax:e.controls.absoluteDateMax,branchLengthsToDisplay:e.controls.branchLengthsToDisplay}}))(On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(a,e);var t,n,r,i=Dn(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"getStyles",value:function(e){var t=28;return this.props.browserDimensions.width<1e3&&(t=27),this.props.browserDimensions.width<800&&(t=26),this.props.browserDimensions.width<600&&(t=25),this.props.browserDimensions.width<400&&(t=24),{base:{width:e+34,display:"inline-block",maxWidth:e,marginTop:0},title:{fontFamily:u.p,fontSize:t,marginLeft:0,marginTop:0,marginBottom:5,fontWeight:500,color:u.a,letterSpacing:"-0.5px",lineHeight:1.2},n:{fontFamily:u.d,fontSize:14,marginLeft:2,marginTop:5,marginBottom:5,fontWeight:500,color:u.h,lineHeight:1.4}}}},{key:"addFilteredDatesButton",value:function(e){var t=this;e.push(o.a.createElement("div",{key:"timefilter",style:{display:"inline-block"}},o.a.createElement("div",{className:"boxed-item-icon",onClick:function(){t.props.dispatch(Object(d.c)({newMin:t.props.absoluteDateMin,newMax:t.props.absoluteDateMax}))},role:"button",tabIndex:0},"×"),o.a.createElement("div",{className:"boxed-item active-with-icon"},"".concat(_n(this.props.dateMin)," to ").concat(_n(this.props.dateMax)))))}},{key:"addNonAuthorFilterButton",value:function(e,t){var n=this;this.props.filters[t].sort().forEach((function(r){var i=o.a.createElement("span",null,r," (".concat(n.props.totalStateCounts[t].get(r),")"));e.push(gn(n.props.dispatch,n.props.filters,t,r,i,!0))}))}},{key:"selectedStrainButton",value:function(e){var t=this;return o.a.createElement("span",null,"Showing a single strain ",o.a.createElement("div",{style:{display:"inline-block"}},o.a.createElement("div",{className:"boxed-item-icon",onClick:function(){t.props.dispatch(Object(d.f)({tipSelected:{clear:!0},cladeSelected:t.props.selectedClade}))},role:"button",tabIndex:0},"×"),o.a.createElement("div",{className:"boxed-item active-with-icon"},e)))}},{key:"clearFilterButton",value:function(e){var t=this;return o.a.createElement("span",{style:{cursor:"pointer",color:"#5097BA"},key:e,onClick:function(){return t.props.dispatch(Object(d.a)("set",e,[]))},role:"button",tabIndex:0},e)}},{key:"renderTitle",value:function(e){var t="";return this.props.metadata.title&&(t=this.props.metadata.title),o.a.createElement("div",{width:this.props.width,style:e.title},t)}},{key:"render",value:function(){var e=this,t=this.props.t;if(!this.props.metadata||!this.props.nodes||!this.props.visibility)return null;var n=this.getStyles(this.props.width),r="Pause"===this.props.animationPlayPauseButton,i=!r&&!this.props.selectedStrain,a=this.props.dateMin===this.props.absoluteDateMin&&this.props.dateMax===this.props.absoluteDateMax,s=zn(this.props.metadata.mainTreeNumTips,this.props.nodes,this.props.filters,this.props.visibility,this.props.visibleStateCounts,this.props.branchLengthsToDisplay,this.props.t),c=[];return Object.keys(this.props.filters).filter((function(t){return e.props.filters[t].length>0})).forEach((function(t){return e.addNonAuthorFilterButton(c,t)})),a||this.addFilteredDatesButton(c),o.a.createElement(h.a,{center:!0,infocard:!0},o.a.createElement("div",{style:n.base},this.renderTitle(n),o.a.createElement(Tn,{styles:n,width:this.props.width,metadata:this.props.metadata}),o.a.createElement("div",{width:this.props.width,style:n.n},r?t("Animation in progress")+". ":null,this.props.selectedStrain?this.selectedStrainButton(this.props.selectedStrain):null,i?s:null,i&&c.length?o.a.createElement("span",null,t("Filtered to")+" ",c.map((function(e){return e})),". "):null)))}}])&&Cn(t.prototype,n),r&&Cn(t,r),a}(o.a.Component))||On,Bn=Object(f.a)()(Rn),Fn=Object(s.b)((function(e){return{tree:e.tree,treeToo:e.treeToo,dateMinNumeric:e.controls.dateMinNumeric,dateMaxNumeric:e.controls.dateMaxNumeric,quickdraw:e.controls.quickdraw,colorBy:e.controls.colorBy,colorByConfidence:e.controls.colorByConfidence,layout:e.controls.layout,temporalConfidence:e.controls.temporalConfidence,distanceMeasure:e.controls.distanceMeasure,mutType:e.controls.mutType,colorScale:e.controls.colorScale,metadata:e.metadata,showTreeToo:e.controls.showTreeToo,showTangle:e.controls.showTangle,panelsToDisplay:e.controls.panelsToDisplay,selectedBranchLabel:e.controls.selectedBranchLabel,narrativeMode:e.narrative.display,animationPlayPauseButton:e.controls.animationPlayPauseButton}}))(wt),Wn=n("4R65"),Yn=n.n(Wn),Vn=n("+2bi"),Gn=(n("bMVF"),n("nrO2"),n("AE40")),Hn=n.n(Gn),Un=n("q92V"),qn=n.n(Un),Qn=n("cLAn"),Xn=n.n(Qn),Jn=n("UfWW"),Zn=n.n(Jn),Kn=n("JELi"),$n=n.n(Kn),er=n("+ugm"),tr=n("jICm"),nr=n("ZQwz"),rr=n("ZRP+"),or=Object(er.a)().x((function(e){return e.x})).y((function(e){return e.y})).curve(tr.a),ir=function(e,t,n,r,o,i,a,s,c){if("hidden"===a)return[];var l=Zn()(c,(function(t){return t>e})),u=$n()(c,(function(e){return e<t}));if(-1===l||-1===u)return[];var p,f,h=s.slice(l,u+1);if(l>0){var d=c[l]-c[l-1],y=(e-c[l-1])/d,m=(c[l]-e)/d;p={x:m*s[l-1].x+y*s[l].x,y:m*s[l-1].y+y*s[l].y}}if(u<s.length-1){var b=c[u+1]-c[u],g=(t-c[u])/b,v=(c[u+1]-t)/b;f={x:v*s[u].x+g*s[u+1].x,y:v*s[u].y+g*s[u+1].y}}return p&&h.unshift(p),f&&h.push(f),h},ar=function(e){var t=[];return e.forEach((function(e){e.arcs.forEach((function(e){t.push(e)}))})),t},sr=function(e,t,n,r,o,i,a,s,c,l){var u,p=n.selectAll("transmissions").data(t).enter().append("path").attr("d",(function(e){return or(ir(i,a,e.originCoords,e.destinationCoords,e.originNumDate,e.destinationNumDate,e.visible,e.bezierCurve,e.bezierDates))})).attr("fill","none").attr("stroke-opacity",.6).attr("stroke-linecap","round").attr("stroke",(function(e){return e.color})).attr("stroke-width",1),f=o[0].tipCount,h=b.t/Math.sqrt(qn()([Math.sqrt(f*o.length),b.s]));if(s){var y=ar(e);y.forEach((function(t){t.outerRadius=Math.sqrt(e[t.demeDataIdx].count)*h})),u=n.selectAll("demes").data(y).enter().append("path").attr("d",(function(e){return Object(nr.a)()(e)})).style("stroke","none").style("fill-opacity",.65).style("fill",(function(e){return e.color})).style("stroke-opacity",.85).style("stroke",(function(e){return e.color})).style("pointer-events","all").attr("transform",(function(t){return"translate("+e[t.demeDataIdx].coords.x+","+e[t.demeDataIdx].coords.y+")"})).on("mouseover",(function(t){l(Object(d.e)({geoFilter:[c,e[t.demeDataIdx].name]}))})).on("mouseout",(function(){l(Object(d.e)())}))}else u=n.selectAll("demes").data(e).enter().append("circle").attr("r",(function(e){return h*Math.sqrt(e.count)})).style("stroke","none").style("fill-opacity",.65).style("fill",(function(e){return e.color})).style("stroke-opacity",.85).style("stroke",(function(e){return e.color})).style("pointer-events","all").attr("transform",(function(e){return"translate("+e.coords.x+","+e.coords.y+")"})).on("mouseover",(function(e){l(Object(d.e)({geoFilter:[c,e.name]}))})).on("mouseout",(function(){l(Object(d.e)())}));return{demes:u,transmissions:p}},cr=n("3WF5"),lr=n.n(cr),ur=n("gPaA"),pr=n.n(ur),fr=n("4xfg"),hr=n("WjpJ"),dr=n.n(hr),yr=n("qJpv"),mr=n.n(yr),br=n("CRoZ"),gr=n.n(br),vr=n("F11+"),wr=n.n(vr),Mr=function(e,t){var n=wr.a.get(e,t);return function(r){return n*Math.pow(r,t)*Math.pow(1-r,e-t)}},jr=function(e,t,n){var r=e.x,o=e.y,i=t.x,a=t.y,s=Math.sign(i-r),c=(a-o)/(i-r),l=Math.sqrt(Math.pow(a-o,2)+Math.pow(i-r,2)),u=200*Math.log(Math.pow(l,.05))+n*b.M,p=Math.sqrt(Math.pow(u,2)+Math.pow(l,2)/4);return{x:r+p*Math.cos(Math.atan(2*u/l)+Math.atan(c))*s,y:o+p*Math.sin(Math.atan(2*u/l)+Math.atan(c))*s}};function Sr(e){return function(e){if(Array.isArray(e))return Or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||xr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||xr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(e,t){if(e){if("string"==typeof e)return Or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Or(e,t):void 0}}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tr,Er,Cr,kr=function(e,t,n){return n.latLngToLayerPoint(new L.LatLng(e,t))},Dr=function(e,t,n){var r={};return e.forEach((function(e,o){if(!e.children){var i=Object(S.d)(e,n);i&&(r[i]||(r[i]=[]),t[o]!==b.a&&r[i].push(e))}})),r},Nr=function(e,t,n,r){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=Object(Y.d)(n),s={},c=t.length;i?(o=i,t.forEach((function(e,t){s[e]=t,o[t]._count=0})),o[c]._count=0):(o=t.map((function(e,t){return s[e]=t,{innerRadius:0,_count:0}}))).push({innerRadius:0,_count:0}),e.forEach((function(e){var t=a?e.currentGt:Object(S.d)(e,n),i=s[t];void 0===i&&(i=c),o[i]._count++,o[i].color||(o[i].color=r[e.arrayIdx])}));var l=0;return o.forEach((function(t){t.startAngle=l,l+=2*Math.PI*t._count/e.length,t.endAngle=l,t.startAngle===t.endAngle&&(t.color="")})),o},Ir=function(e,t,n){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,o=jr(e,t,n),i=[e,o,t],a=dr()(i.length),s=mr()(0,1,r),c=[];return dr()(r).forEach((function(e){c[e]={x:0,y:0}})),a.forEach((function(e){var t=Mr(a.length-1,e),n=s.map(t),o=[i[e].x,i[e].y],l=gr()([dr()(n.length),dr()(o.length)]);dr()(c.length).forEach((function(e){c[e].x+=n[l[e][0]]*o[l[e][1]],c[e].y+=n[l[e+r][0]]*o[l[e+r][1]]}))})),c}(e,t,n)},Ar=function(e,t,n,r,o,i,a,s,c,l,u){var p,f,h,d,y,m=Object(S.d)(e,r),g=Object(S.d)(t,r),v=n.filter((function(e){return e.key===r}))[0].demes;try{p=v[m].latitude,f=v[m].longitude}catch(e){l.add(m)}try{h=v[g].latitude,d=v[g].longitude}catch(e){l.add(g)}var w=function(e,t,n,r,o){var i=null;return(t>-360||r>-360)&&(t<360||r<360)&&Math.abs(t-r)<180&&(i=[kr(e,t,o),kr(n,r,o)]),i}(p,f+s,h,d+c,a);if(w){var M=Ir(w[0],w[1],u),j=Object(fr.a)(Object(S.d)(e,"num_date"),Object(S.d)(t,"num_date")),L=[];M.forEach((function(e,t){L.push(j(t/(M.length-1)))})),y={id:e.arrayIdx.toString()+"-"+t.arrayIdx.toString(),originNode:e,destinationNode:t,bezierCurve:M,bezierDates:L,originName:Object(S.d)(e,r),destinationName:Object(S.d)(t,r),originCoords:w[0],destinationCoords:w[1],originLatitude:p,destinationLatitude:h,originLongitude:f+s,destinationLongitude:d+c,originNumDate:Object(S.d)(e,"num_date"),destinationNumDate:Object(S.d)(t,"num_date"),color:o[e.arrayIdx],visible:i[t.arrayIdx]!==b.a?"visible":"hidden",extend:u}}return y},_r=function(e,t,n,r,o,i,a){var s=o?[-360,0,360]:[0],c=[],l={},u=new Set,p={};return e.forEach((function(e){var o=Object(S.d)(e,n);e.children&&e.children.forEach((function(l){var f=Object(S.d)(l,n);if(o&&f&&o!==f){[o,f]in p?p[[o,f]]+=1:p[[o,f]]=1;var h=p[[o,f]];s.forEach((function(o){var s=function(e,t,n,r,o,i,a,s,c,l){var u=[];return[-360,0,360].forEach((function(p){var f=Ar(e,t,n,r,o,i,a,s,p,c,l);f&&u.push(f)})),u.length>0?pr()(u,(function(e){return Math.abs(e.destinationCoords.x-e.originCoords.x)})):null}(e,l,i.geoResolutions,n,r,t,a,o,u,h);s&&c.push(s)}))}}))})),c.forEach((function(e,t){l[e.id]?l[e.id].push(t):l[e.id]=[t]})),{transmissionData:c,transmissionIndices:l,demesMissingLatLongs:u}},Pr=function(e,t,n,r,o,i,a,s,c,l,u,p){var f=function(e,t,n,r,o,i,a,s,c,l){var u=[],p={},f=Dr(e,t,n),h=o?[-360,0,360]:[0],d=i.geoResolutions.filter((function(e){return e.key===n}))[0].demes,y=0;return h.forEach((function(e){for(var t=0,n=Object.entries(f);t<n.length;t++){var o=Lr(n[t],2),i=o[0],h=o[1],m=0,b=0,g=!0;d[i]?(m=d[i].latitude,b=d[i].longitude+e):(g=!1,console.warn("Warning: Lat/long missing from metadata for",i));var v=kr(m,b,a);if(b>-360&&b<360&&!0===g){var w={name:i,count:h.length,latitude:m,longitude:b,coords:v};s?function(){w.arcs=Nr(h,c,l,r);var e=u.length;w.arcs.forEach((function(t){t.demeDataIdx=e}))}():w.color=Object(ae.d)(h,r),u.push(w),p[i]?p[i].push(y):p[i]=[y],y+=1}}})),{demeData:u,demeIndices:p}}(e,t,n,r,o,i,a,s,c,l),h=f.demeData,d=f.demeIndices,y=[],m={},b=new Set;if(u){var g=_r(e,t,n,r,o,i,a);y=g.transmissionData,m=g.transmissionIndices,b=g.demesMissingLatLongs}var v=Sr(b).filter((function(e){return"unknown"!==e.toLowerCase()}));return v.size&&p(Object(B.a)({message:"The following demes are missing lat/long information",details:Sr(v).join(", ")})),{demeData:h,transmissionData:y,demeIndices:d,transmissionIndices:m,demesMissingLatLongs:b}},zr=function(e,t,n,r,o,i,a,s,c,l,u){return{newDemes:e?function(e,t,n,r,o,i,a,s,c){for(var l=e.slice(),u=Dr(n,r,o),p=function(){var e=Lr(h[f],2),n=e[0],r=e[1];t[n]&&t[n].forEach((function(e){l[e].count=r.length,a?l[e].arcs=Nr(r,c,s,i,l[e].arcs):l[e].color=Object(ae.d)(r,i)}))},f=0,h=Object.entries(u);f<h.length;f++)p();return l}(e,n,o,i,a,s,c,l,u):e,newTransmissions:t&&t.length?function(e,t,n,r,o,i){var a=e.slice();return n.forEach((function(e){e.children&&e.children.forEach((function(n){var s=Object(S.d)(e,o),c=Object(S.d)(n,o);if(s&&c&&s!==c){var l=e.arrayIdx.toString()+"-"+n.arrayIdx.toString(),u=i[e.arrayIdx],p=r[n.arrayIdx]!==b.a?"visible":"hidden";try{t[l].forEach((function(e){a[e].color=u,a[e].visible=p}))}catch(e){console.warn("Error trying to access ".concat(l," in transmissionIndices. Map transmissions may be wrong."))}}}))})),a}(t,r,o,i,a,s):t}};n("zGY6");function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){qr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yr(e,t){return(Yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ur(e);if(t){var o=Ur(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gr(this,n)}}function Gr(e,t){return!t||"object"!==Rr(t)&&"function"!=typeof t?Hr(e):t}function Hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ur(e){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qr,Xr=Object(s.b)((function(e){return{branchLengthsToDisplay:e.controls.branchLengthsToDisplay,absoluteDateMin:e.controls.absoluteDateMin,absoluteDateMax:e.controls.absoluteDateMax,treeVersion:e.tree.version,treeLoaded:e.tree.loaded,nodes:e.tree.nodes,nodeColors:e.tree.nodeColors,visibility:e.tree.visibility,visibilityVersion:e.tree.visibilityVersion,metadata:e.metadata,colorScaleVersion:e.controls.colorScale.version,map:e.map,geoResolution:e.controls.geoResolution,animationPlayPauseButton:e.controls.animationPlayPauseButton,mapTriplicate:e.controls.mapTriplicate,dateMinNumeric:e.controls.dateMinNumeric,dateMaxNumeric:e.controls.dateMaxNumeric,panelLayout:e.controls.panelLayout,colorBy:e.controls.colorScale.colorBy,narrativeMode:e.narrative.display,pieChart:!e.controls.colorScale.continuous&&e.controls.geoResolution!==e.controls.colorScale.colorBy,legendValues:e.controls.colorScale.legendValues,showTransmissionLines:e.controls.showTransmissionLines}}))((Cr=Er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yr(e,t)}(a,e);var t,n,r,i=Vr(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),qr(Hr(t=i.call(this,e)),"getStyles",(function(){return{resetZoomButton:{zIndex:100,position:"absolute",right:5,top:0,cursor:"pointer",color:u.a}}})),t.state={map:null,d3DOMNode:null,d3elems:null,responsive:null,demeData:null,transmissionData:null,demeIndices:null,transmissionIndices:null,userHasInteractedWithMap:!1},t.playPauseButtonClicked=t.playPauseButtonClicked.bind(Hr(t)),t.resetButtonClicked=t.resetButtonClicked.bind(Hr(t)),t.fitMapBoundsToData=t.fitMapBoundsToData.bind(Hr(t)),t}return t=a,(n=[{key:"componentWillMount",value:function(){var e=this;window.L||Yn()(),window.L.getMapSvg||(window.L.getMapSvg=function(t){var n=e.state.map.getSize(),r=e.state.map._getMapPanePos();Xn.a.toSvg(e.state.map.getContainer(),{width:n.x,height:n.y,filter:function(e){return"leaflet-control-container"!==e.className}}).then((function(e){t({mapSvg:e.replace("data:image/svg+xml;charset=utf-8,",""),mapDimensions:n,panOffsets:r})}))})}},{key:"componentDidMount",value:function(){this.maybeChangeSize(this.props),this.maybeRemoveAllDemesAndTransmissions(this.props)||this.maybeUpdateDemesAndTransmissions(this.props),this.maybeInvalidateMapSize(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.modulateInterfaceForNarrativeMode(e),this.maybeChangeSize(e),this.maybeRemoveAllDemesAndTransmissions(e)||this.maybeUpdateDemesAndTransmissions(e),this.maybeInvalidateMapSize(e)}},{key:"componentDidUpdate",value:function(e){null!==this.props.nodes&&(this.maybeCreateLeafletMap(),this.maybeSetupD3DOMNode(),this.maybeDrawDemesAndTransmissionsAndMoveMap(e))}},{key:"maybeInvalidateMapSize",value:function(e){!this.state.map||this.props.width===e.width&&this.props.height===e.height||(this.map_timeout&&window.clearTimeout(this.map_timeout),this.map_timeout=window.setTimeout(this.invalidateMapSize.bind(this),this.props.narrativeMode?100:750))}},{key:"invalidateMapSize",value:function(){this.state.map.invalidateSize()}},{key:"maybeCreateLeafletMap",value:function(){this.props.metadata.loaded&&!this.state.map&&document.getElementById("map")&&this.createMap()}},{key:"maybeChangeSize",value:function(e){this.props.width===e.width&&this.props.height===e.height&&this.state.responsive&&this.props.treeVersion===e.treeVersion||this.setState({responsive:{width:e.width,height:e.height}})}},{key:"maybeSetupD3DOMNode",value:function(){if(this.state.map&&this.state.responsive&&!this.state.d3DOMNode){var e=Object(Ue.a)("#map svg").attr("id","d3DemesTransmissions");this.setState({d3DOMNode:e})}}},{key:"modulateInterfaceForNarrativeMode",value:function(e){this.props.narrativeMode!==e.narrativeMode&&this.state.map&&(e.narrativeMode?(L.zoomControlButtons.remove(),this.state.map.dragging.disable(),this.state.map.doubleClickZoom.disable()):(L.zoomControlButtons=L.control.zoom({position:"bottomright"}).addTo(this.state.map),this.state.map.dragging.enable(),this.state.map.doubleClickZoom.enable()))}},{key:"maybeDrawDemesAndTransmissionsAndMoveMap",value:function(e){var t=!!this.state.map,n=!!(this.props.metadata.loaded&&this.props.treeLoaded&&this.state.responsive&&this.state.d3DOMNode),r=!this.state.demeData&&!this.state.transmissionData;if(t&&n&&r){var o=Pr(this.props.nodes,this.props.visibility,this.props.geoResolution,this.props.nodeColors,this.props.mapTriplicate,this.props.metadata,this.state.map,this.props.pieChart,this.props.legendValues,this.props.colorBy,this.props.showTransmissionLines,this.props.dispatch),i=o.demeData,a=o.transmissionData,s=o.demeIndices,c=o.transmissionIndices;this.moveMapAccordingToData({geoResolutionChanged:e.geoResolution!==this.props.geoResolution,visibilityChanged:e.visibility!==this.props.visibility,demeData:i,demeIndices:s});var l=sr(i,a,this.state.d3DOMNode,this.state.map,this.props.nodes,this.props.dateMinNumeric,this.props.dateMaxNumeric,this.props.pieChart,this.props.geoResolution,this.props.dispatch,this.props.showTransmissionLines);this.setState({boundsSet:!0,d3elems:l,demeData:i,transmissionData:a,demeIndices:s,transmissionIndices:c})}}},{key:"maybeRemoveAllDemesAndTransmissions",value:function(e){var t=!!this.state.map,n=this.props.geoResolution!==e.geoResolution,r=this.props.showTransmissionLines!==e.showTransmissionLines,o=!e.treeLoaded||this.props.treeVersion!==e.treeVersion,i=e.colorScaleVersion!==this.props.colorScaleVersion;return!(!t||!(n||o||i||r)||(this.state.d3DOMNode.selectAll("*").remove(),this.setState({d3elems:null,demeData:null,transmissionData:null,demeIndices:null,transmissionIndices:null}),0))}},{key:"respondToLeafletEvent",value:function(e){var t,n,r=this;if("moveend"===e.type){if(!this.state.demeData||!this.state.transmissionData)return void window.setTimeout((function(){return r.respondToLeafletEvent(e)}),50);var o=(t=this.state.demeData,n=this.state.map,lr()(t,(function(e){return e.coords=kr(e.latitude,e.longitude,n),e}))),i=function(e,t){var n=e.slice();return n.forEach((function(e){e.originCoords=kr(e.originLatitude,e.originLongitude,t),e.destinationCoords=kr(e.destinationLatitude,e.destinationLongitude,t),e.bezierCurve=Ir(e.originCoords,e.destinationCoords,e.extend)})),n}(this.state.transmissionData,this.state.map);!function(e,t,n,r,o,i){if(n){if(i){var a=ar(e);n.demes.data(a).attr("transform",(function(t){return"translate("+e[t.demeDataIdx].coords.x+","+e[t.demeDataIdx].coords.y+")"}))}else n.demes.data(e).attr("transform",(function(e){return"translate("+e.coords.x+","+e.coords.y+")"}));n.transmissions.data(t).attr("d",(function(e){return or(ir(r,o,e.originCoords,e.destinationCoords,e.originNumDate,e.destinationNumDate,e.visible,e.bezierCurve,e.bezierDates))}))}}(o,i,this.state.d3elems,this.props.dateMinNumeric,this.props.dateMaxNumeric,this.props.pieChart),this.setState({demeData:o,transmissionData:i})}}},{key:"getGeoRange",value:function(e,t){var n=this,r=[],o=[];this.props.metadata.geoResolutions.forEach((function(i){if(i.key===n.props.geoResolution){var a=i.demes;Object.keys(a).forEach((function(n){t&&e&&t[n]?t[n].forEach((function(t){e[t]&&e[t].count>0&&(r.push(a[n].latitude),o.push(a[n].longitude))})):(r.push(a[n].latitude),o.push(a[n].longitude))}))}}));var i=qn()(r),a=Hn()(r),s=qn()(o),c=Hn()(o),l=(s-c)%360,u=i-a,p=qn()([-55,a-.1*u]),f=Hn()([70,i+.1*u]),h=qn()([-180,c-.1*l]),d=Hn()([180,s+.1*l]);return[L.latLng(p,d),L.latLng(f,h)]}},{key:"maybeUpdateDemesAndTransmissions",value:function(e){if(this.state.map&&this.props.treeLoaded&&this.state.d3elems){var t=e.visibilityVersion!==this.props.visibilityVersion,n=e.nodes&&e.visibility&&e.geoResolution&&e.nodeColors;if(t&&n)if(this.props.geoResolution!==e.geoResolution){var r=Pr(e.nodes,e.visibility,e.geoResolution,e.nodeColors,e.mapTriplicate,e.metadata,this.state.map,e.pieChart,e.legendValues,e.colorBy,e.showTransmissionLines,e.dispatch),o=r.demeData,i=r.transmissionData,a=r.demeIndices,s=r.transmissionIndices,c=sr(o,i,this.state.d3DOMNode,this.state.map,e.nodes,e.dateMinNumeric,e.dateMaxNumeric,e.pieChart,e.geoResolution,e.dispatch);this.setState({d3elems:c,demeData:o,transmissionData:i,demeIndices:a,transmissionIndices:s})}else{var l=zr(this.state.demeData,this.state.transmissionData,this.state.demeIndices,this.state.transmissionIndices,e.nodes,e.visibility,e.geoResolution,e.nodeColors,e.pieChart,e.colorBy,e.legendValues),u=l.newDemes,p=l.newTransmissions;!function(e,t,n,r,o,i,a,s){if(n){var c=o[0].tipCount,l=b.t/Math.sqrt(qn()([Math.sqrt(c*o.length),b.s]));if(s){var u=ar(e);u.forEach((function(t){t.outerRadius=Math.sqrt(e[t.demeDataIdx].count)*l})),n.demes.data(u).attr("d",(function(e){return Object(nr.a)()(e)})).style("fill",(function(e){return e.color})).style("stroke",(function(e){return e.color}))}else n.demes.data(e).transition().duration(200).ease(rr.a).style("stroke",(function(e){return e.count>0?e.color:"white"})).style("fill",(function(e){return e.count>0?e.color:"white"})).attr("r",(function(e){return l*Math.sqrt(e.count)}));n.transmissions.data(t).attr("d",(function(e){return or(ir(i,a,e.originCoords,e.destinationCoords,e.originNumDate,e.destinationNumDate,e.visible,e.bezierCurve,e.bezierDates))})).attr("stroke",(function(e){return e.color}))}else console.error("d3elems is not defined!")}(u,p,this.state.d3elems,this.state.map,e.nodes,e.dateMinNumeric,e.dateMaxNumeric,e.pieChart),this.moveMapAccordingToData({geoResolutionChanged:e.geoResolution!==this.props.geoResolution,visibilityChanged:e.visibility!==this.props.visibility,demeData:u,demeIndices:this.state.demeIndices}),this.setState({demeData:u,transmissionData:p})}}}},{key:"getInitialBounds",value:function(){var e,t;return this.props.mapTriplicate?(e=L.latLng(-70,-360),t=L.latLng(80,360)):(e=L.latLng(-70,-180),t=L.latLng(80,180)),L.latLngBounds(e,t)}},{key:"createMap",value:function(){var e=this;L.Map.addInitHook("addHandler","gestureHandling",Vn.GestureHandling);var t=L.map("map",{center:[0,0],zoom:2,gestureHandling:!0,maxBounds:this.getInitialBounds(),minZoom:1,maxZoom:14,zoomSnap:.5,zoomControl:!1,doubleClickZoom:!this.props.narrativeMode});t.getRenderer(t).options.padding=2,L.tileLayer("https://api.mapbox.com/styles/v1/trvrb/ciu03v244002o2in5hlm3q6w2/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoidHJ2cmIiLCJhIjoiY2l1MDRoMzg5MDEwbjJvcXBpNnUxMXdwbCJ9.PMqX7vgORuXLXxtI3wISjw",{attribution:'© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <a style="font-weight: 700" href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>'}).addTo(t),this.props.narrativeMode||(L.zoomControlButtons=L.control.zoom({position:"bottomright"}).addTo(t)),new(L.Control.extend({onAdd:function(){var e=L.DomUtil.create("a","mapbox-wordmark");return e.href="http://mapbox.com/about/maps",e.target="_blank",e}}))({position:"bottomleft"}).addTo(t),t.on("moveend",this.respondToLeafletEvent.bind(this)),t.on("resize",(function(){e.props.narrativeMode&&e.fitMapBoundsToData(e.state.demeData,e.state.demeIndices)})),this.setState({map:t})}},{key:"animationButtons",value:function(){if(this.props.narrativeMode)return null;var e={color:"#FFFFFF",fontWeight:400,fontSize:12,borderRadius:3,padding:12,border:"none",zIndex:900,position:"relative",textTransform:"uppercase"};return"divOnly"!==this.props.branchLengthsToDisplay?o.a.createElement("div",{style:{position:"absolute"}},o.a.createElement("button",{style:Fr(Fr({},e),{},{top:20,left:20,backgroundColor:"Pause"===this.props.animationPlayPauseButton?u.i:u.c}),onClick:this.playPauseButtonClicked},this.props.t(this.props.animationPlayPauseButton)),o.a.createElement("button",{style:Fr(Fr({},e),{},{top:20,left:30,backgroundColor:u.f}),onClick:this.resetButtonClicked},this.props.t("Reset"))):o.a.createElement("div",null)}},{key:"maybeCreateMapDiv",value:function(){var e=this,t=null;return this.state.responsive&&(t=o.a.createElement("div",{style:{position:"relative"}},this.animationButtons(),o.a.createElement("div",{onClick:function(){e.setState({userHasInteractedWithMap:!0})},id:"map",style:{height:this.state.responsive.height,width:this.state.responsive.width}}))),t}},{key:"playPauseButtonClicked",value:function(){"Play"===this.props.animationPlayPauseButton?this.props.dispatch({type:g.C,data:"Pause"}):this.props.dispatch({type:g.C,data:"Play"})}},{key:"resetButtonClicked",value:function(){this.props.dispatch({type:g.C,data:"Play"}),this.props.dispatch(Object(d.c)({newMin:this.props.absoluteDateMin,newMax:this.props.absoluteDateMax,quickdraw:!1}))}},{key:"moveMapAccordingToData",value:function(e){var t=e.geoResolutionChanged,n=e.visibilityChanged,r=e.demeData,o=e.demeIndices;this.state.boundsSet?"Pause"!==this.props.animationPlayPauseButton&&(t||n)&&(this.props.narrativeMode?this.state.map.fire("resize"):this.state.userHasInteractedWithMap||this.fitMapBoundsToData(r,o)):this.fitMapBoundsToData(r,o)}},{key:"getMaxZoomForFittingMapToData",value:function(){switch(this.props.geoResolution.toLowerCase()){case"region":return 4;case"country":return 5;case"state":return 7;case"city":return 12;case"block":return 14;default:return 8}}},{key:"fitMapBoundsToData",value:function(e,t){var n=this.getGeoRange(e,t);this.state.currentBounds=window.L.latLngBounds(n[0],n[1]);var r=this.getMaxZoomForFittingMapToData();this.bounds_timeout&&window.clearTimeout(this.bounds_timeout),this.bounds_timeout=window.setTimeout((function(e){e.fitBounds(window.L.latLngBounds(n[0],n[1]),{maxZoom:r})}),this.props.narrativeMode?100:750,this.state.map)}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.getStyles(),r=this.state.transmissionData&&this.state.transmissionData.length;return o.a.createElement(h.a,{center:!0,title:t(r?"Transmissions":"Geography")},this.props.legend&&o.a.createElement(ot.a,null,o.a.createElement(te,{right:!0,width:this.props.width})),this.maybeCreateMapDiv(),this.props.narrativeMode?null:o.a.createElement("button",{style:Fr(Fr({},u.o),n.resetZoomButton),onClick:function(){e.fitMapBoundsToData(e.state.demeData,e.state.demeIndices),e.setState({userHasInteractedWithMap:!1})}},t("reset zoom")))}}])&&Wr(t.prototype,n),r&&Wr(t,r),a}(o.a.Component),qr(Er,"propTypes",{treeVersion:a.a.number.isRequired,treeLoaded:a.a.bool.isRequired,colorScaleVersion:a.a.number.isRequired}),Tr=Cr))||Tr,Jr=Object(f.a)()(Xr),Zr=n("Mw6Q"),Kr=["text/csv","application/vnd.ms-excel"],$r=Kr.concat("text/tab-separated-values"),eo=function(e){return $r.includes(e.type)||function(e){return""===e.type&&e.name.endsWith(".tsv")}(e)};function to(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function no(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){to(i,r,o,a,s,"next",e)}function s(e){to(i,r,o,a,s,"throw",e)}a(void 0)}))}}var ro,oo=function(){var e=no(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qr){e.next=4;break}return e.next=3,n.e(10).then(n.t.bind(null,"NpuA",7));case 3:Qr=e.sent.default;case 4:return e.abrupt("return",new Promise((function(e,n){eo(t)||n(new Error("Cannot parse this filetype")),Qr.parse(t,{header:!0,complete:function(t){e(t)},error:function(e){n(e)},encoding:"UTF-8",comments:"#",delimiter:Kr.includes(t.type)?",":"\t",skipEmptyLines:!0,dynamicTyping:!1})})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),io=function(){var e=no(regeneratorRuntime.mark((function e(t,n,r){var o,i,a,s,c,l,u,p,f,h,d,y,m,b,v,w,M;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oo(r);case 3:if(s=e.sent,o=s.data,i=s.errors,a=s.meta,!i.length){e.next=10;break}throw console.error(i),new Error(i.map((function(e){return e.message})).join(", "));case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",t(Object(B.a)({message:"Parsing of ".concat(r.name," failed"),details:e.t0.message})));case 15:if(c=a.fields[0],l=n(),u=l.controls,p=l.tree,f=[],h=[],d=new Set(["name","div","num_date","vaccine","labels","hidden","mutations","url","authors","accession","traits","children"]),a.fields.slice(1).forEach((function(e){u.coloringsPresentOnTree.has(e)||d.has(e)?h.push(e):f.push(e)})),y=new Set,m={},b=[],v=new Set(p.nodes.map((function(e){return e.name}))),o.forEach((function(e){var t=e[c];v.has(t)?(y.add(t),m[t]={},f.forEach((function(n){e[n]&&(m[t][n]={value:e[n]})}))):b.push(t)})),0!==y.size&&0!==f.length){e.next=28;break}return e.abrupt("return",t(Object(B.a)({message:"".concat(r.name," had no (relevent) information"),details:0===f.length?"No columns to add as colorings":"No taxa which match those in the tree"})));case 28:return b.length&&(w=b.length,t(Object(B.d)({message:"Ignoring ".concat(w," taxa which ").concat(w>1?"don't":"doesn't"," appear in the tree!"),details:b.join(", ")})),console.warn("Ignoring these taxa from the CSV as they don't appear in the tree:",b)),h.length&&t(Object(B.d)({message:"Ignoring ".concat(h.length,' CSV fields as they are already set as colorings or are "special" cases to be ignored'),details:h.join(", ")})),M={},f.forEach((function(e){M[e]={title:e,type:"categorical"}})),t({type:g.a,newColorings:M,strains:y,traits:m}),e.abrupt("return",t(Object(B.c)({message:"Adding metadata from "+r.name,details:"".concat(f.length," new field").concat(f.length>1?"s":""," for ").concat(y.size," node").concat(y.size>1?"s":"")})));case 34:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ao=function(e){return function(t,n){if(1!==e.length)return t(Object(B.d)({message:"More than one file dropped",details:"Currently we only allow a single CSV to be used"}));var r=e[0];return eo(r)?io(t,n,r):t(Object(B.d)({message:"Cannot parse ".concat(r.name),details:"Currently only CSV & TSV files are allowed, not ".concat(r.type)}))}};function so(e){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lo(e,t){return(lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fo(e);if(t){var o=fo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return po(this,n)}}function po(e,t){return!t||"object"!==so(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ho=Object(s.b)((function(e){return{animationPlayPauseButton:e.controls.animationPlayPauseButton,absoluteDateMaxNumeric:e.controls.absoluteDateMaxNumeric,absoluteDateMinNumeric:e.controls.absoluteDateMinNumeric,dateMinNumeric:e.controls.dateMinNumeric,dateMaxNumeric:e.controls.dateMaxNumeric,mapAnimationCumulative:e.controls.mapAnimationCumulative,mapAnimationShouldLoop:e.controls.mapAnimationShouldLoop,mapAnimationDurationInMilliseconds:e.controls.mapAnimationDurationInMilliseconds}}))(ro=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(i,e);var t,n,r,o=uo(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e)}return t=i,(n=[{key:"componentDidMount",value:function(){this.maybeAnimate()}},{key:"componentDidUpdate",value:function(){this.maybeAnimate()}},{key:"render",value:function(){return null}},{key:"maybeAnimate",value:function(){var e=this;if("Pause"===this.props.animationPlayPauseButton&&!window.NEXTSTRAIN.animationTickReference){var t=this.props.absoluteDateMaxNumeric-this.props.absoluteDateMinNumeric,n=b.e*t/this.props.mapAnimationDurationInMilliseconds,r=b.f*t;this.props.dateMaxNumeric-this.props.dateMinNumeric<1.3*r?window.NEXTSTRAIN.animationStartPoint&&window.NEXTSTRAIN.animationEndPoint||(window.NEXTSTRAIN.animationStartPoint=this.props.dateMinNumeric,window.NEXTSTRAIN.animationEndPoint=this.props.absoluteDateMaxNumeric):(window.NEXTSTRAIN.animationStartPoint=this.props.dateMinNumeric,window.NEXTSTRAIN.animationEndPoint=this.props.dateMaxNumeric);var o=this.props.dateMinNumeric,i=o+r;this.props.dispatch({type:g.D}),window.NEXTSTRAIN.animationTickReference=setInterval((function(){if("Play"===e.props.animationPlayPauseButton)return clearInterval(window.NEXTSTRAIN.animationTickReference),void(window.NEXTSTRAIN.animationTickReference=null);e.props.dispatch(Object(d.c)({newMin:Object(m.d)(o),newMax:Object(m.d)(i),quickdraw:!0})),e.props.mapAnimationCumulative||(o+=n),(i+=n)>=window.NEXTSTRAIN.animationEndPoint&&(e.props.mapAnimationShouldLoop?(o=window.NEXTSTRAIN.animationStartPoint,i=o+r):(clearInterval(window.NEXTSTRAIN.animationTickReference),window.NEXTSTRAIN.animationTickReference=null,e.props.dispatch({type:g.C,data:"Play"}),e.props.dispatch(Object(d.c)({newMin:Object(m.d)(window.NEXTSTRAIN.animationStartPoint),newMax:Object(m.d)(window.NEXTSTRAIN.animationEndPoint),quickdraw:!1})),window.NEXTSTRAIN.animationStartPoint=void 0,window.NEXTSTRAIN.animationEndPoint=void 0))}),b.e)}}}])&&co(t.prototype,n),r&&co(t,r),i}(o.a.Component))||ro,yo=function(e,t){return t*(e-(1===t?40:100))},mo=function(e){var t=e.horizontal,n=e.vertical,r=e.availableWidth,o=e.availableHeight,i=e.minHeight,a=void 0===i?void 0:i,s=e.maxAspectRatio,c=void 0===s?void 0:s,l=t*(r-(1===t?40:100)),u=n*o-52;return c&&u>c*l&&(u=c*l),a&&u<a&&(u=a),{width:l,height:u}};function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach((function(t){vo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wo=n("cr+I"),Mo=n.n(wo),jo=c.c.div.withConfig({displayName:"styles__NarrativeStyles",componentId:"sc-19vjmtz-0"})(["top:",";font-weight:300;font-size:14px;line-height:1.3;@media (max-width:1080px){font-size:13px;line-height:1.1;}p,h1,h2,h3,h4,li,table{color:",";}table,th,td{border:1px solid;}td,th{padding:3px;}h1{font-weight:700;font-size:2em;margin-bottom:30px;@media (max-width:1080px){font-size:1.8em;margin-bottom:10px;}}h2{font-weight:500;font-size:1.8em;@media (max-width:1080px){font-size:1.6em;}}h3{font-weight:500;font-size:1.6em;@media (max-width:1080px){font-size:1.4em;}}h4{font-weight:500;font-size:1.4em;@media (max-width:1080px){font-size:1.2em;}}div p{text-align:justify;margin:0;font-weight:inherit;line-height:inherit;}li{margin:10px 0px 10px 0px;font-weight:inherit;line-height:inherit;}table{width:100%;}strong{font-weight:500;background-color:inherit;font-size:inherit;line-height:inherit;}img{display:block;margin-left:auto;margin-right:auto;width:90%;padding:15px 0px 15px 0px;}figcaption{font-style:italic;font-size:0.9em;text-align:center;margin-bottom:15px;}#NarrativeBlock_0{margin-top:15px;}#NarrativeBlock_0 h3{font-weight:inherit;font-size:1.2em;}#NarrativeBlock_0 h4{text-align:justify;font-size:inherit;margin:0;margin-bottom:30px;font-weight:inherit;font-style:italic;line-height:inherit;}#NarrativeBlock_0 .explanation{text-align:justify;font-size:inherit;color:",";margin:0;margin-bottom:30px;font-weight:inherit;font-style:italic;line-height:inherit;}#NarrativeBlock_0 sup{font-size:65%;vertical-align:super;}"],(function(e){return e.narrativeNavBarHeight+"px"}),(function(e){return e.theme.unselectedColor}),(function(e){return e.theme.selectedColor})),So=c.c.div.withConfig({displayName:"styles__OpacityFade",componentId:"sc-19vjmtz-1"})(["z-index:200;position:absolute;background-image:",";width:100%;height:30px;",";",";"],(function(e){return"linear-gradient(to ".concat(e.position,", rgba(255, 255, 255, 0), ").concat(e.theme.background,")")}),(function(e){return"top"===e.position&&"top: ".concat(e.topHeight,"px")}),(function(e){return"bottom"===e.position&&"bottom: 0px;"})),Lo={color:"#5097BA",textDecoration:"none",cursor:"pointer",fontFamily:'"Lato", "Helvetica Neue", "Helvetica", "sans-serif"',fontWeight:"400",fontSize:"1.8em"},xo=c.c.div.withConfig({displayName:"styles__ProgressBar",componentId:"sc-19vjmtz-2"})(["width:100%;background-color:inherit;box-shadow:0px -3px 3px -3px rgba(0,0,0,0.2) inset;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;"]),Oo=c.c.div.withConfig({displayName:"styles__ProgressButton",componentId:"sc-19vjmtz-3"})(["background:#74a9cf;border-radius:50%;cursor:pointer;transition:transform .1s;align-self:center;margin:auto;&:hover{transform:scale(3);}"]),To=Object(c.b)(["width:100%;color:white;font-size:24px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;"]),Eo=c.c.div.withConfig({displayName:"styles__EndOfNarrative",componentId:"sc-19vjmtz-4"})(["text-align:center;display:grid;grid-template-rows:1fr;grid-row-gap:10px;"]),Co=c.c.nav.withConfig({displayName:"styles__MobileBannerTop",componentId:"sc-19vjmtz-5"})([""," top:0;height:","px;background-color:#E67F2C;"],To,(function(e){return e.height})),ko=c.c.nav.withConfig({displayName:"styles__MobileBannerBottom",componentId:"sc-19vjmtz-6"})([""," bottom:0;height:","px;background-color:#65B0A4;"],To,(function(e){return e.height})),Do=c.c.div.withConfig({displayName:"styles__MobileContentContainer",componentId:"sc-19vjmtz-7"})(["min-height:","px;max-height:","px;overflow-y:scroll;color:",";background-color:",";font-weight:300;font-size:14px;line-height:1.3;"],(function(e){return e.height}),(function(e){return e.height}),(function(e){return e.theme.unselectedColor}),(function(e){return e.theme.background})),No=n("LvDl");function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ao(e){return function(e){if(Array.isArray(e))return _o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zo(e,t){return(zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wo(e);if(t){var o=Wo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bo(this,n)}}function Bo(e,t){return!t||"object"!==Io(t)&&"function"!=typeof t?Fo(e):t}function Fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wo(e){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vo=Symbol(),Go=Symbol(),Ho=Symbol(),Uo=Symbol(),qo=Symbol(),Qo=Symbol(),Xo=Symbol(),Jo=Symbol(),Zo=Symbol(),Ko=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zo(e,t)}(a,e);var t,n,r,i=Ro(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Yo(Fo(t=i.call(this,e)),"componentDidMount",(function(){window.addEventListener("resize",t[Qo]),document.ontouchmove=function(e){e.preventDefault()},t._pageContainer.addEventListener("wheel",t[Ho]),t._pageContainer.addEventListener("touchmove",t[Uo]),t._pageContainer.addEventListener("keydown",t[qo]);var e=[];Object(No.isNil)(t.props.children[t.state.componentIndex])?e.push(o.a.createElement("div",{ref:function(e){return t["container_"+t.state.componentIndex]=e},style:{height:"calc(100% - 20px)",width:"100%",paddingBottom:"20px"}},t.props.children)):e.push(o.a.createElement("div",{key:t.state.componentIndex,ref:function(e){return t["container_"+t.state.componentIndex]=e},style:{height:"calc(100% - 20px)",width:"100%",paddingBottom:"20px"}},t.props.children[t.state.componentIndex])),t[Xo](e)})),Yo(Fo(t),"componentWillUnmount",(function(){window.removeEventListener("resize",t[Qo]),t._pageContainer.removeEventListener("wheel",t[Ho]),t._pageContainer.removeEventListener("touchmove",t[Uo]),t._pageContainer.removeEventListener("keydown",t[qo])})),Yo(Fo(t),"goToPage",(function(e){var n=t.props,r=n.pageOnChange,i=n.children,a=t.state.componentIndex,s=Ao(t.state.componentsToRender);if(!Object(No.isEqual)(a,e))if(Object(No.isNil)(t["container_"+e])||t[Go]){if(!t[Go]&&!Object(No.isNil)(i[e])){for(var c=function(e){s.push(o.a.createElement("div",{key:e,ref:function(n){return t["container_"+e]=n},style:{height:"calc(100% - 20px)",width:"100%",paddingBottom:"20px"}},i[e]))},l=s.length;l<=e;l++)c(l);Object(No.isNil)(i[e+1])||s.push(o.a.createElement("div",{key:e+1,ref:function(n){return t["container_"+(e+1)]=n},style:{height:"calc(100% - 20px)",width:"100%",paddingBottom:"20px"}},i[e+1])),t[Go]=!0,t.setState({componentsToRender:s},(function(){t._pageContainer.style.transform="translate3d(0, ".concat(-100*e,"%, 0)"),r&&r(e+1),setTimeout((function(){t.setState({componentIndex:e},(function(){t[Go]=!1,t[Vo]=null}))}),t.props.animationTimer+200)}))}}else t[Go]=!0,t._pageContainer.style.transform="translate3d(0, ".concat(-100*e,"%, 0)"),r&&r(e+1),Object(No.isNil)(t["container_"+(e+1)])&&!Object(No.isNil)(i[e+1])&&s.push(o.a.createElement("div",{key:e+1,ref:function(n){return t["container_"+(e+1)]=n},style:{height:"calc(100% - 20px)",width:"100%",paddingBottom:"20px"}},i[e+1])),setTimeout((function(){t.setState({componentIndex:e,componentsToRender:s},(function(){t[Go]=!1,t[Vo]=null}))}),t.props.animationTimer+200)})),t.state={componentIndex:0,componentsToRender:[]},t[Vo]=null,t[Go]=!1,t[Ho]=function(e){e.deltaY<0?t[Jo](-e.deltaY):t[Zo](e.deltaY)},t[Uo]=function(e){Object(No.isNull)(t[Vo])?t[Vo]=e.touches[0].clientY:e.touches[0].clientY>t[Vo]?t[Jo](25):t[Zo](25)},t[qo]=function(e){Object(No.isEqual)(e.keyCode,38)&&t[Jo](25),Object(No.isEqual)(e.keyCode,40)&&t[Zo](25)},t[Qo]=function(){t.forceUpdate()},t[Xo]=function(e){var n=[];Object(No.isNil)(e)||(n=Ao(e)),(n=[].concat(Ao(n),Ao(t.state.componentsToRender)))[t.state.componentIndex+1]||Object(No.isNil)(t.props.children[t.state.componentIndex+1])||n.push(o.a.createElement("div",{key:t.state.componentIndex+1,ref:function(e){return t["container_"+(t.state.componentIndex+1)]=e},style:{height:"100%",width:"100%",overflow:"hidden"}},t.props.children[t.state.componentIndex+1])),t.setState({componentsToRender:Ao(n)})},t[Jo]=function(e){Object(No.isNil)(t["container_"+(t.state.componentIndex-1)])||t[Go]?t.props.scrollUnavailable&&t.props.scrollUnavailable():0===t["container_"+t.state.componentIndex].getElementsByTagName("div")[0].scrollTop&&e>=25&&(t[Go]=!0,t._pageContainer.style.transform="translate3d(0, ".concat(-100*(t.state.componentIndex-1),"%, 0)"),t.props.pageOnChange&&t.props.pageOnChange(t.state.componentIndex),setTimeout((function(){t.setState((function(e){return{componentIndex:e.componentIndex-1}}),(function(){t[Go]=!1,t[Vo]=null}))}),t.props.animationTimer+200))},t[Zo]=function(e){if(Object(No.isNil)(t["container_"+(t.state.componentIndex+1)])||t[Go])t.props.scrollUnavailable&&t.props.scrollUnavailable();else{var n=t["container_"+t.state.componentIndex].getElementsByTagName("div")[0];n.scrollTop===n.scrollHeight-n.clientHeight&&e>=25&&(t[Go]=!0,t._pageContainer.style.transform="translate3d(0, ".concat(-100*(t.state.componentIndex+1),"%, 0)"),t.props.pageOnChange&&t.props.pageOnChange(t.state.componentIndex+2),setTimeout((function(){t.setState((function(e){return{componentIndex:e.componentIndex+1}}),(function(){t[Go]=!1,t[Vo]=null,t[Xo]()}))}),t.props.animationTimer+200))}},t}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.animationTimer,r=t.transitionTimingFunction,i=t.containerHeight;return t.containerWidth,o.a.createElement("div",{id:"PageScroller",style:{height:i,width:"inherit",overflow:"hidden",padding:"0px 0px 0px 0px"}},o.a.createElement("div",{ref:function(t){return e._pageContainer=t},tabIndex:0,style:{height:"100%",width:"100%",transition:"transform ".concat(n,"ms ").concat(r)}},this.state.componentsToRender))}}])&&Po(t.prototype,n),r&&Po(t,r),a}(o.a.Component);Yo(Ko,"propTypes",{animationTimer:a.a.number,transitionTimingFunction:a.a.string,pageOnChange:a.a.func,scrollUnavailable:a.a.func,containerHeight:a.a.number,containerWidth:a.a.number}),Yo(Ko,"defaultProps",{animationTimer:1e3,transitionTimingFunction:"ease-in-out",containerHeight:window.innerHeight,containerWidth:window.innerWidth});var $o,ei=n("5/H9");function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ai(e,t){return(ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=li(e);if(t){var o=li(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ci(this,n)}}function ci(e,t){return!t||"object"!==ti(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function li(e){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ui,pi,fi,hi=Object(s.b)((function(e){return{loaded:e.narrative.loaded,blocks:e.narrative.blocks,currentInFocusBlockIdx:e.narrative.blockIdx}}))($o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ai(e,t)}(a,e);var t,n,r,i=si(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).exitNarrativeMode=function(){t.props.dispatch(Object(ei.b)({path:t.props.blocks[0].dataset,query:!0}))},t.changeAppStateViaBlock=function(e){var n=e-1;t.props.blocks[n].mainDisplayMarkdown?t.props.dispatch(Object(ei.a)({query:Mo.a.parse(t.props.blocks[n].query),queryToDisplay:{n:n}})):t.props.dispatch(Object(ei.b)({changeDataset:!1,query:Mo.a.parse(t.props.blocks[n].query),queryToDisplay:{n:n},push:!0}))},t.goToNextSlide=function(){t.props.currentInFocusBlockIdx!==t.props.blocks.length-1&&t.reactPageScroller.goToPage(t.props.currentInFocusBlockIdx+1)},t.goToPreviousSlide=function(){0!==t.props.currentInFocusBlockIdx&&t.reactPageScroller.goToPage(t.props.currentInFocusBlockIdx-1)},t}return t=a,(n=[{key:"componentDidMount",value:function(){window.twttr&&window.twttr.ready&&window.twttr.widgets.load(),0!==this.props.currentInFocusBlockIdx&&this.reactPageScroller.goToPage(this.props.currentInFocusBlockIdx),j.a.bind(["left","up"],this.goToPreviousSlide),j.a.bind(["right","down"],this.goToNextSlide)}},{key:"renderChevron",value:function(e){var t={zIndex:200,position:"absolute",cursor:"pointer",left:"".concat(this.props.width/2-15,"px"),fontSize:"".concat(30,"px"),height:"".concat(30,"px")};e&&(t.top=b.F+25),t.bottom=e?0:"5px";var n=e?o.a.createElement(l.d,null):o.a.createElement(l.a,null);return o.a.createElement("div",{id:"hand".concat(e?"Up":"Down"),style:t,onClick:e?this.goToPreviousSlide:this.goToNextSlide},n)}},{key:"renderProgress",value:function(){var e=this;return o.a.createElement(xo,{style:{height:"".concat(25,"px")},role:"navigation"},this.props.blocks.map((function(t,n){var r=e.props.currentInFocusBlockIdx===n?"14px":"6px";return o.a.createElement(Oo,{key:n,style:{width:r,height:r},onClick:function(){return e.reactPageScroller.goToPage(n)}})})))}},{key:"renderBlocks",value:function(){var e=this;return this.props.blocks.map((function(t,n){if(t.isEndOfNarrativeSlide)return o.a.createElement(Eo,{key:"EON",id:"EndOfNarrative"},o.a.createElement("h1",null,"END OF NARRATIVE"),o.a.createElement("a",{style:ri({},Lo),onClick:function(){return e.reactPageScroller.goToPage(0)}},"Scroll back to the beginning"),o.a.createElement("br",null),o.a.createElement("a",{style:ri({},Lo),onClick:e.exitNarrativeMode},"Leave the narrative & explore the data yourself"));var r=0===n?'\n  <p class="explanation">\n  Explore the narrative by scrolling on the left panel, or click "explore the data yourself" in the top right to interact with the data.\n  </p>\n'+t.__html:t.__html;return o.a.createElement("div",{dir:"auto",id:"NarrativeBlock_".concat(n),key:n,style:{padding:"10px 20px",height:"inherit",overflowX:"hidden",overflowY:"auto"},dangerouslySetInnerHTML:{__html:r}})}))}},{key:"render",value:function(){var e=this;return this.props.loaded?o.a.createElement(jo,{id:"NarrativeContainer",narrativeNavBarHeight:b.F},this.renderProgress(),o.a.createElement(So,{position:"top",topHeight:b.F+25}),o.a.createElement(So,{position:"bottom"}),0!==this.props.currentInFocusBlockIdx?this.renderChevron(!0):null,this.props.currentInFocusBlockIdx!==this.props.blocks.length-1?this.renderChevron(!1):null,o.a.createElement(Ko,{ref:function(t){e.reactPageScroller=t},containerHeight:this.props.height-25,pageOnChange:this.changeAppStateViaBlock},this.renderBlocks())):null}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:g.t,pathname:this.props.blocks[this.props.currentInFocusBlockIdx].dataset,query:Mo.a.parse(this.props.blocks[this.props.currentInFocusBlockIdx].url)}),j.a.unbind(["left","right","up","down"])}}])&&ii(t.prototype,n),r&&ii(t,r),a}(o.a.Component))||$o,di=n("UMV1"),yi=n("jMYa"),mi=n.n(yi);function bi(e){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(n),!0).forEach((function(t){Oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xi(e);if(t){var o=xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Si(this,n)}}function Si(e,t){return!t||"object"!==bi(t)&&"function"!=typeof t?Li(e):t}function Li(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xi(e){return(xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ti=Object(s.b)((function(e){return{colorBy:e.controls.colorBy,geneLength:e.controls.geneLength,colorings:e.metadata.colorings,geneMap:e.entropy.geneMap}}))((fi=pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mi(e,t)}(a,e);var t,n,r,i=ji(a);function a(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Oi(Li(t=i.call(this,e)),"dispatchColorByGenotype",Object(No.debounce)((function(e){t.dispatchColorBy(e,"genotype")}),400)),t.BLANK_STATE={colorBySelected:"",geneSelected:"",positionSelected:""},Object(Y.d)(e.colorBy)){var n=Object(Y.a)(e.colorBy);n&&(t.state=t.newState({colorBySelected:"gt",geneSelected:n.gene,positionSelected:n.positions.join(",")}))}else t.state=t.newState({colorBySelected:e.colorBy});return t}return t=a,(n=[{key:"replaceState",value:function(e){var t=this;this.setState((function(n,r){return t.newState(e)}))}},{key:"newState",value:function(e){return vi(vi({},this.BLANK_STATE),e)}},{key:"componentWillReceiveProps",value:function(e){if(this.props.colorBy!==e.colorBy)if(Object(Y.d)(e.colorBy)){var t=Object(Y.a)(e.colorBy);t&&this.replaceState({colorBySelected:"gt",geneSelected:t.gene,positionSelected:t.positions.join(",")})}else this.replaceState({colorBySelected:e.colorBy})}},{key:"componentDidUpdate",value:function(){var e=this.state.colorBySelected;if("gt"===e){var t=this.state,n=t.geneSelected,r=t.positionSelected;if(n&&r){var o=Object(Y.c)({gene:n,positions:Object(Y.b)(r,this.props.geneLength[n])});o&&this.dispatchColorByGenotype(o)}}else this.dispatchColorBy(e)}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.colorBySelected!==t.colorBySelected||this.state.geneSelected!==t.geneSelected||this.state.positionSelected!==t.positionSelected}},{key:"dispatchColorBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;Object(Zr.a)("color-by-".concat(t)),this.props.dispatch(Object(tn.a)(e))}},{key:"getGtGeneOptions",value:function(){var e=[];return this.props.geneMap&&((e=Object.keys(this.props.geneMap).map((function(e){return{value:e,label:e}})))[e.length]={value:b.I,label:"nucleotide"}),e}},{key:"gtGeneSelect",value:function(){var e=this,t=this.getGtGeneOptions();return o.a.createElement(mi.a,{name:"selectGenotype",id:"selectGenotype",placeholder:"gene…",value:this.state.geneSelected,options:t,clearable:!1,searchable:!0,multi:!1,onChange:function(t){e.setState({geneSelected:t.value})}})}},{key:"gtPositionInput",value:function(){var e=this,t=this.state.geneSelected,n=Math.floor(this.props.geneLength[t]),r=t?"".concat(t," position (1–").concat(n,")…"):"position…";return o.a.createElement("input",{type:"text",style:u.k,placeholder:r,value:this.state.positionSelected,onChange:function(t){e.setState({positionSelected:t.target.value})}})}},{key:"isNormalInteger",value:function(e){var t=Math.floor(Number(e));return String(t)===e&&t>=0}},{key:"getStyles",value:function(){return{base:{width:b.l,marginBottom:0,fontSize:14}}}},{key:"render",value:function(){var e=this,t=this.getStyles(),n=Object.keys(this.props.colorings).map((function(t){return{value:t,label:e.props.colorings[t].title}}));return o.a.createElement("div",{style:t.base,id:"selectColorBy"},o.a.createElement(mi.a,{name:"selectColorBy",value:this.state.colorBySelected,options:n,clearable:!1,searchable:!1,multi:!1,onChange:function(t){e.replaceState({colorBySelected:t.value})}}),"gt"===this.state.colorBySelected?o.a.createElement("div",null,this.gtGeneSelect(),this.gtPositionInput()):null)}}])&&wi(t.prototype,n),r&&wi(t,r),a}(o.a.Component),Oi(pi,"propTypes",{colorBy:a.a.string.isRequired,geneLength:a.a.object.isRequired,colorings:a.a.object.isRequired,dispatch:a.a.func.isRequired}),ui=fi))||ui,Ei=n("fhzG"),Ci=n.n(Ei),ki=n("3OWR"),Di=n.n(ki),Ni=n("Z0cm"),Ii=n.n(Ni);function Ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(n),!0).forEach((function(t){Pi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zi={base:{position:"relative",borderRadius:6},horizontalSlider:{width:"100%",height:12},verticalSlider:{maxHeight:500,width:12,border:"1px solid grey"},handle:{fontSize:"0.9em",textAlign:"center",backgroundColor:"#FAFAFA",color:"white",border:"1px solid #555",cursor:"pointer",height:12,width:12,borderRadius:12,top:-4},bar:{position:"relative",backgroundColor:"rgb(200,200,200)",borderRadius:2},unselectedBar:{backgroundColor:"#777",height:1,top:2},selectedBar:{backgroundColor:"#CCC",height:6}};function Ri(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}function Bi(e){return null==e?[]:Array.isArray(e)?e:[e]}function Fi(e){return null!=e&&1===e.length?e[0]:e}var Wi,Yi=Ci()({displayName:"Slider",propTypes:{min:a.a.number,max:a.a.number,step:a.a.number,minDistance:a.a.number,defaultValue:a.a.oneOfType([a.a.number,a.a.arrayOf(a.a.number)]),value:a.a.oneOfType([a.a.number,a.a.arrayOf(a.a.number)]),orientation:a.a.oneOf(["horizontal","vertical"]),className:a.a.string,handleClassName:a.a.string,handleActiveClassName:a.a.string,withBars:a.a.bool,barClassName:a.a.string,pearling:a.a.bool,disabled:a.a.bool,snapDragDisabled:a.a.bool,invert:a.a.bool,onBeforeChange:a.a.func,onChange:a.a.func,onAfterChange:a.a.func,onSliderClick:a.a.func},getDefaultProps:function(){return{min:0,max:100,step:1e-5,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",handleClassName:"handle",handleActiveClassName:"active",barClassName:"bar",withBars:!1,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1}},getInitialState:function(){var e=this._or(Bi(this.props.value),Bi(this.props.defaultValue));this.tempArray=e.slice();for(var t=[],n=0;n<e.length;n++)e[n]=this._trimAlignValue(e[n],this.props),t.push(n);return{index:-1,upperBound:208,sliderLength:220,handleSize:12,sliderStart:20,value:e,zIndices:t}},componentWillReceiveProps:function(e){var t=this._or(Bi(e.value),this.state.value);this.tempArray=t.slice();for(var n=[],r=0;r<t.length;r++)n[r]=this._trimAlignValue(t[r],e);this.setState({value:n})},_or:function(e,t){var n=o.a.Children.count(this.props.children);switch(n){case 0:return e.length>0?e:t;case e.length:return e;case t.length:return t;default:return e.length===n&&t.length===n||console.warn(this.constructor.displayName+": Number of values does not match number of children."),function(e,t,n){for(var r=(t-e)/(n-1),o=[],i=0;i<n;i++)o.push(e+r*i);return o}(this.props.min,this.props.max,n)}},getValue:function(){return Fi(this.state.value)},_calcOffset:function(e){return(e-this.props.min)/(this.props.max-this.props.min)*this.state.upperBound},_calcValue:function(e){return e/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},_buildHandleStyle:function(e,t){var n={position:"absolute",willChange:this.state.index>=0?this._posMinKey():""};return n[this._posMinKey()]=e+"px",n},_getClosestIndex:function(e){for(var t=Number.MAX_VALUE,n=-1,r=this.state.value,o=r.length,i=0;i<o;i++){var a=this._calcOffset(r[i]),s=Math.abs(e-a);s<t&&(t=s,n=i)}return n},_calcOffsetFromPosition:function(e){var t=e-this.state.sliderStart;return this.props.invert&&(t=this.state.sliderLength-t),t-=this.state.handleSize/2},_forceValueFromPosition:function(e,t){var n=this._calcOffsetFromPosition(e),r=this._getClosestIndex(n),o=this._trimAlignValue(this._calcValue(n)),i=this.state.value.slice();i[r]=o;for(var a=0;a<i.length-1;a+=1)if(i[a+1]-i[a]<this.props.minDistance)return;this.setState({value:i},t.bind(this,r))},_getMousePosition:function(e){return[e["page"+this._axisKey()],e["page"+this._orthogonalAxisKey()]]},_getTouchPosition:function(e){var t=e.touches[0];return[t["page"+this._axisKey()],t["page"+this._orthogonalAxisKey()]]},_getMouseEventMap:function(){return{mousemove:this._onMouseMove,mouseup:this._onMouseUp}},_getTouchEventMap:function(){return{touchmove:this._onTouchMove,touchend:this._onTouchEnd}},_createOnMouseDown:function(e){return function(t){if(!this.props.disabled){var n=this._getMousePosition(t);this._start(e,n[0]),this._addHandlers(this._getMouseEventMap()),Ri(t)}}.bind(this)},_createOnTouchStart:function(e){return function(t){if(!(this.props.disabled||t.touches.length>1)){var n=this._getTouchPosition(t);this.startPosition=n,this.isScrolling=void 0,this._start(e,n[0]),this._addHandlers(this._getTouchEventMap()),function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}(t)}}.bind(this)},_addHandlers:function(e){for(var t in e)document.addEventListener(t,e[t],!1)},_removeHandlers:function(e){for(var t in e)document.removeEventListener(t,e[t],!1)},_start:function(e,t){document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur(),this.hasMoved=!1,this._fireChangeEvent("onBeforeChange");var n=this.state.zIndices;n.splice(n.indexOf(e),1),n.push(e),this.setState({startValue:this.state.value[e],startPosition:t,index:e,zIndices:n})},_onMouseUp:function(){this._onEnd(this._getMouseEventMap())},_onTouchEnd:function(){this._onEnd(this._getTouchEventMap())},_onEnd:function(e){this._removeHandlers(e),this.setState({index:-1},this._fireChangeEvent.bind(this,"onAfterChange"))},_onMouseMove:function(e){var t=this._getMousePosition(e);this._move(t[0])},_onTouchMove:function(e){if(!(e.touches.length>1)){var t=this._getTouchPosition(e);if(void 0===this.isScrolling){var n=t[0]-this.startPosition[0],r=t[1]-this.startPosition[1];this.isScrolling=Math.abs(r)>Math.abs(n)}this.isScrolling?this.setState({index:-1}):(Ri(e),this._move(t[0]))}},_move:function(e){this.hasMoved=!0;var t=this.props,n=this.state,r=n.index,o=n.value,i=o.length,a=o[r],s=e-n.startPosition;t.invert&&(s*=-1);var c=s/(n.sliderLength-n.handleSize)*(t.max-t.min),l=this._trimAlignValue(n.startValue+c),u=t.minDistance;if(!t.pearling){if(r>0){var p=o[r-1];l<p+u&&(l=p+u)}if(r<i-1){var f=o[r+1];l>f-u&&(l=f-u)}}o[r]=l,t.pearling&&i>1&&(l>a?(this._pushSucceeding(o,u,r),this._trimSucceeding(i,o,u,t.max)):l<a&&(this._pushPreceding(o,u,r),this._trimPreceding(i,o,u,t.min))),l!==a&&this.setState({value:o},this._fireChangeEvent.bind(this,"onChange"))},_pushSucceeding:function(e,t,n){var r,o;for(o=e[r=n]+t;null!=e[r+1]&&o>e[r+1];o=e[++r]+t)e[r+1]=this._alignValue(o)},_trimSucceeding:function(e,t,n,r){for(var o=0;o<e;o++){var i=r-o*n;t[e-1-o]>i&&(t[e-1-o]=i)}},_pushPreceding:function(e,t,n){var r,o;for(o=e[r=n]-t;null!=e[r-1]&&o<e[r-1];o=e[--r]-t)e[r-1]=this._alignValue(o)},_trimPreceding:function(e,t,n,r){for(var o=0;o<e;o++){var i=r+o*n;t[o]<i&&(t[o]=i)}},_axisKey:function(){var e=this.props.orientation;return"horizontal"===e?"X":"vertical"===e?"Y":"X"},_orthogonalAxisKey:function(){var e=this.props.orientation;return"horizontal"===e?"Y":"vertical"===e?"X":"Y"},_posMinKey:function(){var e=this.props.orientation;return"horizontal"===e?this.props.invert?"right":"left":"vertical"===e?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},_posMaxKey:function(){var e=this.props.orientation;return"horizontal"===e?this.props.invert?"left":"right":"vertical"===e?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},_sizeKey:function(){var e=this.props.orientation;return"horizontal"===e?"clientWidth":"vertical"===e?"clientHeight":"clientWidth"},_trimAlignValue:function(e,t){return this._alignValue(this._trimValue(e,t),t)},_trimValue:function(e,t){return e<=(t=t||this.props).min&&(e=t.min),e>=t.max&&(e=t.max),e},_alignValue:function(e,t){var n=(e-(t=t||this.props).min)%t.step,r=e-n;return 2*Math.abs(n)>=t.step&&(r+=n>0?t.step:-t.step),parseFloat(r.toFixed(5))},_renderHandle:function(e,t){var n=this.props.handleClassName+" "+this.props.handleClassName+"-"+t+" "+(this.state.index===t?this.props.handleActiveClassName:"");return o.a.createElement("div",{ref:"handle"+t,key:"handle"+t,className:n,style:_i(_i({},zi.handle),e),onMouseDown:this._createOnMouseDown(t),onTouchStart:this._createOnTouchStart(t)})},_renderHandles:function(e){for(var t=e.length,n=this.tempArray,r=0;r<t;r++)n[r]=this._buildHandleStyle(e[r],r);for(var o=this.tempArray,i=0;i<t;i++)o[i]=this._renderHandle(n[i],i);return o},_buildBarStyle:function(e,t){var n={position:"absolute",willChange:this.state.index>=0?this._posMinKey()+","+this._posMaxKey():""};return n[this._posMinKey()]=e,n[this._posMaxKey()]=t,n},_renderBar:function(e,t,n){var r=this.props.barClassName+" "+this.props.barClassName+"-"+e,i=this._buildBarStyle(t,this.state.upperBound-n);return i=0===e&&!Ii()(this.props.defaultValue)||1===e&&Ii()(this.props.defaultValue)?Di()({},i,zi.selectedBar):Di()({},i,zi.unselectedBar),o.a.createElement("div",{key:"bar"+e,ref:"bar"+e,className:r,style:_i(_i({},zi.bar),i)})},_renderBars:function(e){var t=[],n=e.length-1;t.push(this._renderBar(0,0,e[0]));for(var r=0;r<n;r++)t.push(this._renderBar(r+1,e[r],e[r+1]));return t.push(this._renderBar(n+1,e[n],this.state.upperBound)),t},_onSliderMouseDown:function(e){var t=this;if(!this.props.disabled){if(this.hasMoved=!1,!this.props.snapDragDisabled){var n=this._getMousePosition(e);this._forceValueFromPosition(n[0],(function(e){t._fireChangeEvent("onChange"),t._start(e,n[0]),t._addHandlers(t._getMouseEventMap())}))}Ri(e)}},_onSliderClick:function(e){if(!this.props.disabled&&this.props.onSliderClick&&!this.hasMoved){var t=this._getMousePosition(e),n=this._trimAlignValue(this._calcValue(this._calcOffsetFromPosition(t[0])));this.props.onSliderClick(n)}},_fireChangeEvent:function(e){this.props[e]&&this.props[e](Fi(this.state.value))},render:function(){for(var e=this.tempArray,t=this.state.value,n=this.state.value.length,r=0;r<n;r++)e[r]=this._calcOffset(t[r],r);var i="vertical"===this.props.orientation?zi.verticalSlider:zi.horizontalSlider;return o.a.createElement("div",{ref:"slider",style:_i(_i({},zi.base),i),onMouseDown:this._onSliderMouseDown,onClick:this._onSliderClick},this.props.withBars?this._renderBars(e):null,this._renderHandles(e))}});function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hi(e,t){return(Hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ui(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xi(e);if(t){var o=Xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qi(this,n)}}function qi(e,t){return!t||"object"!==Vi(t)&&"function"!=typeof t?Qi(e):t}function Qi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xi(e){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ji,Zi=c.c.div.withConfig({displayName:"date-range-inputs__DateLabel",componentId:"sc-1amycy9-0"})(["font-family:",";margin-bottom:5px;font-size:12px;font-weight:400;color:",";float:",";"],(function(e){return e.theme["font-family"]}),(function(e){return e.theme.color}),(function(e){return e.right?"right":"left"})),Ki=Object(s.b)((function(e){return{branchLengthsToDisplay:e.controls.branchLengthsToDisplay,dateMin:e.controls.dateMin,dateMax:e.controls.dateMax,dateMinNumeric:e.controls.dateMinNumeric,dateMaxNumeric:e.controls.dateMaxNumeric,absoluteDateMin:e.controls.absoluteDateMin,absoluteDateMax:e.controls.absoluteDateMax,absoluteDateMinNumeric:e.controls.absoluteDateMinNumeric,absoluteDateMaxNumeric:e.controls.absoluteDateMaxNumeric}}))(Wi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hi(e,t)}(a,e);var t,n,r,i=Ui(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={lastSliderUpdateTime:Date.now()},t.updateFromSliderNotDebounced=t.updateFromSlider.bind(Qi(t),!1),t.updateFromSliderDebounced=t.updateFromSlider.bind(Qi(t),!0),t}return t=a,(n=[{key:"maybeClearMapAnimationInterval",value:function(){window.NEXTSTRAIN&&window.NEXTSTRAIN.animationTickReference&&(clearInterval(window.NEXTSTRAIN.animationTickReference),window.NEXTSTRAIN.animationTickReference=null,this.props.dispatch({type:g.C,data:"Play"}))}},{key:"updateFromSlider",value:function(e,t){if(this.maybeClearMapAnimationInterval(),e){var n=Date.now();if(n<this.state.lastSliderUpdateTime+100)return null;this.setState({lastSliderUpdateTime:n})}var r={min:Object(m.d)(t[0]),max:Object(m.d)(t[1])};return this.props.dateMin!==r.min&&this.props.dateMax===r.max?this.props.dispatch(Object(d.c)({newMin:r.min,quickdraw:e})):this.props.dateMin===r.min&&this.props.dateMax!==r.max?this.props.dispatch(Object(d.c)({newMax:r.max,quickdraw:e})):this.props.dateMin!==r.min&&this.props.dateMax!==r.max?this.props.dispatch(Object(d.c)({newMin:r.min,newMax:r.max,quickdraw:e})):!1===e&&this.props.dispatch(Object(d.c)({quickdraw:e})),null}},{key:"render",value:function(){return"divOnly"===this.props.branchLengthsToDisplay?null:o.a.createElement("div",null,o.a.createElement("div",{style:{width:b.l}},o.a.createElement(Yi,{min:this.props.absoluteDateMinNumeric,max:this.props.absoluteDateMaxNumeric,defaultValue:[this.props.absoluteDateMinNumeric,this.props.absoluteDateMaxNumeric],value:[this.props.dateMinNumeric,this.props.dateMaxNumeric],onChange:this.updateFromSliderDebounced,onAfterChange:this.updateFromSliderNotDebounced,minDistance:b.D*(this.props.absoluteDateMaxNumeric-this.props.absoluteDateMinNumeric),pearling:!0,withBars:!0})),o.a.createElement("div",{style:{height:5}}),o.a.createElement("div",{style:{width:b.l}},o.a.createElement(Zi,null,this.props.dateMin),o.a.createElement(Zi,{right:!0},this.props.dateMax)))}}])&&Gi(t.prototype,n),r&&Gi(t,r),a}(o.a.Component))||Wi,$i=c.c.div.withConfig({displayName:"styles__ControlsContainer",componentId:"sc-3vqs3j-0"})(["display:flex;flex-direction:column;align-content:stretch;flex-wrap:nowrap;height:100%;order:0;flex-grow:0;flex-shrink:1;flex-basis:auto;align-self:auto;padding:0px 20px 20px 20px;"]),ea=c.c.span.withConfig({displayName:"styles__SidebarHeader",componentId:"sc-3vqs3j-1"})(["font-family:",";font-size:16px;line-height:28px;margin-top:15px;margin-bottom:5px;font-weight:500;color:",";"],(function(e){return e.theme["font-family"]}),(function(e){return e.theme.color})),ta=c.c.button.withConfig({displayName:"styles__SidebarButton",componentId:"sc-3vqs3j-2"})(["border:0px;background-color:inherit;margin:5px 0px 10px 5px;border-radius:2px;cursor:pointer;padding:2px;font-family:",";color:",";font-weight:400;text-transform:uppercase;font-size:14px;vertical-align:top;outline:0;"],(function(e){return e.theme["font-family"]}),(function(e){return e.selected?e.theme.selectedColor:e.theme.unselectedColor})),na=c.c.div.withConfig({displayName:"styles__SidebarSubtitle",componentId:"sc-3vqs3j-3"})(["font-family:",";margin:","px 0px 5px 0px;font-size:12px;font-weight:400;color:",";"],(function(e){return e.theme["font-family"]}),(function(e){return e.spaceAbove?"5":"0"}),(function(e){return e.theme.color}));function ra(e){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ca(e);if(t){var o=ca(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sa(this,n)}}function sa(e,t){return!t||"object"!==ra(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ca(e){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var la,ua,pa,fa=Object(s.b)((function(e){return{selected:e.controls.selectedBranchLabel,available:e.tree.availableBranchLabels}}))(Ji=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(a,e);var t,n,r,i=aa(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).change=function(e){t.props.dispatch({type:g.m,value:e.value})},t}return t=a,(n=[{key:"render",value:function(){var e=this.props.t;return o.a.createElement("div",{style:{paddingTop:5}},o.a.createElement(na,null,e("sidebar:Branch Labels")),o.a.createElement("div",{style:{width:b.l,fontSize:14}},o.a.createElement(mi.a,{value:this.props.selected,options:this.props.available.map((function(e){return{value:e,label:e}})),clearable:!1,searchable:!1,multi:!1,onChange:this.change})))}}])&&oa(t.prototype,n),r&&oa(t,r),a}(o.a.Component))||Ji,ha=Object(f.a)()(fa);function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ba(e,t){return(ba=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wa(e);if(t){var o=wa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return va(this,n)}}function va(e,t){return!t||"object"!==da(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wa(e){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ma,ja,Sa,La=Object(c.d)(zt),xa=Object(c.d)((function(e){var t=e.theme,n=e.selected,r=e.width,i=n?t.selectedColor:t.unselectedColor;return o.a.createElement("svg",{width:r,height:r+5},o.a.createElement("g",{transform:"translate(0,0)"},o.a.createElement("svg",{width:r,height:r,viewBox:"14 14 25 26"},o.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(15.000000, 15.000000)"},o.a.createElement("path",{d:"M15,15 L17.6450195,15",id:"Path-12",stroke:i}),o.a.createElement("path",{d:"M15.229248,22.5795898 L15.229248,18.2854004 C15.229248,18.2854004 17.8465223,17.6291504 17.8508301,15.0574951 C17.8551378,12.4858398 15.2944336,11.9138184 15.2944336,11.9138184 L15.229248,7.53540039",id:"Path-13",stroke:i}),o.a.createElement("path",{d:"M7.63037109,6.10498047 L10.230957,9.08325195 C10.230957,9.08325195 12.25,7.08233714 15.126709,7.04162598 C18.003418,7.00091481 20.5390625,8.91748047 20.5390625,8.91748047 L22.9765625,5.60839844",id:"Path-14",stroke:i}),o.a.createElement("path",{d:"M0.15942005,4.99135298 L2.76065146,7.96962446 C2.76065146,7.96962446 4.78019556,5.96870965 7.65761856,5.92799848 C10.5350415,5.88728732 13.0713154,7.80385298 13.0713154,7.80385298 L15.5094204,4.49477094",id:"Path-14",stroke:i,transform:"translate(7.834420, 6.232198) rotate(-34.000000) translate(-7.834420, -6.232198) "}),o.a.createElement("path",{d:"M7.5,21.496582 L10.1005859,24.4748535 C10.1005859,24.4748535 12.1196289,22.4739387 14.9963379,22.4332275 C17.8730469,22.3925164 20.4086914,24.309082 20.4086914,24.309082 L22.8461914,21",id:"Path-14",stroke:i,transform:"translate(15.173096, 22.737427) scale(1, -1) translate(-15.173096, -22.737427) "})))))})),Oa=Object(c.d)((function(e){var t=e.theme,n=e.selected,r=e.width,i=n?t.selectedColor:t.unselectedColor;return o.a.createElement("svg",{width:r,height:r+5},o.a.createElement("g",{transform:"translate(0,2)"},o.a.createElement("svg",{width:r,height:r,viewBox:"106 49 150 118"},o.a.createElement("polyline",{id:"Path-2",stroke:i,strokeWidth:"4",fill:"none",points:"108 77 125.182237 87.8599894 133.381156 119.402591 111.867082 144.368016"}),o.a.createElement("path",{d:"M125.2,87.5 L137.624777,70",id:"Path-3",stroke:i,strokeWidth:"4",fill:"none"}),o.a.createElement("polyline",{id:"Path-4",stroke:i,strokeWidth:"4",fill:"none",points:"133 119.331781 192.127357 119.400002 215.445998 80.3916603 203.946476 51.4000015"}),o.a.createElement("path",{d:"M215.5,80.5 L253.378522,73",id:"Path-5",stroke:i,strokeWidth:"4",fill:"none"}),o.a.createElement("path",{d:"M192,119.2 L229.854937,164.55391",id:"Path-6",stroke:i,strokeWidth:"4",fill:"none"}))))})),Ta=Object(c.d)((function(e){var t=e.theme,n=e.selected,r=e.width,i=n?t.selectedColor:t.unselectedColor;return o.a.createElement("svg",{width:r,height:r+5},o.a.createElement("g",{transform:"translate(0,4)"},o.a.createElement("svg",{width:r,height:r,viewBox:"0 0 30 30 "},o.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)"},o.a.createElement("polyline",{id:"Path-3",stroke:i,points:"-15 5 -15 -25 "}),o.a.createElement("polyline",{id:"Path-4",stroke:i,points:"-15 5 25 5"}),o.a.createElement("polyline",{id:"Path-5",stroke:i,points:"-12 3 20 -25 "}),o.a.createElement("circle",{id:"c-1",stroke:i,cx:"-8",cy:"0",r:"2"}),o.a.createElement("circle",{id:"c-2",stroke:i,cx:"4",cy:"-10",r:"2"}),o.a.createElement("circle",{id:"c-3",stroke:i,cx:"4",cy:"-15",r:"2"}),o.a.createElement("circle",{id:"c-4",stroke:i,cx:"-4",cy:"-5",r:"2"}),o.a.createElement("circle",{id:"c-5",stroke:i,cx:"-2",cy:"-11",r:"2"})))))})),Ea=c.c.div.withConfig({displayName:"choose-layout__RowContainer",componentId:"sc-16x4jtt-0"})(["padding:0px 5px 1px 5px;"]),Ca=Object(s.b)((function(e){return{layout:e.controls.layout,showTreeToo:e.controls.showTreeToo,branchLengthsToDisplay:e.controls.branchLengthsToDisplay}}))((pa=ua=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ba(e,t)}(a,e);var t,n,r,i=ga(a);function a(){return ya(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"handleChangeLayoutClicked",value:function(e){window.NEXTSTRAIN&&window.NEXTSTRAIN.animationTickReference||("rect"===e?Object(Zr.a)("change-layout-rectangular"):"radial"===e?Object(Zr.a)("change-layout-radial"):"unrooted"===e?Object(Zr.a)("change-layout-unrooted"):"clock"===e?Object(Zr.a)("change-layout-clock"):console.warn("Odd... controls/choose-layout.js tried to set a layout we don't offer..."),this.props.dispatch({type:g.r,data:e}))}},{key:"render",value:function(){var e=this.props.t;if(this.props.showTreeToo)return null;var t=this.props.layout;return o.a.createElement("div",{style:{marginBottom:15}},o.a.createElement(na,null,e("sidebar:Layout")),o.a.createElement(Ea,null,o.a.createElement(La,{width:25,selected:"rect"===t}),o.a.createElement(ta,{selected:"rect"===t,onClick:this.handleChangeLayoutClicked.bind(this,"rect")},e("sidebar:rectangular"))),o.a.createElement(Ea,null,o.a.createElement(xa,{width:25,selected:"radial"===t}),o.a.createElement(ta,{selected:"radial"===t,onClick:this.handleChangeLayoutClicked.bind(this,"radial")},e("sidebar:radial"))),o.a.createElement(Ea,null,o.a.createElement(Oa,{width:25,selected:"unrooted"===t}),o.a.createElement(ta,{selected:"unrooted"===t,onClick:this.handleChangeLayoutClicked.bind(this,"unrooted")},e("sidebar:unrooted"))),"divAndDate"===this.props.branchLengthsToDisplay?o.a.createElement(Ea,null,o.a.createElement(Ta,{width:25,selected:"clock"===t}),o.a.createElement(ta,{selected:"clock"===t,onClick:this.handleChangeLayoutClicked.bind(this,"clock")},e("sidebar:clock"))):null)}}])&&ma(t.prototype,n),r&&ma(t,r),a}(o.a.Component),Ma=ua,ja="propTypes",Sa={layout:a.a.string.isRequired,dispatch:a.a.func.isRequired},ja in Ma?Object.defineProperty(Ma,ja,{value:Sa,enumerable:!0,configurable:!0,writable:!0}):Ma[ja]=Sa,la=pa))||la,ka=Object(f.a)()(Ca);function Da(e){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aa(e,t){return(Aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=za(e);if(t){var o=za(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pa(this,n)}}function Pa(e,t){return!t||"object"!==Da(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ra,Ba=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aa(e,t)}(a,e);var t,n,r,i=_a(a);function a(){return Na(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"changeDataset",value:function(e){Object(Zr.a)("change-virus-to-".concat(e.replace(/\//g,""))),window.NEXTSTRAIN&&window.NEXTSTRAIN.animationTickReference&&(clearInterval(window.NEXTSTRAIN.animationTickReference),window.NEXTSTRAIN.animationTickReference=null,this.props.dispatch({type:g.C,data:"Play"})),this.props.dispatch(Object(ei.b)({path:e}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{width:b.l,fontSize:14}},o.a.createElement(mi.a,{value:this.props.selected,options:this.props.options||[],clearable:!1,searchable:!1,multi:!1,onChange:function(t){t.value!==e.props.selected&&e.changeDataset("/".concat(t.value))}}))}}])&&Ia(t.prototype,n),r&&Ia(t,r),a}(o.a.Component);function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Va(e,t){return(Va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ua(e);if(t){var o=Ua(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ha(this,n)}}function Ha(e,t){return!t||"object"!==Fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ua(e){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qa,Qa=Object(s.b)((function(e){return{available:e.controls.available}}))(Ra=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Va(e,t)}(a,e);var t,n,r,i=Ga(a);function a(){return Wa(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props.t;if(!this.props.available||!this.props.available.datasets||!this.props.available.datasets.length)return null;var n=window.location.pathname.replace(/^\//,"").replace(/\/$/,"").split(":")[0].split("/"),r=n.map((function(t,r){return Array.from(new Set(e.props.available.datasets.filter((function(e){return t=e.request.split("/"),o=n,i=r,t.slice(0,i).every((function(e,t){return e===o[t]}));var t,o,i})).map((function(e){return e.request.split("/")[r]})))).map((function(e){return{value:n.slice(0,r).concat(e).join("/"),label:e}}))}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(ea,null,t("sidebar:Dataset")),r.map((function(t,r){return o.a.createElement(Ba,{key:n[r],dispatch:e.props.dispatch,selected:n.slice(0,r+1).join("/"),options:t})})))}}])&&Ya(t.prototype,n),r&&Ya(t,r),a}(o.a.Component))||Ra,Xa=Object(f.a)()(Qa),Ja=n("XBAN");function Za(e){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ka(e){return function(e){if(Array.isArray(e))return $a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function es(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ns(e,t){return(ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=is(e);if(t){var o=is(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return os(this,n)}}function os(e,t){return!t||"object"!==Za(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var as,ss=Object(s.b)((function(e){return{available:e.controls.available,treeName:e.tree.name,showTreeToo:e.controls.showTreeToo}}))(qa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ns(e,t)}(a,e);var t,n,r,i=rs(a);function a(){return es(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props.t;if(!this.props.available||!this.props.available.datasets)return null;var n=window.location.pathname.replace(/^\//,"").replace(/\/$/,"").split(":")[0],r=[];return this.props.available.datasets.filter((function(e){return e.request===n&&(r=Ka(e.secondTreeOptions)),null})),this.props.showTreeToo&&r.unshift("REMOVE"),o.a.createElement("div",null,o.a.createElement(na,{spaceAbove:!0},t("sidebar:Second Tree")),o.a.createElement("div",{key:"treetooselect",style:{width:b.l,fontSize:14}},o.a.createElement(mi.a,{name:"selectTreeToo",id:"selectTreeToo",value:this.props.showTreeToo,options:r.map((function(e){return{value:e,label:e}})),clearable:!1,searchable:!1,multi:!1,onChange:function(t){"REMOVE"===t.value?e.props.dispatch({type:g.J}):e.props.dispatch(Object(Ja.b)(t.value,n))}})))}}])&&ts(t.prototype,n),r&&ts(t,r),a}(o.a.Component))||qa,cs=Object(f.a)()(ss),ls=c.c.label.withConfig({displayName:"toggle__ToggleBackground",componentId:"sc-1r21f6e-0"})(["position:relative;display:inline-block;width:35px;height:21px;input{display:none;}input:checked{background-color:",";}"],(function(e){return e.theme.unselectedColor})),us=Object(c.c)(na).withConfig({displayName:"toggle__ToggleSubtitle",componentId:"sc-1r21f6e-1"})(["margin-left:40px;margin-top:4px;width:200px;"]),ps=c.c.div.withConfig({displayName:"toggle__Slider",componentId:"sc-1r21f6e-2"})(["&{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:",';-webkit-transition:.4s;transition:.4s;border-radius:12px;}&:before{position:absolute;content:"";height:15px;width:15px;left:4px;bottom:3px;background-color:#FFF;-webkit-transition:.4s;transition:.4s;border-radius:50%;}input:checked + &:before{-webkit-transform:translateX(13px);-ms-transform:translateX(13px);transform:translateX(13px);}'],(function(e){return e.theme.unselectedBackground})),fs=c.c.input.withConfig({displayName:"toggle__Input",componentId:"sc-1r21f6e-3"})(['&{margin-left:"40px"}&:checked + ',"{background-color:",";}&:focus{box-shadow:0 0 1px #2196F3;}"],ps,(function(e){return e.theme.selectedColor})),hs=function(e){var t=e.display,n=e.on,r=e.callback,i=e.label,a=e.style,s=void 0===a?{}:a;return t?o.a.createElement("div",{style:s},o.a.createElement(ls,null,o.a.createElement(fs,{type:"checkbox",checked:n,onChange:r}),o.a.createElement(ps,null),""===i?null:o.a.createElement(us,null,i))):null};function ds(e){return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ms(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bs(e,t){return(bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ws(e);if(t){var o=ws(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vs(this,n)}}function vs(e,t){return!t||"object"!==ds(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ws(e){return(ws=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ms,js=Object(s.b)((function(e){return{distanceMeasure:e.controls.distanceMeasure,showTreeToo:e.controls.showTreeToo,branchLengthsToDisplay:e.controls.branchLengthsToDisplay,temporalConfidence:e.controls.temporalConfidence}}))(as=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bs(e,t)}(a,e);var t,n,r,i=gs(a);function a(){return ys(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props.t;return"divAndDate"!==this.props.branchLengthsToDisplay?null:o.a.createElement("div",{style:{marginBottom:0}},o.a.createElement(na,null,t("sidebar:Branch Length")),o.a.createElement(ta,{selected:"num_date"===this.props.distanceMeasure,onClick:function(){Object(Zr.a)("tree-metric-temporal"),e.props.dispatch({type:g.o,data:"num_date"})}},t("sidebar:time")),o.a.createElement("span",{style:{paddingRight:"12px"}}),o.a.createElement(ta,{selected:"div"===this.props.distanceMeasure,onClick:function(){Object(Zr.a)("tree-metric-temporal"),e.props.dispatch({type:g.o,data:"div"})}},t("sidebar:divergence")),this.props.showTreeToo?null:o.a.createElement("div",{style:{margin:5}},o.a.createElement(hs,{display:this.props.temporalConfidence.display,on:this.props.temporalConfidence.on,callback:function(){return e.props.dispatch(Object(d.d)())},label:t("sidebar:Show confidence intervals")})))}}])&&ms(t.prototype,n),r&&ms(t,r),a}(o.a.Component))||as,Ss=Object(f.a)()(js);function Ls(e){return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Os(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ts(e,t){return(Ts=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Es(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ks(e);if(t){var o=ks(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cs(this,n)}}function Cs(e,t){return!t||"object"!==Ls(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ks(e){return(ks=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ds,Ns=c.c.span.withConfig({displayName:"panel-layout__ButtonText",componentId:"sc-12zrah-0"})(["margin:5px;position:relative;top:-1px;"]),Is=Object(c.d)((function(e){var t=e.theme,n=e.selected,r=e.width,i=n?t.selectedColor:t.unselectedColor;return o.a.createElement("svg",{width:r,height:r+5},o.a.createElement("g",{transform:"translate(0,6)"},o.a.createElement("svg",{width:r,height:r,viewBox:"0 0 30 30 "},o.a.createElement("g",{id:"Group",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},o.a.createElement("rect",{fill:"none",stroke:i,x:"1",y:"1",width:"7",height:"25"}),o.a.createElement("rect",{fill:"none",stroke:i,x:"8",y:"1",width:"20",height:"25"})))))})),As=Object(c.d)(Rt),_s=Object(s.b)((function(e){return{panelLayout:e.controls.panelLayout,canTogglePanelLayout:e.controls.canTogglePanelLayout}}))(Ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ts(e,t)}(a,e);var t,n,r,i=Es(a);function a(){return xs(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props.t;return this.props.canTogglePanelLayout?o.a.createElement("div",{style:{marginTop:0,marginBottom:10}},o.a.createElement(Is,{width:22,selected:"full"===this.props.panelLayout}),o.a.createElement(ta,{selected:"full"===this.props.panelLayout,onClick:function(){Object(Zr.a)("change-layout-full"),e.props.dispatch({type:g.s,data:"full"})}},o.a.createElement(Ns,null,t("sidebar:full"))),o.a.createElement(As,{width:22,selected:"grid"===this.props.panelLayout}),o.a.createElement(ta,{selected:"grid"===this.props.panelLayout,onClick:function(){Object(Zr.a)("change-layout-grid"),e.props.dispatch({type:g.s,data:"grid"})}},o.a.createElement(Ns,null,t("sidebar:grid")))):null}}])&&Os(t.prototype,n),r&&Os(t,r),a}(o.a.Component))||Ms,Ps=Object(f.a)()(_s);function zs(e){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fs(e,t){return(Fs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vs(e);if(t){var o=Vs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ys(this,n)}}function Ys(e,t){return!t||"object"!==zs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vs(e){return(Vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gs,Hs=Object(s.b)((function(e){return{metadata:e.metadata,geoResolution:e.controls.geoResolution}}))(Ds=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fs(e,t)}(a,e);var t,n,r,i=Ws(a);function a(){return Rs(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"getGeoResolutionOptions",value:function(){return this.props.metadata.loaded?this.props.metadata.geoResolutions.map((function(e){return{value:e.key,label:e.title||e.key}})):[]}},{key:"changeGeoResolution",value:function(e){Object(Zr.a)("change-geo-resolution"),this.props.dispatch({type:g.p,data:e})}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.getGeoResolutionOptions();return o.a.createElement(o.a.Fragment,null,o.a.createElement(na,{spaceAbove:!0},t("sidebar:Geographic resolution")),o.a.createElement("div",{style:{marginBottom:10,width:b.l,fontSize:14}},o.a.createElement(mi.a,{name:"selectGeoResolution",id:"selectGeoResolution",value:this.props.geoResolution,options:n,clearable:!1,searchable:!1,multi:!1,onChange:function(t){e.changeGeoResolution(t.value)}})))}}])&&Bs(t.prototype,n),r&&Bs(t,r),a}(o.a.Component))||Ds,Us=Object(f.a)()(Hs);function qs(e){return(qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Js(e,t){return(Js=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$s(e);if(t){var o=$s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ks(this,n)}}function Ks(e,t){return!t||"object"!==qs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $s(e){return($s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ec,tc=Object(s.b)((function(e){return{showTransmissionLines:e.controls.showTransmissionLines}}))(Gs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Js(e,t)}(a,e);var t,n,r,i=Zs(a);function a(){return Qs(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props.t;return o.a.createElement("div",{style:{marginBottom:10,width:b.l,fontSize:14}},o.a.createElement(hs,{display:!0,on:this.props.showTransmissionLines,callback:function(){e.props.dispatch({type:g.S,data:!e.props.showTransmissionLines})},label:t("sidebar:Show transmission lines")}))}}])&&Xs(t.prototype,n),r&&Xs(t,r),a}(o.a.Component))||Gs,nc=Object(f.a)()(tc),rc=n("Rf7/");function oc(e){return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ic(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sc(e,t){return(sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uc(e);if(t){var o=uc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lc(this,n)}}function lc(e,t){return!t||"object"!==oc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uc(e){return(uc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pc,fc=Object(s.b)((function(e){return{controls:e.controls,frequencies:e.frequencies,tree:e.tree}}))(ec=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sc(e,t)}(a,e);var t,n,r,i=cc(a);function a(){return ic(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props.t;return o.a.createElement("div",{style:{marginBottom:10,width:b.l,fontSize:14}},o.a.createElement(hs,{display:!0,on:this.props.controls.normalizeFrequencies,callback:function(){var t=!e.props.controls.normalizeFrequencies,n=Object(rc.a)(e.props.frequencies.data,e.props.frequencies.pivots,e.props.tree.nodes,e.props.tree.visibility,e.props.controls.colorScale,e.props.controls.colorBy,t);e.props.dispatch({type:g.A,matrix:n,normalizeFrequencies:t})},label:t("sidebar:Normalize frequencies")}))}}])&&ac(t.prototype,n),r&&ac(t,r),a}(o.a.Component))||ec,hc=Object(f.a)()(fc);function dc(e){return(dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bc(e,t){return(bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wc(e);if(t){var o=wc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vc(this,n)}}function vc(e,t){return!t||"object"!==dc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wc(e){return(wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mc,jc=Object(s.b)((function(e){return{branchLengthsToDisplay:e.controls.branchLengthsToDisplay,mapAnimationStartDate:e.controls.mapAnimationStartDate,mapAnimationDurationInMilliseconds:e.controls.mapAnimationDurationInMilliseconds,mapAnimationCumulative:e.controls.mapAnimationCumulative,mapAnimationShouldLoop:e.controls.mapAnimationShouldLoop}}))(pc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bc(e,t)}(a,e);var t,n,r,i=gc(a);function a(){return yc(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"handleChangeAnimationTimeClicked",value:function(e){var t=this;return function(){var n;window.NEXTSTRAIN&&window.NEXTSTRAIN.animationTickReference||(Object(Zr.a)("change-animation-time"),"slow"===e?n=6e4:"medium"===e?n=3e4:"fast"===e?n=15e3:console.warn("Odd... controls/map-animation.js tried to set an animation speed we don't offer..."),t.props.dispatch({type:g.l,data:n}))}}},{key:"render",value:function(){var e=this,t=this.props.t;return"divOnly"===this.props.branchLengthsToDisplay?null:o.a.createElement("div",{id:"mapAnimationControls"},o.a.createElement(na,{spaceAbove:!0},t("sidebar:Animation Speed")),o.a.createElement(ta,{selected:6e4===this.props.mapAnimationDurationInMilliseconds,onClick:this.handleChangeAnimationTimeClicked("slow")},t("sidebar:Slow")),o.a.createElement(ta,{selected:3e4===this.props.mapAnimationDurationInMilliseconds,onClick:this.handleChangeAnimationTimeClicked("medium")},t("sidebar:Medium")),o.a.createElement(ta,{selected:15e3===this.props.mapAnimationDurationInMilliseconds,onClick:this.handleChangeAnimationTimeClicked("fast")},t("sidebar:Fast")),o.a.createElement("div",{style:{marginBottom:5}}),o.a.createElement(hs,{display:!0,on:this.props.mapAnimationShouldLoop,callback:function(){e.props.dispatch({type:g.j,data:!e.props.mapAnimationShouldLoop})},label:t("sidebar:Loop animation")}),o.a.createElement("br",null),o.a.createElement(hs,{display:!0,on:this.props.mapAnimationCumulative,callback:function(){Object(Zr.a)("change-animation-cumulative"),e.props.dispatch({type:g.i,data:!e.props.mapAnimationCumulative})},label:t("sidebar:Animate cumulative history")}))}}])&&mc(t.prototype,n),r&&mc(t,r),a}(o.a.Component))||pc,Sc=Object(f.a)()(jc);function Lc(e){return(Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tc(e,t){return(Tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ec(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kc(e);if(t){var o=kc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cc(this,n)}}function Cc(e,t){return!t||"object"!==Lc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kc(e){return(kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dc,Nc=Object(s.b)((function(e){return{panelsAvailable:e.controls.panelsAvailable,panelsToDisplay:e.controls.panelsToDisplay,showTreeToo:e.controls.showTreeToo}}))(Mc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tc(e,t)}(a,e);var t,n,r,i=Ec(a);function a(){return xc(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props.t,n=this.props.panelsAvailable.slice();return this.props.showTreeToo&&-1!==n.indexOf("map")&&n.splice(n.indexOf("map"),1),n.map((function(n){return o.a.createElement(hs,{key:n,display:!0,on:-1!==e.props.panelsToDisplay.indexOf(n),callback:function(){return e.props.dispatch((t=n,function(e,n){var r,o=n().controls,i=o.panelsToDisplay.indexOf(t);-1===i?r=o.panelsAvailable.filter((function(e){return-1!==o.panelsToDisplay.indexOf(e)||e===t})):(r=o.panelsToDisplay.slice()).splice(i,1);var a=o.panelLayout;-1!==r.indexOf("tree")&&-1!==r.indexOf("map")||(a="full"),e({type:g.O,panelsToDisplay:r,panelLayout:a})}));var t},label:t("sidebar:Show "+n),style:{paddingBottom:"10px"}})}))}}])&&Oc(t.prototype,n),r&&Oc(t,r),a}(o.a.Component))||Mc,Ic=Object(f.a)()(Nc),Ac=n("9Pu7"),_c=n.n(Ac);n("QXb2");function Pc(e){return(Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rc(e,t){return(Rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wc(e);if(t){var o=Wc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fc(this,n)}}function Fc(e,t){return!t||"object"!==Pc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wc(e){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yc,Vc=function(e){var t=e.onClick;return e.show?o.a.createElement("div",{className:"boxed-item-icon",style:{float:"right",height:"23px",width:"23px",borderTopRightRadius:"2px",borderBottomRightRadius:"2px",borderRightWidth:"1px",fontSize:18},onClick:t},"×"):null},Gc=c.c.div.withConfig({displayName:"search__Container",componentId:"sc-1t5klrg-0"})(["font-family:",";font-size:14px;display:inline-block;color:",";"],(function(e){return e.theme["font-family"]}),(function(e){return e.theme.color})),Hc=c.c.div.withConfig({displayName:"search__InputContainer",componentId:"sc-1t5klrg-1"})(["width:","px;display:inline-block;"],b.l-10),Uc=c.c.input.withConfig({displayName:"search__Input",componentId:"sc-1t5klrg-2"})(["fontFamily:inherit;color:inherit;fontSize:inherit;width:100%;height:23px;padding-left:7px;border-radius:4px;border:1px solid #ccc;"]),qc=Object(s.b)((function(e){return{nodes:e.tree.nodes,version:e.tree.version,visibility:e.tree.visibility,selectedStrain:e.tree.selectedStrain}}))(Dc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rc(e,t)}(a,e);var t,n,r,i=Bc(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).state={awesomplete:void 0,show:!1},e.removeSelection=function(){e.ref.value=null,e.props.dispatch(Object(d.f)({tipSelected:{clear:!0}})),e.props.dispatch(Object(d.e)()),e.setState({show:!1})},e}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this,t=new _c.a(this.ref,{maxItems:1e3});this.ref.addEventListener("input",(function(t){var n=t.target.value.toLowerCase().trim();e.props.dispatch(Object(d.e)({searchNodes:n.length>1?n:""}))})),this.ref.addEventListener("awesomplete-selectcomplete",(function(t){for(var n=t.text.value,r=0;r<e.props.nodes.length;r++)if(e.props.nodes[r].name===n){e.props.dispatch(Object(d.f)({tipSelected:{treeIdx:e.props.nodes[r].arrayIdx}})),e.props.dispatch(Object(d.e)({tipSelectedIdx:e.props.nodes[r].arrayIdx}));break}e.setState({show:!0})})),this.setState({awesomplete:t})}},{key:"componentWillReceiveProps",value:function(e){this.props.selectedStrain&&!e.selectedStrain&&(this.ref.value=null,this.setState({show:!1}))}},{key:"updateVisibleStrains",value:function(){var e=this;this.state.awesomplete.list=this.props.nodes.filter((function(t){return!t.hasChildren&&e.props.visibility[t.arrayIdx]===b.b})).map((function(e){return e.name})),this.state.awesomplete.evaluate()}},{key:"render",value:function(){var e=this,t=this.props.t;return o.a.createElement(Gc,null,o.a.createElement(na,{spaceAbove:!0},t("sidebar:Search Strains")),o.a.createElement(Hc,null,o.a.createElement(Uc,{ref:function(t){e.ref=t},onFocus:function(){return e.updateVisibleStrains()}})),o.a.createElement(Vc,{show:this.state.show,onClick:this.removeSelection}))}}])&&zc(t.prototype,n),r&&zc(t,r),a}(o.a.Component))||Dc,Qc=Object(f.a)()(qc);function Xc(e){return(Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kc(e,t){return(Kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tl(e);if(t){var o=tl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return el(this,n)}}function el(e,t){return!t||"object"!==Xc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tl(e){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nl,rl=Object(s.b)((function(e){return{showTreeToo:e.controls.showTreeToo,showTangle:e.controls.showTangle}}))(Yc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kc(e,t)}(a,e);var t,n,r,i=$c(a);function a(){return Jc(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this;return this.props.showTreeToo?o.a.createElement(hs,{display:!0,on:this.props.showTangle,callback:function(){return e.props.dispatch({type:g.Q})},label:"Show Tanglegram",style:{paddingTop:"10px"}}):null}}])&&Zc(t.prototype,n),r&&Zc(t,r),a}(o.a.Component))||Yc,ol=n("XzT5");function il(e){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function al(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function sl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){al(i,r,o,a,s,"next",e)}function s(e){al(i,r,o,a,s,"throw",e)}a(void 0)}))}}function cl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ll(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ul(e,t){return(ul=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hl(e);if(t){var o=hl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fl(this,n)}}function fl(e,t){return!t||"object"!==il(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hl(e){return(hl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dl=Object(s.b)((function(e){return{metadata:e.metadata,language:e.general.language}}))(nl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ul(e,t)}(u,e);var t,r,i,a,s,c,l=pl(u);function u(){return cl(this,u),l.apply(this,arguments)}return t=u,(r=[{key:"ensureLanguageResources",value:(c=sl(regeneratorRuntime.mark((function e(t){var r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,o=["language","sidebar","translation"];case 1:if(!(r<o.length)){e.next=11;break}if(i=o[r],ol.a.hasResourceBundle(t,i)){e.next=8;break}return e.next=6,n("o0so")("./".concat(t,"/").concat(i,".json"));case 6:a=e.sent,ol.a.addResourceBundle(t,i,a.default);case 8:r++,e.next=1;break;case 11:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"componentWillMount",value:(s=sl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.language&&"en"!==this.props.language){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ensureLanguageResources(this.props.language);case 4:ol.a.changeLanguage(this.props.language);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getlanguageOptions",value:function(){return[{value:"de",label:"Deutsch"},{value:"en",label:"English"},{value:"es",label:"Español"},{value:"ru",label:"Русский"},{value:"lt",label:"Lietuvių"},{value:"pt",label:"Português"},{value:"fr",label:"Français"},{value:"tr",label:"Türkçe"},{value:"ja",label:"日本語"},{value:"ar",label:"العربية"}]}},{key:"changeLanguage",value:(a=sl(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t!==this.props.language){e.next=2;break}return e.abrupt("return");case 2:return Object(Zr.a)("change-language"),e.next=5,this.ensureLanguageResources(t);case 5:ol.a.changeLanguage(t),this.props.dispatch({type:g.q,data:t});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props.t;return o.a.createElement(o.a.Fragment,null,o.a.createElement(na,{spaceAbove:!0},t("sidebar:Language")),o.a.createElement("div",{style:{paddingBottom:100,width:b.l,fontSize:14}},o.a.createElement(mi.a,{name:"selectLanguage",id:"selectLanguage",value:this.props.language,options:this.getlanguageOptions(),clearable:!1,searchable:!1,multi:!1,onChange:function(t){e.changeLanguage(t.value)}})))}}])&&ll(t.prototype,r),i&&ll(t,i),u}(o.a.Component))||nl,yl=Object(f.a)()(dl);var ml=function(e){var t=e.mapOn,n=e.frequenciesOn,r=Object(Mn.a)().t;return o.a.createElement($i,null,o.a.createElement(Xa,null),o.a.createElement(ea,null,r("sidebar:Date Range")),o.a.createElement(Ki,null),o.a.createElement(ea,null,r("sidebar:Color By")),o.a.createElement(Ti,null),o.a.createElement(ea,null,r("sidebar:Tree Options")),o.a.createElement(ka,null),o.a.createElement(Ss,null),o.a.createElement(ha,null),o.a.createElement(Qc,null),o.a.createElement(cs,null),o.a.createElement(rl,null),t?o.a.createElement("span",{style:{marginTop:"15px"}},o.a.createElement(ea,null,r("sidebar:Map Options")),o.a.createElement(Us,null),o.a.createElement(nc,null),o.a.createElement(Sc,null)):null,n?o.a.createElement("span",{style:{marginTop:"15px"}},o.a.createElement(ea,null,r("sidebar:Frequency Options")),o.a.createElement(hc,null)):null,o.a.createElement("span",{style:{paddingTop:"10px"}}),o.a.createElement(ea,null,r("sidebar:Panel Options")),o.a.createElement(Ps,null),o.a.createElement(Ic,null),o.a.createElement(yl,null))},bl=n("uN13");function gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gl(Object(n),!0).forEach((function(t){wl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ml=c.c.div.withConfig({displayName:"styles__PanelsContainer",componentId:"sc-18umnzu-0"})(["position:absolute;top:0;bottom:0;right:0;transition:left 0.3s ease-out;background-color:#fff;height:",";width:",";overflow-x:hidden;overflow-y:scroll;left:",";"],(function(e){return e.height+"px"}),(function(e){return e.width+"px"}),(function(e){return e.left+"px"})),jl=c.c.div.withConfig({displayName:"styles__SidebarContainer",componentId:"sc-18umnzu-1"})(["position:absolute;top:0;bottom:0;right:0;transition:left 0.3s ease-out;left:",";background-color:",";height:",";width:",";max-width:",";overflow-y:auto;overflow-x:hidden;box-shadow:-3px 0px 3px -3px "," inset;font-family:",";"],(function(e){return e.left+"px"}),(function(e){return e.theme.background}),(function(e){return e.height+"px"}),(function(e){return e.width+"px"}),(function(e){return e.width+"px"}),(function(e){return e.theme.sidebarBoxShadow}),(function(e){return e.theme["font-family"]})),Sl={};Object(bl.b)("sidebarTheme")&&(Sl=Object(bl.a)("sidebarTheme"));var Ll,xl=vl(vl({},{background:"#30353F",color:"#D3D3D3","font-family":"Lato, Helvetica Neue, Helvetica, sans-serif",sidebarBoxShadow:"rgba(255, 255, 255, 1)",selectedColor:"#5DA8A3",unselectedColor:"#BBB",unselectedBackground:"#888"}),Sl),Ol=function(e){var t=e.sidebarOpen,n=e.width,r=e.height,i=e.displayNarrative,a=e.panelsToDisplay,s=e.narrativeTitle,l=e.mobileDisplay,u=e.navBarHandler;return o.a.createElement(c.a,{theme:xl},o.a.createElement(jl,{left:t?0:-1*n,width:n,height:r},o.a.createElement(di.a,{sidebar:!0,mobileDisplay:l,toggleHandler:u,narrativeTitle:!!i&&s,width:n}),i?o.a.createElement(hi,{height:r-b.F,width:n}):o.a.createElement(ml,{mapOn:a.includes("map"),frequenciesOn:a.includes("frequencies")})))},Tl=function(e,t,n,r){var o,i=e.width,a=e.height,s=(o=i,t?o>1500?500:o>1e3?400:310:b.l+b.k),c=n?s:0;return r||(i-=c),{overlayStyles:{position:"absolute",top:0,bottom:0,right:0,display:"block",width:i,height:a,left:n?c:0,opacity:n?1:0,visibility:n?"visible":"hidden",zIndex:8e3,backgroundColor:"rgba(0,0,0,0.5)",cursor:"pointer",overflow:"scroll",transition:n?"visibility 0s ease-out, left 0.3s ease-out, opacity 0.3s ease-out":"left 0.3s ease-out, opacity 0.3s ease-out, visibility 0s ease-out 0.3s"},availableWidth:i,availableHeight:a,sidebarWidth:s}},El=n("gagd"),Cl=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,"oCt4"))})),kl=c.c.div.withConfig({displayName:"MainDisplayMarkdown__Container",componentId:"sc-5tw4mo-0"})(["margin:",";font-family:",";font-weight:300;color:",";line-height:1.4;width:","px;font-size:14px;line-height:1.4;@media (max-width:1080px){line-height:1.2;}h1{font-weight:700;font-size:2em;margin:0.3em 0;}h2{font-weight:600;font-size:1.8em;margin:0.3em 0;}h3{font-weight:500;font-size:1.6em;margin:0.3em 0;}h4{font-weight:500;font-size:1.4em;margin:0.2em 0;}h5{font-weight:500;font-size:1.2em;margin:0.2em 0;}h6{font-weight:500;font-size:1.2em;margin:0.2em 0;}pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px;}.line{margin-top:20px;margin-bottom:20px;border-bottom:1px solid #CCC;}.imageContainer{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;}img{margin-left:30px;margin-right:30px;margin-top:2px;margin-bottom:2px;}table,th,td{border:1px solid;}td,th{padding:3px;}"],(function(e){return e.mobile?"10px 5% 5% 5%":"50px 30px 30px 30px"}),u.b,(function(e){return e.theme.unselectedColor}),(function(e){return e.width-30})),Dl=Object(s.b)((function(e){return{narrativeBlock:e.narrative.blocks[e.narrative.blockIdx]}}))((function(e){var t=e.narrativeBlock,n=e.width,i=e.mobile;return o.a.createElement(kl,{width:n,mobile:i},o.a.createElement(r.Suspense,null,o.a.createElement(Cl,{dir:"auto",mdstring:t.mainDisplayMarkdown})))}));function Nl(e){return(Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Al(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Il(Object(n),!0).forEach((function(t){Wl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pl(e,t){return(Pl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fl(e);if(t){var o=Fl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rl(this,n)}}function Rl(e,t){return!t||"object"!==Nl(t)&&"function"!=typeof t?Bl(e):t}function Bl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fl(e){return(Fl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yl,Vl,Gl,Hl=Object(s.b)((function(e){return{loaded:e.narrative.loaded,blocks:e.narrative.blocks,currentInFocusBlockIdx:e.narrative.blockIdx,panelsToDisplay:e.controls.panelsToDisplay}}))(Ll=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pl(e,t)}(a,e);var t,n,r,i=zl(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Wl(Bl(t=i.call(this,e)),"NextButton",(function(e){return o.a.createElement(ko,{height:t.state.bannerHeight,onClick:t.goToNextPage},e.children)})),Wl(Bl(t),"PreviousButton",(function(e){return o.a.createElement(Co,{height:t.state.bannerHeight,onClick:t.goToPreviousPage},e.children)})),t.state={bannerHeight:50,contentHeight:window.innerHeight-100},t.exitNarrativeMode=function(){t.props.dispatch(Object(ei.b)({path:t.props.blocks[0].dataset,query:!0}))},t.goToNextPage=function(){t.props.currentInFocusBlockIdx+1!==t.props.blocks.length&&t._goToPage(t.props.currentInFocusBlockIdx+1)},t.goToPreviousPage=function(){0!==t.props.currentInFocusBlockIdx&&t._goToPage(t.props.currentInFocusBlockIdx-1)},t._goToPage=function(e){t.props.blocks[e]&&t.props.blocks[e].mainDisplayMarkdown?t.props.dispatch(Object(ei.a)({query:Mo.a.parse(t.props.blocks[e].query),queryToDisplay:{n:e}})):t.props.dispatch(Object(ei.b)({changeDataset:!1,query:Mo.a.parse(t.props.blocks[e].query),queryToDisplay:{n:e},push:!0})),document.getElementById("progress-bar").scrollIntoView()},t}return t=a,(n=[{key:"pageNarrativeContent",value:function(){if(this.props.blocks[this.props.currentInFocusBlockIdx].mainDisplayMarkdown)return null;var e=this.props.blocks[this.props.currentInFocusBlockIdx].__html;return 0===this.props.currentInFocusBlockIdx&&(e='\n  <p class="explanation">\n  Narratives are interleaved sections of text and associated nextstrain visualisations of the genomic data.\n  Click the coloured arrows at the top & bottom of each page to move through this narrative.\n  Within each page, you can scroll through the text to see visualisations of the genomic data.\n  </p>\n'+e),o.a.createElement("div",{id:"NarrativeBlock_".concat(this.props.currentInFocusBlockIdx),style:{padding:"10px 20px",height:"inherit",overflow:"hidden"},dangerouslySetInnerHTML:{__html:e}})}},{key:"renderMainMarkdown",value:function(){return this.props.panelsToDisplay.includes("EXPERIMENTAL_MainDisplayMarkdown")?o.a.createElement(Dl,{width:window.innerWidth,mobile:!0}):null}},{key:"renderVizCards",value:function(e){if(this.props.blocks[this.props.currentInFocusBlockIdx].mainDisplayMarkdown)return null;if(0===this.props.currentInFocusBlockIdx)return null;var t=window.innerWidth-50;return o.a.createElement(o.a.Fragment,null,this.props.panelsToDisplay.includes("tree")?o.a.createElement(Fn,{width:t,height:e}):null,this.props.panelsToDisplay.includes("map")?o.a.createElement(Jr,{width:t,height:e,justGotNewDatasetRenderNewMap:!1}):null)}},{key:"renderEndOfNarrative",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(this.PreviousButton,null,"Previous"),o.a.createElement(Do,{height:this.state.contentHeight+this.state.bannerHeight},this.renderProgress(),o.a.createElement(Eo,null,o.a.createElement("h1",null,"End of Narrative"),o.a.createElement("a",{style:Al({},Lo),onClick:function(){return e._goToPage(0)}},"Jump to the beginning"),o.a.createElement("br",null),o.a.createElement("a",{style:Al({},Lo),onClick:this.exitNarrativeMode},"Leave the narrative & explore the data yourself"))))}},{key:"renderStartOfNarrative",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Do,{height:this.state.contentHeight+this.state.bannerHeight},this.renderProgress(),this.pageNarrativeContent(),this.renderVizCards(this.state.contentHeight),this.renderMainMarkdown()),o.a.createElement(this.NextButton,null,"Next"))}},{key:"renderMiddleOfNarrative",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(this.PreviousButton,{"aria-labelledby":"nav1"},"Previous"),o.a.createElement(Do,{height:this.state.contentHeight},this.renderProgress(),this.pageNarrativeContent(),this.renderVizCards(this.state.contentHeight),this.renderMainMarkdown()),o.a.createElement(this.NextButton,{"aria-labelledby":"nav2"},"Next"))}},{key:"renderProgress",value:function(){var e=this;return o.a.createElement(xo,{id:"progress-bar",style:{height:"".concat(25,"px")}},this.props.blocks.map((function(t,n){var r=e.props.currentInFocusBlockIdx===n?"14px":"6px";return o.a.createElement(Oo,{key:n,style:{width:r,height:r},onClick:function(){return e._goToPage(n)}})})))}},{key:"render",value:function(){return 0===this.props.currentInFocusBlockIdx?this.renderStartOfNarrative():this.props.currentInFocusBlockIdx!==this.props.blocks.length-1?this.renderMiddleOfNarrative():this.renderEndOfNarrative()}}])&&_l(t.prototype,n),r&&_l(t,r),a}(o.a.Component))||Ll;function Ul(e){return(Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ql(e,t){return(Ql=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kl(e);if(t){var o=Kl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jl(this,n)}}function Jl(e,t){return!t||"object"!==Ul(t)&&"function"!=typeof t?Zl(e):t}function Zl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kl(e){return(Kl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $l=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"57Md"))})),eu=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"TKye"))})),tu=Object(s.b)((function(e){return{panelsToDisplay:e.controls.panelsToDisplay,panelLayout:e.controls.panelLayout,displayNarrative:e.narrative.display,narrativeIsLoaded:e.narrative.loaded,narrativeTitle:e.narrative.title,browserDimensions:e.browserDimensions.browserDimensions,frequenciesLoaded:e.frequencies.loaded,metadataLoaded:e.metadata.loaded,treeLoaded:e.tree.loaded,sidebarOpen:e.controls.sidebarOpen,showOnlyPanels:e.controls.showOnlyPanels}}))((Gl=Vl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ql(e,t)}(s,e);var t,n,i,a=Xl(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),t=a.call(this,e);var n=window.matchMedia("(min-width: ".concat(b.j,"px)"));return n.addListener((function(){return t.setState({mobileDisplay:!t.state.mql.matches})})),t.state={mql:n,mobileDisplay:!n.matches,showSpinner:!(t.props.metadataLoaded&&t.props.treeLoaded)},Object(Zr.b)(),t.toggleSidebar=t.toggleSidebar.bind(Zl(t)),t}return t=s,(n=[{key:"componentWillReceiveProps",value:function(e){this.state.showSpinner&&e.metadataLoaded&&e.treeLoaded&&this.setState({showSpinner:!1})}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("dragover",(function(e){e.preventDefault()}),!1),document.addEventListener("drop",(function(t){return t.preventDefault(),e.props.dispatch(ao(t.dataTransfer.files))}),!1)}},{key:"toggleSidebar",value:function(){this.props.dispatch({type:g.P,value:!this.props.sidebarOpen})}},{key:"shouldShowMapLegend",value:function(){var e=this.props.panelsToDisplay.includes("tree"),t="grid"!==this.props.panelLayout;return!e||t}},{key:"render",value:function(){var e=this;if(this.state.showSpinner)return o.a.createElement(El.a,null);if(this.state.mobileDisplay&&this.props.displayNarrative)return o.a.createElement(o.a.Fragment,null,o.a.createElement(ho,null),o.a.createElement(c.a,{theme:xl},o.a.createElement(Hl,null)));var t,n,i=Tl(this.props.browserDimensions,this.props.displayNarrative,this.props.sidebarOpen,this.state.mobileDisplay),a=i.availableWidth,s=i.availableHeight,l=i.sidebarWidth,f=i.overlayStyles,h=function(){e.props.dispatch({type:g.P,value:!1})},d=function(e,t,n,r,o){var i=e?.5:1,a=.36,s=e?.64:.88;if(n){var c=!0+t.includes("entropy")+t.includes("frequencies")-1;0===c?s=1:1===c?(s=.7,a=.3):(s=.5,a=.25),t.includes("map")&&t.includes("tree")&&!e&&(i=.5),!e||t.includes("map")&&t.includes("tree")||(i=1)}return{big:mo({horizontal:i,vertical:s,availableWidth:r,availableHeight:o}),chart:mo({horizontal:1,vertical:a,availableWidth:r,availableHeight:o,minHeight:150})}}("grid"===this.props.panelLayout,this.props.panelsToDisplay,this.props.displayNarrative,a,s),y=d.big,m=d.chart;return o.a.createElement("span",null,o.a.createElement(ho,null),o.a.createElement(ot.a,{showNothing:!0},o.a.createElement(c.a,{theme:xl},o.a.createElement(en,null))),o.a.createElement(p,{sidebarOpen:this.props.sidebarOpen,mobileDisplay:this.state.mobileDisplay,handler:this.toggleSidebar}),o.a.createElement(Ol,{sidebarOpen:this.props.sidebarOpen,width:l,height:s,displayNarrative:this.props.displayNarrative,panelsToDisplay:this.props.panelsToDisplay,narrativeTitle:this.props.narrativeTitle,mobileDisplay:this.state.mobileDisplay,navBarHandler:this.toggleSidebar}),o.a.createElement(Ml,{width:a,height:s,left:this.props.sidebarOpen?l:0},this.props.narrativeIsLoaded&&!this.props.panelsToDisplay.includes("EXPERIMENTAL_MainDisplayMarkdown")?(t=this.props.dispatch,n=this.props.displayNarrative,o.a.createElement("button",{style:go(go({},u.o),{},{fontSize:14,backgroundColor:"inherit",zIndex:100,position:"fixed",right:5,top:-1,cursor:"pointer",color:u.a}),onClick:function(){return t({type:g.N,display:!n})}},n?"explore the data yourself":"return to the narrative")):null,this.props.displayNarrative||this.props.showOnlyPanels?null:o.a.createElement(Bn,{width:yo(a,1)}),this.props.panelsToDisplay.includes("tree")?o.a.createElement(Fn,{width:y.width,height:y.height}):null,this.props.panelsToDisplay.includes("map")?o.a.createElement(Jr,{width:y.width,height:y.height,justGotNewDatasetRenderNewMap:!1,legend:this.shouldShowMapLegend()}):null,this.props.panelsToDisplay.includes("entropy")?o.a.createElement(r.Suspense,{fallback:null},o.a.createElement($l,{width:m.width,height:m.height})):null,this.props.panelsToDisplay.includes("frequencies")&&this.props.frequenciesLoaded?o.a.createElement(r.Suspense,{fallback:null},o.a.createElement(eu,{width:m.width,height:m.height})):null,this.props.displayNarrative||this.props.showOnlyPanels?null:o.a.createElement(wn,{width:yo(a,1)}),this.props.displayNarrative&&this.props.panelsToDisplay.includes("EXPERIMENTAL_MainDisplayMarkdown")?o.a.createElement(Dl,{width:yo(a,1)}):null),this.state.mobileDisplay?o.a.createElement("div",{style:f,onClick:h,onTouchStart:h}):null)}}])&&ql(t.prototype,n),i&&ql(t,i),s}(o.a.Component),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vl,"propTypes",{dispatch:a.a.func.isRequired}),Yl=Gl))||Yl;t.default=tu},"8oxB":function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,l=[],u=!1,p=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):p=-1,l.length&&h())}function h(){if(!u){var e=s(f);u=!0;for(var t=l.length;t;){for(c=l,l=[];++p<t;)c&&c[p].run();p=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||u||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"9f7F":function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=/^(?:0|[1-9]\d*)$/,c=parseInt;var l=Object.prototype.toString,u=Math.ceil,p=Math.max;var f,h=(f="length",function(e){return null==e?void 0:e[f]});function d(e){var t=y(e)?l.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function y(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function m(e){return"symbol"==n(e)||function(e){return!!e&&"object"==n(e)}(e)&&"[object Symbol]"==l.call(e)}function b(e){return e?(e=function(e){if("number"==typeof e)return e;if(m(e))return NaN;if(y(e)){var t=d(e.valueOf)?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=i.test(e);return n||a.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}var g,v=function(e,t,r){return r&&"number"!=typeof r&&function(e,t,r){if(!y(r))return!1;var o=n(t);return!!("number"==o?function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(h(e))&&!d(e)}(r)&&function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||s.test(e))&&e>-1&&e%1==0&&e<t}(t,r.length):"string"==o&&t in r)&&function(e,t){return e===t||e!=e&&t!=t}(r[t],e)}(e,t,r)&&(t=r=void 0),e=b(e),void 0===t?(t=e,e=0):t=b(t),function(e,t,n,r){for(var o=-1,i=p(u((t-e)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=e,e+=n;return a}(e,t,r=void 0===r?e<t?1:-1:b(r),g)};e.exports=v},CRoZ:function(e,t){e.exports=function(e){if(!Array.isArray(e))throw new Error("Array expected");if(!e.length)return[];for(var t,n,r,o,i,a=[],s=e.length,c=[],l=[],u=1,p=s;p--;)l[p]=0,c[p]=e[p].length,u*=c[p];for(t=0;t<u;t++){for(r=[],i=!0,o=0;o<s;o++)n=l[o],r.push(e[o][n]),i&&(n=(n+1)%c[o],l[o]=n,i=0==n);a.push(r)}return a}},ECyS:function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function o(e){return"Object"===r(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function i(e){return"Array"===r(e)}function a(e){return"Symbol"===r(e)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function s(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function c(e,t,n,r){var o=r.propertyIsEnumerable(t)?"enumerable":"nonenumerable";"enumerable"===o&&(e[t]=n),"nonenumerable"===o&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}function l(e,t,n){if(!o(t))return n&&i(n)&&n.forEach((function(n){t=n(e,t)})),t;var r={};o(e)&&(r=s(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)).reduce((function(n,r){var o=e[r];return(!a(r)&&!Object.getOwnPropertyNames(t).includes(r)||a(r)&&!Object.getOwnPropertySymbols(t).includes(r))&&c(n,r,o,e),n}),{}));return s(Object.getOwnPropertyNames(t),Object.getOwnPropertySymbols(t)).reduce((function(r,a){var s=t[a],u=o(e)?e[a]:void 0;return n&&i(n)&&n.forEach((function(e){s=e(u,s)})),void 0!==u&&o(s)&&(s=l(u,s,n)),c(r,a,s,t),r}),r)}t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=null,i=e;return o(e)&&e.extensions&&1===Object.keys(e).length&&(i={},r=e.extensions),t.reduce((function(e,t){return l(e,t,r)}),i)}},"F11+":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}if("object"!=r(t)||void 0===t)var o={};else o=e.exports={};!function(e,t){var n=new Array(50);function r(e,t){return null!=n[e]&&null!=n[e][t]}function o(e,t){return n[e][t]}function i(e,t,r){n.length<e?(n.length=e,n[e]=new Array(t+5)):void 0===n[e]&&(n[e]=new Array(t)),n[e].length<t&&(n[e]=new Array(t+5)),n[e][t]=r}e.get=function(e,t){if(0===t)return 1;if(0===e||t>e)return 0;if(t>e-t&&(t=e-t),r(e,t))return o(e,t);for(var n=1,a=e,s=1;s<=t;s++)r(a,s)?(e--,n=o(a,s)):(n*=e--,i(a,s,n/=s));return n},e.get_no_memo=function(e,t){if(0===t)return 1;if(0===e||t>e)return 0;t>e-t&&(t=e-t);for(var n=1,r=1;r<=t;r++)n*=e--,n/=r;return n}}(o)},IPqE:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),i=n("17x9"),a=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,i=h(a);function a(){return u(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"getStyles",value:function(){return{base:{display:"flex",flexDirection:this.props.direction,flexWrap:this.props.wrap,justifyContent:this.props.justifyContent,alignItems:this.props.alignItems,alignContent:this.props.alignContent,order:this.props.order,flexGrow:this.props.grow,flexShrink:this.props.shrink,flexBasis:this.props.basis,alignSelf:this.props.alignSelf},style:this.props.style}}},{key:"render",value:function(){var e=this.getStyles();return o.a.createElement("div",{id:this.props.id,onClick:this.props.clickHandler,style:l(l({},e.base),e.style)},this.props.children)}}])&&p(t.prototype,n),r&&p(t,r),a}(o.a.Component);m(b,"propTypes",{direction:a.a.oneOf(["row","rowReverse","column","columnReverse"]),wrap:a.a.oneOf(["nowrap","wrap","wrap-reverse"]),justifyContent:a.a.oneOf(["flex-start","flex-end","center","space-between","space-around"]),alignItems:a.a.oneOf(["flex-start","flex-end","center","baseline","stretch"]),alignContent:a.a.oneOf(["flex-start","flex-end","center","space-between","space-around","stretch"]),grow:a.a.number,shrink:a.a.number,basis:a.a.string,order:a.a.number,alignSelf:a.a.oneOf(["auto","flex-start","flex-end","center","baseline","stretch"]),children:a.a.node.isRequired,clickHandler:a.a.func}),m(b,"defaultProps",{direction:"row",wrap:"nowrap",justifyContent:"center",alignItems:"center",alignContent:"stretch",grow:0,shrink:1,basis:"auto",alignSelf:"auto",order:0,style:{},clickHandler:function(){}}),t.a=b},"IzZ+":function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return g}));var r=n("vBe5"),o=n("sQjb"),i=n("ZRP+"),a=(n("ncyr"),n("f3zc")),s=n("PAHG");function c(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(){"majorGrid"in this.groups&&this.groups.majorGrid.selectAll("*").style("visibility","hidden"),"minorGrid"in this.groups&&this.groups.minorGrid.selectAll("*").style("visibility","hidden"),"gridText"in this.groups&&this.groups.gridText.selectAll("*").style("visibility","hidden"),"axisText"in this.groups&&this.groups.axisText.selectAll("*").style("visibility","hidden")},h=function(e,t){var n=Math.floor(Math.log10(e)),r=Math.pow(10,n);e/r<2?r/=5:e/r<5&&(r/=2);var o=t;return 5!==r&&10!==r||(o=5),{majorStep:r,minorStep:r/o}},d=function(e,t){var n=function(e,t){return Math.ceil(e/t)*t},r=e/(Math.floor(t/(t<1200?100:150))||1);return{majorStep:r=r>100?n(r,100):r>10?n(r,10):r>1?n(r,1):r>1/12?n(r,1/12):r>1/52?n(r,1/52):r>1/365.25?n(r,1/365.25):1/365.25,minorStep:function(e){for(var t=0,n=[1/365.25,1/52,1/12,1,10,100,1e3];t<n.length;t++){var r=n[t];if(e/r<=12)return r}return e}(r)}},y=function(e,t){if(e>=1)return t.toFixed(Math.max(0,-Math.floor(Math.log10(e))));var n=l(Object(s.d)(t).split("-"),3),r=n[0],o=n[1],i=n[2];return e>=1/12?"".concat(r,"-").concat(a.E[o]):"".concat(r,"-").concat(a.E[o],"-").concat(i)},m=function(){var e,t,n=this.layout;if(e=this.groups,t=this.svg,"temporalWindow"in e||(e.temporalWindow=t.append("g").attr("id","temporalWindow"),e.temporalWindowStart=e.temporalWindow.append("rect").attr("class","temporalWindowStart"),e.temporalWindowEnd=e.temporalWindow.append("rect").attr("class","temporalWindowEnd")),"majorGrid"in e||(e.majorGrid=t.append("g").attr("id","majorGrid")),"minorGrid"in e||(e.minorGrid=t.append("g").attr("id","minorGrid")),"gridText"in e||(e.gridText=t.append("g").attr("id","gridText")),"axisText"in e||(e.axisText=t.append("g").attr("id","axisText")),"unrooted"!==n){var o,i=Object(r.c)(this.yScale.domain()),a=Object(r.b)(this.yScale.domain()),s="radial"===n?this.nodes[0].depth:this.xScale.domain()[0],l="radial"===n?s+Object(r.b)([this.xScale.domain()[1],this.yScale.domain()[1],-this.xScale.domain()[0],-this.yScale.domain()[0]]):this.xScale.domain()[1],u=this.xScale.range()[1]-this.xScale.range()[0],p=function(e,t,n,r,o,i){for(var a=[],s=[],c="num_date"===r?d(t-e,Math.abs(i)):h(t-e,o),l=c.majorStep,u=c.minorStep,p=Math.floor(e/l)*l,f="radial"===n?e:p,m=t,b=0;b<=(t-p)/l+3;b++){var g=p+l*b;a.push({position:g,name:"num_date"===r?y(l,g):g.toFixed(Math.max(0,-Math.floor(Math.log10(l)))),visibility:g<f||g>m?"hidden":"visible",axis:"x"});for(var v=g+u;v<g+l&&v<t;v+=u)s.push({position:v,visibility:v<f||v>m+u?"hidden":"visible",axis:"x"})}return{majorGridPoints:a,minorGridPoints:s}}(s,l,n,this.distance,this.params.minorTicks,u),f=p.majorGridPoints,m=p.minorGridPoints,b=function(e,t,n){return function(r){var o="";if("x"===r.axis){if("rect"===n||"clock"===n){var i=e(r.position);o="M"+i.toString()+" "+t.range()[1].toString()+" L "+i.toString()+" "+t.range()[0].toString()}else if("radial"===n){var a=e(r.position-s);o="M "+a.toString()+"  "+t(0).toString()+" A "+(a-e(0)).toString()+" "+(t(r.position)-t(s)).toString()+" 0 1 0 "+a.toString()+" "+(t(0)+.001).toString()}}else if("y"===r.axis){var c=t(r.position);o="M".concat(e(s)+20," ").concat(c," L ").concat(e(l)," ").concat(c)}return o}};if("clock"===this.layout&&f.push.apply(f,c(function(e,t){var n,r=[];n=h(t-e).majorStep;for(var o=Math.max(0,-Math.floor(Math.log10(n))),i=Math.floor(e/n)*n,a=t,s=i,c=1;c<=(t-i)/n+10;c++){var l=i+n*c;r.push({position:l,name:l.toFixed(o),visibility:l<s||l>a?"hidden":"visible",axis:"y"})}return{majorGridPoints:r}}(i,a).majorGridPoints)),this.groups.majorGrid.selectAll("*").remove(),this.groups.majorGrid.selectAll(".majorGrid").data(f).enter().append("path").attr("d",b(this.xScale,this.yScale,n)).attr("class","majorGrid").style("fill","none").style("visibility",(function(e){return e.visibility})).style("stroke",this.params.majorGridStroke).style("stroke-width",this.params.majorGridWidth),this.groups.minorGrid.selectAll("*").remove(),this.svg.selectAll(".minorGrid").remove(),this.groups.minorGrid.selectAll(".minorGrid").data(m).enter().append("path").attr("d",b(this.xScale,this.yScale,n)).attr("class","minorGrid").style("fill","none").style("visibility",(function(e){return e.visibility})).style("stroke",this.params.minorGridStroke).style("stroke-width",this.params.minorGridWidth),this.groups.gridText.selectAll("*").remove(),this.svg.selectAll(".gridText").remove(),this.groups.gridText.selectAll(".gridText").data(f).enter().append("text").text((function(e){return e.name})).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor",(o=n,function(e){return"x"===e.axis?"radial"===o?"end":"middle":"start"})).style("visibility",(function(e){return e.visibility})).attr("x",function(e,t){return function(n){return"x"===n.axis?e("radial"===t?0:n.position):e.range()[0]-15}}(this.xScale,n)).attr("y",function(e,t){return function(n){return"x"===n.axis?"radial"===t?e(n.position-s)-5:e.range()[1]+18:e(n.position)}}(this.yScale,n)),this.groups.axisText.selectAll("*").remove(),this.svg.selectAll(".axisText").remove(),"rect"===n||"clock"===n){var g="Date";"clock"===this.layout?g=this.yScale.domain()[0]>5?"Mutations":"Divergence":"div"===this.distance&&(g=this.xScale.domain()[1]>5?"Mutations":"Divergence"),this.groups.axisText.append("text").text("rect"===n?g:"Date").attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor","middle").attr("x",Math.abs(this.xScale.range()[1]-this.xScale.range()[0])/2).attr("y",this.yScale.range()[1]+this.params.margins.bottom-6),"clock"===n&&this.groups.axisText.append("text").text(g).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor","middle").attr("transform","translate(10,"+this.yScale.range()[1]/2+") rotate(-90)")}this.grid=!0}},b=function(){this.groups.temporalWindowStart.attr("opacity",0),this.groups.temporalWindowEnd.attr("opacity",0)},g=(Object(o.b)("temporalWindowTransition").duration(a.d).ease(i.a),function(){if("rect"===this.layout&&"num_date"===this.distance){var e=[this.xScale(this.dateRange[0]),this.xScale(this.dateRange[1])],t=this.yScale.range()[1],n=-1===this.params.orientation[0],r=this.xScale(this.nodes[0].x),o=n?this.xScale.range()[0]:this.xScale.range()[1];if(o+=this.params.margins.left+this.params.margins.right,Math.abs(e[0]-r)>30){var i=e[0],a=0;n&&(i=o-e[0],a=e[0]);var s="1"===this.groups.temporalWindowStart.attr("opacity");this.groups.temporalWindowStart.attr("opacity",1).attr("height",t).attr("transform","translate(".concat(a,",0)")).attr("fill","#EEE"),s?this.groups.temporalWindowStart.transition("temporalWindowTransition").attr("width",i):this.groups.temporalWindowStart.attr("width",i)}else this.groups.temporalWindowStart.attr("opacity",0);var c=e[1],l=o-this.params.margins.right-e[1],u="translate(".concat(o-this.params.margins.right,",0) scale(-1,1)");if(n&&(c=this.params.margins.right,l=e[1]-this.params.margins.right,u="translate(".concat(c,",0)")),l>30){var p="1"===this.groups.temporalWindowEnd.attr("opacity");this.groups.temporalWindowEnd.attr("opacity",1).attr("height",t).attr("fill","#EEE").attr("transform",u),p?this.groups.temporalWindowEnd.transition("temporalWindowTransition").attr("width",l):this.groups.temporalWindowEnd.attr("width",l)}else this.groups.temporalWindowEnd.attr("opacity",0)}else this.hideTemporalSlice()})},Ja6i:function(e,t,n){(e.exports=n("JPst")(!1)).push([e.i,'.awesomplete [hidden] {\n    display: none;\n}\n\n.awesomplete .visually-hidden {\n    position: absolute;\n    clip: rect(0, 0, 0, 0);\n}\n\n.awesomplete {\n    display: inline-block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\n\n.awesomplete > input {\n    display: block;\n}\n\n.awesomplete > ul {\n    position: absolute;\n    left: 0;\n    z-index: 1;\n    min-width: 100%;\n    box-sizing: border-box;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    background: #fff;\n    word-wrap: break-word;\n}\n\n.awesomplete > ul:empty {\n    display: none;\n}\n\n.awesomplete > ul {\n  width: 80%;\n  border-radius: .3em;\n  margin: .2em 0 0;\n  background: hsla(0,0%,100%,.9);\n  background: linear-gradient(to bottom right, white, hsla(0,0%,100%,.8));\n  border: 1px solid rgba(0,0,0,.3);\n  box-shadow: .05em .2em .6em rgba(0,0,0,.2);\n  text-shadow: none;\n}\n\n@supports (transform: scale(0)) {\n  .awesomplete > ul {\n    transition: .3s cubic-bezier(.4,.2,.5,1.4);\n    transform-origin: 1.43em -.43em;\n  }\n\n  .awesomplete > ul[hidden],\n  .awesomplete > ul:empty {\n    opacity: 0;\n    transform: scale(0);\n    display: block;\n    transition-timing-function: ease;\n  }\n}\n\n  /* Pointer */\n  .awesomplete > ul:before {\n    content: "";\n    position: absolute;\n    top: -.43em;\n    left: 1em;\n    width: 0; height: 0;\n    padding: .4em;\n    background: white;\n    border: inherit;\n    border-right: 0;\n    border-bottom: 0;\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n  }\n\n  .awesomplete > ul > li {\n    position: relative;\n    padding: .2em .5em;\n    cursor: pointer;\n  }\n\n  .awesomplete > ul > li:hover {\n    background: hsl(200, 40%, 80%);\n    color: black;\n  }\n\n  .awesomplete > ul > li[aria-selected="true"] {\n    background: hsl(205, 40%, 40%);\n    color: white;\n  }\n\n  .awesomplete mark {\n    color: rgb(80, 151, 186);\n    background: white;\n  }\n\n  .awesomplete li:hover mark {\n    background: hsl(200, 40%, 80%);\n  }\n',""])},Jf5V:function(e,t,n){(e.exports=n("JPst")(!1)).push([e.i,"/* Following class taken from https://docs.mapbox.com/help/how-mapbox-works/attribution/#other-mapping-frameworks */\n.mapbox-wordmark {\n\tposition: absolute;\n\tdisplay: block;\n\tmargin: 5px;\n\theight: 20px;\n\twidth: 65px;\n\tbottom: 0;\n\ttext-indent: -9999%;\n\tz-index: 99999;\n\toverflow: hidden;\n\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgODAuNDcgMjAuMDIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDgwLjQ3IDIwLjAyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe29wYWNpdHk6MC42O2ZpbGw6I0ZGRkZGRjtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgO30uc3Qxe29wYWNpdHk6MC42O2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fTwvc3R5bGU+PGc+PHBhdGggY2xhc3M9InN0MCIgZD0iTTc5LjI5LDEzLjYxYzAsMC4xMS0wLjA5LDAuMi0wLjIsMC4yaC0xLjUzYy0wLjEyLDAtMC4yMy0wLjA2LTAuMjktMC4xNmwtMS4zNy0yLjI4bC0xLjM3LDIuMjhjLTAuMDYsMC4xLTAuMTcsMC4xNi0wLjI5LDAuMTZoLTEuNTNjLTAuMDQsMC0wLjA4LTAuMDEtMC4xMS0wLjAzYy0wLjA5LTAuMDYtMC4xMi0wLjE4LTAuMDYtMC4yN2MwLDAsMCwwLDAsMGwyLjMxLTMuNWwtMi4yOC0zLjQ3Yy0wLjAyLTAuMDMtMC4wMy0wLjA3LTAuMDMtMC4xMWMwLTAuMTEsMC4wOS0wLjIsMC4yLTAuMmgxLjUzYzAuMTIsMCwwLjIzLDAuMDYsMC4yOSwwLjE2bDEuMzQsMi4yNWwxLjMzLTIuMjRjMC4wNi0wLjEsMC4xNy0wLjE2LDAuMjktMC4xNmgxLjUzYzAuMDQsMCwwLjA4LDAuMDEsMC4xMSwwLjAzYzAuMDksMC4wNiwwLjEyLDAuMTgsMC4wNiwwLjI3YzAsMCwwLDAsMCwwTDc2Ljk2LDEwbDIuMzEsMy41Qzc5LjI4LDEzLjUzLDc5LjI5LDEzLjU3LDc5LjI5LDEzLjYxeiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02My4wOSw5LjE2Yy0wLjM3LTEuNzktMS44Ny0zLjEyLTMuNjYtMy4xMmMtMC45OCwwLTEuOTMsMC40LTIuNiwxLjEyVjMuMzdjMC0wLjEyLTAuMS0wLjIyLTAuMjItMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjIsMC4xLTAuMjIsMC4yMnYxMC4yMWMwLDAuMTIsMC4xLDAuMjIsMC4yMiwwLjIyaDEuMzNjMC4xMiwwLDAuMjItMC4xLDAuMjItMC4yMnYtMC43YzAuNjgsMC43MSwxLjYyLDEuMTIsMi42LDEuMTJjMS43OSwwLDMuMjktMS4zNCwzLjY2LTMuMTNDNjMuMjEsMTAuMyw2My4yMSw5LjcyLDYzLjA5LDkuMTZMNjMuMDksOS4xNnogTTU5LjEyLDEyLjQxYy0xLjI2LDAtMi4yOC0xLjA2LTIuMy0yLjM2VjkuOTljMC4wMi0xLjMxLDEuMDQtMi4zNiwyLjMtMi4zNnMyLjMsMS4wNywyLjMsMi4zOVM2MC4zOSwxMi40MSw1OS4xMiwxMi40MXoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjguMjYsNi4wNGMtMS44OS0wLjAxLTMuNTQsMS4yOS0zLjk2LDMuMTNjLTAuMTIsMC41Ni0wLjEyLDEuMTMsMCwxLjY5YzAuNDIsMS44NSwyLjA3LDMuMTYsMy45NywzLjE0YzIuMjQsMCw0LjA2LTEuNzgsNC4wNi0zLjk5UzcwLjUxLDYuMDQsNjguMjYsNi4wNHogTTY4LjI0LDEyLjQyYy0xLjI3LDAtMi4zLTEuMDctMi4zLTIuMzlzMS4wMy0yLjQsMi4zLTIuNHMyLjMsMS4wNywyLjMsMi4zOVM2OS41MSwxMi40MSw2OC4yNCwxMi40Mkw2OC4yNCwxMi40MnoiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNTkuMTIsNy42M2MtMS4yNiwwLTIuMjgsMS4wNi0yLjMsMi4zNnYwLjA2YzAuMDIsMS4zMSwxLjA0LDIuMzYsMi4zLDIuMzZzMi4zLTEuMDcsMi4zLTIuMzlTNjAuMzksNy42Myw1OS4xMiw3LjYzeiBNNTkuMTIsMTEuMjNjLTAuNiwwLTEuMDktMC41My0xLjExLTEuMTlWMTBjMC4wMS0wLjY2LDAuNTEtMS4xOSwxLjExLTEuMTlzMS4xMSwwLjU0LDEuMTEsMS4yMVM1OS43NCwxMS4yMyw1OS4xMiwxMS4yM3oiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNNjguMjQsNy42M2MtMS4yNywwLTIuMywxLjA3LTIuMywyLjM5czEuMDMsMi4zOSwyLjMsMi4zOXMyLjMtMS4wNywyLjMtMi4zOVM2OS41MSw3LjYzLDY4LjI0LDcuNjN6IE02OC4yNCwxMS4yM2MtMC42MSwwLTEuMTEtMC41NC0xLjExLTEuMjFzMC41LTEuMiwxLjExLTEuMnMxLjExLDAuNTQsMS4xMSwxLjIxUzY4Ljg1LDExLjIzLDY4LjI0LDExLjIzeiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00My41Niw2LjI0aC0xLjMzYy0wLjEyLDAtMC4yMiwwLjEtMC4yMiwwLjIydjAuN2MtMC42OC0wLjcxLTEuNjItMS4xMi0yLjYtMS4xMmMtMi4wNywwLTMuNzUsMS43OC0zLjc1LDMuOTlzMS42OSwzLjk5LDMuNzUsMy45OWMwLjk5LDAsMS45My0wLjQxLDIuNi0xLjEzdjAuN2MwLDAuMTIsMC4xLDAuMjIsMC4yMiwwLjIyaDEuMzNjMC4xMiwwLDAuMjItMC4xLDAuMjItMC4yMlY2LjQ0YzAtMC4xMS0wLjA5LTAuMjEtMC4yMS0wLjIxQzQzLjU3LDYuMjQsNDMuNTcsNi4yNCw0My41Niw2LjI0eiBNNDIuMDIsMTAuMDVjLTAuMDEsMS4zMS0xLjA0LDIuMzYtMi4zLDIuMzZzLTIuMy0xLjA3LTIuMy0yLjM5czEuMDMtMi40LDIuMjktMi40YzEuMjcsMCwyLjI4LDEuMDYsMi4zLDIuMzZMNDIuMDIsMTAuMDV6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTM5LjcyLDcuNjNjLTEuMjcsMC0yLjMsMS4wNy0yLjMsMi4zOXMxLjAzLDIuMzksMi4zLDIuMzlzMi4yOC0xLjA2LDIuMy0yLjM2VjkuOTlDNDIsOC42OCw0MC45OCw3LjYzLDM5LjcyLDcuNjN6IE0zOC42MiwxMC4wMmMwLTAuNjcsMC41LTEuMjEsMS4xMS0xLjIxYzAuNjEsMCwxLjA5LDAuNTMsMS4xMSwxLjE5djAuMDRjLTAuMDEsMC42NS0wLjUsMS4xOC0xLjExLDEuMThTMzguNjIsMTAuNjgsMzguNjIsMTAuMDJ6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTQ5LjkxLDYuMDRjLTAuOTgsMC0xLjkzLDAuNC0yLjYsMS4xMlY2LjQ1YzAtMC4xMi0wLjEtMC4yMi0wLjIyLTAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLDAuMS0wLjIyLDAuMjJ2MTAuMjFjMCwwLjEyLDAuMSwwLjIyLDAuMjIsMC4yMmgxLjMzYzAuMTIsMCwwLjIyLTAuMSwwLjIyLTAuMjJ2LTMuNzhjMC42OCwwLjcxLDEuNjIsMS4xMiwyLjYxLDEuMTJjMi4wNywwLDMuNzUtMS43OCwzLjc1LTMuOTlTNTEuOTgsNi4wNCw0OS45MSw2LjA0eiBNNDkuNiwxMi40MmMtMS4yNiwwLTIuMjgtMS4wNi0yLjMtMi4zNlY5Ljk5YzAuMDItMS4zMSwxLjA0LTIuMzcsMi4yOS0yLjM3YzEuMjYsMCwyLjMsMS4wNywyLjMsMi4zOVM1MC44NiwxMi40MSw0OS42LDEyLjQyTDQ5LjYsMTIuNDJ6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTQ5LjYsNy42M2MtMS4yNiwwLTIuMjgsMS4wNi0yLjMsMi4zNnYwLjA2YzAuMDIsMS4zMSwxLjA0LDIuMzYsMi4zLDIuMzZzMi4zLTEuMDcsMi4zLTIuMzlTNTAuODYsNy42Myw0OS42LDcuNjN6IE00OS42LDExLjIzYy0wLjYsMC0xLjA5LTAuNTMtMS4xMS0xLjE5VjEwQzQ4LjUsOS4zNCw0OSw4LjgxLDQ5LjYsOC44MWMwLjYsMCwxLjExLDAuNTUsMS4xMSwxLjIxUzUwLjIxLDExLjIzLDQ5LjYsMTEuMjN6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTM0LjM2LDEzLjU5YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzRjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJWOS4yNGMwLTAuOTMtMC43LTEuNjMtMS41NC0xLjYzYy0wLjc2LDAtMS4zOSwwLjY3LTEuNTEsMS41NGwwLjAxLDQuNDRjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zNGMtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY5LjI0YzAtMC45My0wLjctMS42My0xLjU0LTEuNjNjLTAuODEsMC0xLjQ3LDAuNzUtMS41MiwxLjcxdjQuMjdjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY2LjQ0YzAuMDEtMC4xMiwwLjEtMC4yMSwwLjIyLTAuMjFoMS4zM2MwLjEyLDAsMC4yMSwwLjEsMC4yMiwwLjIxdjAuNjNjMC40OC0wLjY1LDEuMjQtMS4wNCwyLjA2LTEuMDVoMC4wM2MxLjA0LDAsMS45OSwwLjU3LDIuNDgsMS40OGMwLjQzLTAuOSwxLjMzLTEuNDgsMi4zMi0xLjQ5YzEuNTQsMCwyLjc5LDEuMTksMi43NiwyLjY1TDM0LjM2LDEzLjU5eiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik04MC4zMiwxMi45N2wtMC4wNy0wLjEyTDc4LjM4LDEwbDEuODUtMi44MWMwLjQyLTAuNjQsMC4yNS0xLjQ5LTAuMzktMS45MmMtMC4wMS0wLjAxLTAuMDItMC4wMS0wLjAzLTAuMDJjLTAuMjItMC4xNC0wLjQ4LTAuMjEtMC43NC0wLjIxaC0xLjUzYy0wLjUzLDAtMS4wMywwLjI4LTEuMywwLjc0bC0wLjMyLDAuNTNsLTAuMzItMC41M2MtMC4yOC0wLjQ2LTAuNzctMC43NC0xLjMxLTAuNzRoLTEuNTNjLTAuNTcsMC0xLjA4LDAuMzUtMS4yOSwwLjg4Yy0yLjA5LTEuNTgtNS4wMy0xLjQtNi45MSwwLjQzYy0wLjMzLDAuMzItMC42MiwwLjY5LTAuODUsMS4wOWMtMC44NS0xLjU1LTIuNDUtMi42LTQuMjgtMi42Yy0wLjQ4LDAtMC45NiwwLjA3LTEuNDEsMC4yMlYzLjM3YzAtMC43OC0wLjYzLTEuNDEtMS40LTEuNDFoLTEuMzNjLTAuNzcsMC0xLjQsMC42My0xLjQsMS40djMuNTdjLTAuOS0xLjMtMi4zOC0yLjA4LTMuOTctMi4wOWMtMC43LDAtMS4zOSwwLjE1LTIuMDIsMC40NWMtMC4yMy0wLjE2LTAuNTEtMC4yNS0wLjgtMC4yNWgtMS4zM2MtMC40MywwLTAuODMsMC4yLTEuMSwwLjUzYy0wLjAyLTAuMDMtMC4wNC0wLjA1LTAuMDctMC4wOGMtMC4yNy0wLjI5LTAuNjUtMC40NS0xLjA0LTAuNDVoLTEuMzJjLTAuMjksMC0wLjU3LDAuMDktMC44LDAuMjVDNDAuOCw1LDQwLjEyLDQuODUsMzkuNDIsNC44NWMtMS43NCwwLTMuMjcsMC45NS00LjE2LDIuMzhjLTAuMTktMC40NC0wLjQ2LTAuODUtMC43OS0xLjE5Yy0wLjc2LTAuNzctMS44LTEuMTktMi44OC0xLjE5aC0wLjAxYy0wLjg1LDAuMDEtMS42NywwLjMxLTIuMzQsMC44NGMtMC43LTAuNTQtMS41Ni0wLjg0LTIuNDUtMC44NGgtMC4wM2MtMC4yOCwwLTAuNTUsMC4wMy0wLjgyLDAuMWMtMC4yNywwLjA2LTAuNTMsMC4xNS0wLjc4LDAuMjdjLTAuMi0wLjExLTAuNDMtMC4xNy0wLjY3LTAuMTdoLTEuMzNjLTAuNzgsMC0xLjQsMC42My0xLjQsMS40djcuMTRjMCwwLjc4LDAuNjMsMS40LDEuNCwxLjRoMS4zM2MwLjc4LDAsMS40MS0wLjYzLDEuNDEtMS40MWMwLDAsMCwwLDAsMFY5LjM1YzAuMDMtMC4zNCwwLjIyLTAuNTYsMC4zNC0wLjU2YzAuMTcsMCwwLjM2LDAuMTcsMC4zNiwwLjQ1djQuMzVjMCwwLjc4LDAuNjMsMS40LDEuNCwxLjRoMS4zNGMwLjc4LDAsMS40LTAuNjMsMS40LTEuNGwtMC4wMS00LjM1YzAuMDYtMC4zLDAuMjQtMC40NSwwLjMzLTAuNDVjMC4xNywwLDAuMzYsMC4xNywwLjM2LDAuNDV2NC4zNWMwLDAuNzgsMC42MywxLjQsMS40LDEuNGgxLjM0YzAuNzgsMCwxLjQtMC42MywxLjQtMS40di0wLjM2YzAuOTEsMS4yMywyLjM0LDEuOTYsMy44NywxLjk2YzAuNywwLDEuMzktMC4xNSwyLjAyLTAuNDVjMC4yMywwLjE2LDAuNTEsMC4yNSwwLjgsMC4yNWgxLjMyYzAuMjksMCwwLjU3LTAuMDksMC44LTAuMjV2MS45MWMwLDAuNzgsMC42MywxLjQsMS40LDEuNGgxLjMzYzAuNzgsMCwxLjQtMC42MywxLjQtMS40di0xLjY5YzAuNDYsMC4xNCwwLjk0LDAuMjIsMS40MiwwLjIxYzEuNjIsMCwzLjA3LTAuODMsMy45Ny0yLjF2MC41YzAsMC43OCwwLjYzLDEuNCwxLjQsMS40aDEuMzNjMC4yOSwwLDAuNTctMC4wOSwwLjgtMC4yNWMwLjYzLDAuMywxLjMyLDAuNDUsMi4wMiwwLjQ1YzEuODMsMCwzLjQzLTEuMDUsNC4yOC0yLjZjMS40NywyLjUyLDQuNzEsMy4zNiw3LjIyLDEuODljMC4xNy0wLjEsMC4zNC0wLjIxLDAuNS0wLjM0YzAuMjEsMC41MiwwLjcyLDAuODcsMS4yOSwwLjg2aDEuNTNjMC41MywwLDEuMDMtMC4yOCwxLjMtMC43NGwwLjM1LTAuNThsMC4zNSwwLjU4YzAuMjgsMC40NiwwLjc3LDAuNzQsMS4zMSwwLjc0aDEuNTJjMC43NywwLDEuMzktMC42MywxLjM4LTEuMzlDODAuNDcsMTMuMzgsODAuNDIsMTMuMTcsODAuMzIsMTIuOTdMODAuMzIsMTIuOTd6IE0zNC4xNSwxMy44MWgtMS4zNGMtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY5LjI0YzAtMC45My0wLjctMS42My0xLjU0LTEuNjNjLTAuNzYsMC0xLjM5LDAuNjctMS41MSwxLjU0bDAuMDEsNC40NGMwLDAuMTItMC4xLDAuMjItMC4yMiwwLjIyaC0xLjM0Yy0wLjEyLDAtMC4yMi0wLjEtMC4yMi0wLjIyVjkuMjRjMC0wLjkzLTAuNy0xLjYzLTEuNTQtMS42M2MtMC44MSwwLTEuNDcsMC43NS0xLjUyLDEuNzF2NC4yN2MwLDAuMTItMC4xLDAuMjItMC4yMiwwLjIyaC0xLjMzYy0wLjEyLDAtMC4yMi0wLjEtMC4yMi0wLjIyVjYuNDRjMC4wMS0wLjEyLDAuMS0wLjIxLDAuMjItMC4yMWgxLjMzYzAuMTIsMCwwLjIxLDAuMSwwLjIyLDAuMjF2MC42M2MwLjQ4LTAuNjUsMS4yNC0xLjA0LDIuMDYtMS4wNWgwLjAzYzEuMDQsMCwxLjk5LDAuNTcsMi40OCwxLjQ4YzAuNDMtMC45LDEuMzMtMS40OCwyLjMyLTEuNDljMS41NCwwLDIuNzksMS4xOSwyLjc2LDIuNjVsMC4wMSw0LjkxQzM0LjM3LDEzLjcsMzQuMjcsMTMuOCwzNC4xNSwxMy44MUMzNC4xNSwxMy44MSwzNC4xNSwxMy44MSwzNC4xNSwxMy44MXogTTQzLjc4LDEzLjU5YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJ2LTAuNzFDNDEuMzQsMTMuNiw0MC40LDE0LDM5LjQyLDE0Yy0yLjA3LDAtMy43NS0xLjc4LTMuNzUtMy45OXMxLjY5LTMuOTksMy43NS0zLjk5YzAuOTgsMCwxLjkyLDAuNDEsMi42LDEuMTJ2LTAuN2MwLTAuMTIsMC4xLTAuMjIsMC4yMi0wLjIyaDEuMzNjMC4xMS0wLjAxLDAuMjEsMC4wOCwwLjIyLDAuMmMwLDAuMDEsMCwwLjAxLDAsMC4wMlYxMy41OXogTTQ5LjkxLDE0Yy0wLjk4LDAtMS45Mi0wLjQxLTIuNi0xLjEydjMuNzhjMCwwLjEyLTAuMSwwLjIyLTAuMjIsMC4yMmgtMS4zM2MtMC4xMiwwLTAuMjItMC4xLTAuMjItMC4yMlY2LjQ1YzAtMC4xMiwwLjEtMC4yMSwwLjIyLTAuMjFoMS4zM2MwLjEyLDAsMC4yMiwwLjEsMC4yMiwwLjIydjAuN2MwLjY4LTAuNzIsMS42Mi0xLjEyLDIuNi0xLjEyYzIuMDcsMCwzLjc1LDEuNzcsMy43NSwzLjk4UzUxLjk4LDE0LDQ5LjkxLDE0eiBNNjMuMDksMTAuODdDNjIuNzIsMTIuNjUsNjEuMjIsMTQsNTkuNDMsMTRjLTAuOTgsMC0xLjkyLTAuNDEtMi42LTEuMTJ2MC43YzAsMC4xMi0wLjEsMC4yMi0wLjIyLDAuMjJoLTEuMzNjLTAuMTIsMC0wLjIyLTAuMS0wLjIyLTAuMjJWMy4zN2MwLTAuMTIsMC4xLTAuMjIsMC4yMi0wLjIyaDEuMzNjMC4xMiwwLDAuMjIsMC4xLDAuMjIsMC4yMnYzLjc4YzAuNjgtMC43MSwxLjYyLTEuMTIsMi42LTEuMTFjMS43OSwwLDMuMjksMS4zMywzLjY2LDMuMTJDNjMuMjEsOS43Myw2My4yMSwxMC4zMSw2My4wOSwxMC44N0w2My4wOSwxMC44N0w2My4wOSwxMC44N3ogTTY4LjI2LDE0LjAxYy0xLjksMC4wMS0zLjU1LTEuMjktMy45Ny0zLjE0Yy0wLjEyLTAuNTYtMC4xMi0xLjEzLDAtMS42OWMwLjQyLTEuODUsMi4wNy0zLjE1LDMuOTctMy4xNGMyLjI1LDAsNC4wNiwxLjc4LDQuMDYsMy45OVM3MC41LDE0LjAxLDY4LjI2LDE0LjAxTDY4LjI2LDE0LjAxeiBNNzkuMDksMTMuODFoLTEuNTNjLTAuMTIsMC0wLjIzLTAuMDYtMC4yOS0wLjE2bC0xLjM3LTIuMjhsLTEuMzcsMi4yOGMtMC4wNiwwLjEtMC4xNywwLjE2LTAuMjksMC4xNmgtMS41M2MtMC4wNCwwLTAuMDgtMC4wMS0wLjExLTAuMDNjLTAuMDktMC4wNi0wLjEyLTAuMTgtMC4wNi0wLjI3YzAsMCwwLDAsMCwwbDIuMzEtMy41bC0yLjI4LTMuNDdjLTAuMDItMC4wMy0wLjAzLTAuMDctMC4wMy0wLjExYzAtMC4xMSwwLjA5LTAuMiwwLjItMC4yaDEuNTNjMC4xMiwwLDAuMjMsMC4wNiwwLjI5LDAuMTZsMS4zNCwyLjI1bDEuMzQtMi4yNWMwLjA2LTAuMSwwLjE3LTAuMTYsMC4yOS0wLjE2aDEuNTNjMC4wNCwwLDAuMDgsMC4wMSwwLjExLDAuMDNjMC4wOSwwLjA2LDAuMTIsMC4xOCwwLjA2LDAuMjdjMCwwLDAsMCwwLDBMNzYuOTYsMTBsMi4zMSwzLjVjMC4wMiwwLjAzLDAuMDMsMC4wNywwLjAzLDAuMTFDNzkuMjksMTMuNzIsNzkuMiwxMy44MSw3OS4wOSwxMy44MUM3OS4wOSwxMy44MSw3OS4wOSwxMy44MSw3OS4wOSwxMy44MUw3OS4wOSwxMy44MXoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTAsMS4yMWMtNC44NywwLTguODEsMy45NS04LjgxLDguODFzMy45NSw4LjgxLDguODEsOC44MXM4LjgxLTMuOTUsOC44MS04LjgxQzE4LjgxLDUuMTUsMTQuODcsMS4yMSwxMCwxLjIxeiBNMTQuMTgsMTIuMTljLTEuODQsMS44NC00LjU1LDIuMi02LjM4LDIuMmMtMC42NywwLTEuMzQtMC4wNS0yLTAuMTVjMCwwLTAuOTctNS4zNywyLjA0LTguMzljMC43OS0wLjc5LDEuODYtMS4yMiwyLjk4LTEuMjJjMS4yMSwwLDIuMzcsMC40OSwzLjIzLDEuMzVDMTUuOCw3LjczLDE1Ljg1LDEwLjUsMTQuMTgsMTIuMTl6Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTEwLDAuMDJjLTUuNTIsMC0xMCw0LjQ4LTEwLDEwczQuNDgsMTAsMTAsMTBzMTAtNC40OCwxMC0xMEMxOS45OSw0LjUsMTUuNTIsMC4wMiwxMCwwLjAyeiBNMTAsMTguODNjLTQuODcsMC04LjgxLTMuOTUtOC44MS04LjgxUzUuMTMsMS4yLDEwLDEuMnM4LjgxLDMuOTUsOC44MSw4LjgxQzE4LjgxLDE0Ljg5LDE0Ljg3LDE4LjgzLDEwLDE4LjgzeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNC4wNCw1Ljk4Yy0xLjc1LTEuNzUtNC41My0xLjgxLTYuMi0wLjE0QzQuODMsOC44Niw1LjgsMTQuMjMsNS44LDE0LjIzczUuMzcsMC45Nyw4LjM5LTIuMDRDMTUuODUsMTAuNSwxNS44LDcuNzMsMTQuMDQsNS45OHogTTExLjg4LDkuODdsLTAuODcsMS43OGwtMC44Ni0xLjc4TDguMzgsOS4wMWwxLjc3LTAuODZsMC44Ni0xLjc4bDAuODcsMS43OGwxLjc3LDAuODZMMTEuODgsOS44N3oiLz48cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjEzLjY1LDkuMDEgMTEuODgsOS44NyAxMS4wMSwxMS42NSAxMC4xNSw5Ljg3IDguMzgsOS4wMSAxMC4xNSw4LjE1IDExLjAxLDYuMzcgMTEuODgsOC4xNSAiLz48L2c+PC9zdmc+);\n\tbackground-repeat: no-repeat;\n\tbackground-position: 0 0;\n  background-size: 65px 20px;\n  cursor: pointer;\n}",""])},KmX0:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),i=n("vec1");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,n,r,a=h(s);function s(){return u(this,s),a.apply(this,arguments)}return t=s,(n=[{key:"getStyles",value:function(){return{base:{backgroundColor:"#FFFFFF",display:"inline-block",marginLeft:14,marginRight:0,marginTop:0,marginBottom:10,paddingLeft:6,paddingRight:6,paddingBottom:6,overflow:"hidden",position:"relative"},title:{fontFamily:i.d,color:i.a,fontSize:16,marginLeft:0,marginTop:0,marginBottom:8,fontWeight:500,backgroundColor:"#FFFFFF",borderTop:"thin solid #BBB",minHeight:"15px"}}}},{key:"getStylesInfoCard",value:function(){return{base:{backgroundColor:"#FFFFFF",display:"inline-block",marginLeft:14,marginRight:0,marginTop:0,marginBottom:10,paddingLeft:6,paddingRight:6,paddingBottom:6,overflow:"hidden",position:"relative"},title:{fontFamily:i.d,color:"#fff",fontSize:16,marginLeft:0,marginTop:0,marginBottom:8,fontWeight:500,backgroundColor:"#FFFFFF"}}}},{key:"render",value:function(){var e=this.props.infocard?this.getStylesInfoCard():this.getStyles();return o.a.createElement("div",{id:"".concat(this.props.title,"Card"),style:c(c({},e.base),this.props.style)},o.a.createElement("div",{id:"CardTitle",style:c(c({},e.title),this.props.titleStyles)},this.props.title),o.a.createElement("div",{id:"CardContentContainer",style:{display:"flex",justifyContent:this.props.center?"center":"flex-start"}},this.props.children))}}])&&p(t.prototype,n),r&&p(t,r),s}(o.a.Component);t.a=m},Nf4T:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("iR1B"),o=n("lCtn"),i=(n("ncyr"),n("Rv1n")),a=n("CJ/n"),s=n("vzVy"),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(t,n){var c=n(),l=c.controls,u=c.tree,p=c.treeToo,f=c.metadata,h=c.frequencies;if(null===u.nodes||!f.loaded)return null;var d=e||l.colorBy,y=Object(o.a)(d,l,u,p,f),m=Object(r.b)(u,y),b=p.loaded?Object(r.b)(p,y):void 0,g=Object(r.c)(d),v=g!==l.mutType&&g;return v&&t(Object(i.a)(v)),t({type:s.E,colorBy:d,colorScale:y,nodeColors:m,nodeColorsToo:b,version:y.version}),h.loaded&&Object(a.b)(t,n),null}}},QXb2:function(e,t,n){var r=n("Ja6i");"string"==typeof r&&(r=[[e.i,r,""]]);n("ZuTH")(r,{});r.locals&&(e.exports=r.locals)},TAZq:function(e,t,n){var r,o,i;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,o,i,a,s,c,l,u,p){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===l)return r+"/*|*/";break;case 3:switch(l){case 102:case 112:return e(o[0]+r),"";default:return r+(0===p?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}},"object"===a(t)&&void 0!==e?e.exports=i():(r=i(),void 0===(o="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=o))},TSYQ:function(e,t,n){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var i={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=o(n);if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)&&n.length){var s=a.apply(null,n);s&&e.push(s)}else if("object"===r)for(var c in n)i.call(n,c)&&n[c]&&e.push(c)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):"object"===o(n("PDX0"))&&n("PDX0")?void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r):window.classNames=a}()},UMV1:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),i=n("vOnD"),a=n("f3zc"),s=n("ma3e"),c=function(e){var t=e.navHeight,n=e.navWidth,r=e.display,i=e.onClick,a={position:"fixed",left:n?n-12:-12,visibility:r?"visible":"hidden",width:r?12:0,top:t/2-8,backgroundColor:"inherit",boxShadow:"none",cursor:"pointer",borderRadius:"0px",fontSize:12,color:"#444",textAlign:"center",verticalAlign:"middle"};return o.a.createElement("div",{style:a,onClick:i},o.a.createElement(s.b,null))},l=n("lQ7N"),u=i.c.div.withConfig({displayName:"content__AuspiceNavBarContainer",componentId:"jg0fvy-0"})(["display:flex;flex-direction:row;align-items:center;justify-content:center;height:100%;"]),p=i.c.a.withConfig({displayName:"content__Title",componentId:"jg0fvy-1"})(["padding:0px;text-decoration:none;color:",";font-size:20px;font-weight:400;cursor:pointer;letter-spacing:1rem;"],(function(e){return e.theme.color})),f=i.c.a.withConfig({displayName:"content__LogoLink",componentId:"jg0fvy-2"})(["padding:5px 5px;width:50px;cursor:pointer;"]),h=i.c.div.withConfig({displayName:"content__NarrativeTitle",componentId:"jg0fvy-3"})(["white-space:nowrap;font-size:1.7rem;margin-left:auto;padding:0px 12px;float:right;color:",";max-width:","px;overflow:hidden;text-overflow:ellipsis;"],(function(e){return e.theme.color}),(function(e){return e.width-90})),d=n("uN13"),y=i.c.div.withConfig({displayName:"navBar__NavBarContainer",componentId:"ygpsg-0"})(["left:0;max-width:960px;margin-top:auto;margin-right:auto;margin-bottom:auto;margin-left:auto;height:","px;justify-content:space-between;align-items:center;overflow:hidden;z-index:100;transition:left .3s ease-out;"],(function(e){return e.narrative?a.F:a.G})),m=Object(d.b)("navbarComponent")?Object(d.a)("navbarComponent"):function(e){var t=e.narrativeTitle,n=e.sidebar,r=e.width;return n?o.a.createElement(u,null,o.a.createElement("div",{style:{flex:1}}),o.a.createElement(f,{href:"/"},o.a.createElement("img",{alt:"splashPage",width:"40px",src:l})),o.a.createElement("div",{style:{flex:1}}),function(e,t){return e?o.a.createElement(h,{width:t,href:"/"},e):o.a.createElement(p,{href:"/"},"auspice")}(t,r),o.a.createElement("div",{style:{flex:1}})):null};t.a=function(e){var t=e.sidebar,n=e.toggleHandler,r=e.narrativeTitle,i=e.width,s=t&&!r;return o.a.createElement(y,null,o.a.createElement(m,{narrativeTitle:r,sidebar:t,width:i}),o.a.createElement(c,{navHeight:a.G,navWidth:i,display:s,onClick:n}))}},Wwog:function(e,t,n){"use strict";function r(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}t.a=function(e,t){var n;void 0===t&&(t=r);var o,i=[],a=!1;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return a&&n===this&&t(r,i)||(o=e.apply(this,r),a=!0,n=this,i=r),o}}},lQ7N:function(e,t,n){e.exports=n.p+"1ffc23cfee00e9e13194f13f3a7ce418.svg"},o0so:function(e,t,n){var r={"./ar/language.json":"Bnmt","./ar/sidebar.json":"Gg6T","./ar/translation.json":"rCzw","./de/language.json":"Fpfx","./de/sidebar.json":"SX3J","./de/translation.json":"lNZC","./en/language.json":"pWbZ","./en/sidebar.json":"kRiY","./en/translation.json":"ewjA","./es/language.json":"QpRR","./es/sidebar.json":"gt6S","./es/translation.json":"vNGc","./fr/language.json":"amu5","./fr/sidebar.json":"A71f","./fr/translation.json":"MptL","./ja/language.json":"SHOp","./ja/sidebar.json":"k/wX","./ja/translation.json":"6b9/","./lt/language.json":"Tifc","./lt/sidebar.json":"iP/f","./lt/translation.json":"8KHO","./pt/language.json":"bozp","./pt/sidebar.json":"Iu/l","./pt/translation.json":"JKj4","./ru/language.json":"eYst","./ru/sidebar.json":"/z8P","./ru/translation.json":"BhuY","./tr/language.json":"w/Fn","./tr/sidebar.json":"AZsn","./tr/translation.json":"Vp6X"};function o(e){return i(e).then((function(e){return n.t(e,3)}))}function i(e){return n.e(3).then((function(){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}))}o.keys=function(){return Object.keys(r)},o.resolve=i,o.id="o0so",e.exports=o},qJpv:function(e,t,n){var r=n("9f7F");e.exports=function(e,t,n){var o=r(e,t,(t-e)/(n-1));return o.length==n?o:o.concat(t)}},t33a:function(e,t,n){"use strict";e.exports={}},tL8e:function(e,t,n){e.exports=n.p+"f66966ba89ed36ecbe0e4e0688cb1ef9.png"},vec1:function(e,t,n){"use strict";n.d(t,"p",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"k",(function(){return h})),n.d(t,"g",(function(){return d})),n.d(t,"o",(function(){return y})),n.d(t,"l",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return g})),n.d(t,"e",(function(){return v}));var r=n("f3zc"),o="Lato, Helvetica Neue, Helvetica, sans-serif",i="Lato, Helvetica Neue, Helvetica, sans-serif",a="Lato, Helvetica Neue, Helvetica, sans-serif",s="#333",c="#888",l="#BBB",u="#F2F2F2",p="#89B77F",f="#E39B39",h={backgroundColor:"#FFF",fontFamily:a,width:r.l-13,borderSpacing:0,fontSize:14,paddingLeft:"10px",border:"1px solid #ccc",height:36,appearance:"none",borderRadius:"4px",color:s,fontWeight:400,marginBottom:"3px"},d={border:"0px",backgroundColor:"inherit",marginLeft:0,marginTop:5,marginRight:10,marginBottom:5,borderRadius:2,cursor:"pointer",padding:2,fontFamily:a,color:s,fontWeight:400,textTransform:"uppercase",fontSize:14,verticalAlign:"top",outline:0},y={borderTop:"1px solid #BBB",borderLeft:"1px solid #CCC",borderRight:"1px solid #CCC",borderBottom:"1px solid #CCC",borderRadius:"0px 0px 3px 3px",paddingTop:3,paddingBottom:3,paddingLeft:6,paddingRight:6,backgroundColor:"#fff",fontWeight:400,color:s,fontFamily:a,fontSize:12,textTransform:"uppercase"},m={borderTop:"1px solid #BBB",borderLeft:"1px solid #CCC",borderRight:"1px solid #CCC",borderBottom:"1px solid #CCC",borderRadius:"0px 0px 3px 3px",paddingTop:3,paddingBottom:3,paddingLeft:6,paddingRight:6,backgroundColor:"#fff"},b={border:"none",backgroundColor:"inherit",padding:0,margin:0,cursor:"pointer",fontFamily:a,color:s,fontWeight:400,textTransform:"uppercase",fontSize:12},g={border:"none",backgroundColor:"inherit",padding:0,margin:0,cursor:"pointer",fontFamily:a,color:"#5097BA",fontWeight:400,textTransform:"uppercase",fontSize:12},v={branchInfoHeading:{fontSize:15,fontWeight:400,verticalAlign:"middle",padding:"5px"},buttonLink:{float:"right",fontFamily:a,fontSize:14,fontWeight:400,textDecoration:"none",pointerEvents:"auto",background:"none",color:"white",cursor:"pointer",textTransform:"uppercase",borderRadius:2,border:"1px solid #CCC",verticalAlign:"middle"},tooltip:{position:"relative",padding:5,color:"white",fontFamily:a,fontSize:14,lineHeight:1,fontWeight:300},modalContainer:{position:"absolute",width:"100%",height:"100%",pointerEvents:"all",top:0,left:0,zIndex:2e3,backgroundColor:"rgba(80, 80, 80, .20)",display:"flex",justifyContent:"center",alignItems:"center",wordWrap:"break-word",wordBreak:"break-word"},panel:{position:"relative",paddingLeft:30,padding:"5% 5%",borderRadius:5,backgroundColor:"rgba(55,55,55,0.9)",color:"white",fontFamily:a,fontSize:18,lineHeight:1,fontWeight:300,maxWidth:"80%",overflowY:"auto"},modalHeading:{fontSize:24,fontWeight:400},modalSubheading:{fontSize:20,fontWeight:400,marginTop:"20px",marginBottom:"20px"},tooltipHeading:{fontSize:18,fontWeight:400,marginBottom:"10px"},comment:{fontStyle:"italic",fontWeight:200,fontSize:14,marginTop:"10px"},topRightMessage:{fontStyle:"italic",fontWeight:200,fontSize:14,textAlign:"right",marginTop:"-20px"},list:{paddingLeft:15,listStyleType:"disc"},item:{paddingTop:4,paddingBottom:4,minWidth:120},break:{marginBottom:"10px"}}},zGY6:function(e,t,n){var r=n("Jf5V");"string"==typeof r&&(r=[[e.i,r,""]]);n("ZuTH")(r,{});r.locals&&(e.exports=r.locals)}}]);